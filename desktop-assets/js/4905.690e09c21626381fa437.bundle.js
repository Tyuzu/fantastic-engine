"use strict";(self.webpackChunkimgur_web=self.webpackChunkimgur_web||[]).push([[4905],{"3dMY":(e,t,n)=>{n.d(t,{Z:()=>i});var r=n("q1tI"),o=(n("17x9"),n("oIX6"));function i(e){var t=e.isPromoted,n=e.isUserLoaded,i=e.itemUsername,a=e.currentUsername,s=e.children;return e.isEnabled&&!t&&n&&i&&a!==i&&!o.V0.includes(i)?r.createElement("div",null,s):null}i.defaultProps={isEnabled:!0,isUserLoaded:!1,isPromoted:!1},i.__docgenInfo={description:"",methods:[],displayName:"GiveEmeraldButtonSwitch",props:{isEnabled:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:""},isUserLoaded:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},isPromoted:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},currentUsername:{type:{name:"string"},required:!0,description:""},itemUsername:{type:{name:"string"},required:!0,description:""},children:{type:{name:"object"},required:!0,description:""}}}},"2uEn":(e,t,n)=>{n.d(t,{ZP:()=>li,K:()=>si});var r=n("pVnL"),o=n.n(r),i=n("lwsE"),a=n.n(i),s=n("W8MJ"),c=n.n(s),l=n("PJYZ"),m=n.n(l),d=n("7W2i"),u=n.n(d),p=n("a1gu"),f=n.n(p),g=n("Nsbk"),y=n.n(g),h=n("lSNA"),v=n.n(h),C=n("q1tI"),b=n("17x9"),E=n.n(b),P=n("28IT"),k=n("mwIZ"),I=n.n(k),N=n("MHWf"),q=n("hSrQ"),S=n("EeM5"),A=n("iAkV"),R=n("mfLT"),D=n("/MKj"),w=n("HGpU"),T=n("HGQq"),M=n("FaWJ"),x=n("d8/m"),Z=n("c+PL"),O=n("JCOJ"),U=n("puhG"),L=n("q2T8"),F=n("+qrI"),_=n("txC3");function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var G=function(e){u()(n,e);var t=B(n);function n(){var e;a()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),v()(m()(e),"toggleVisibility",(function(){var t=e.props;(0,t.setBottomRecircVisibilityAction)(!t.isBottomRecircVisible)})),e}return c()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.setPosts,n=e.posts;L.yh||t(n)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.adsEnabled,r=t.adConfig,o=t.setPosts,i=t.posts;e.adsEnabled===n&&e.adConfig===r||o(i)}},{key:"render",value:function(){var e=this.props,t=e.isBottomRecircVisible,n=e.title,r=e.getRecirc,o=e.posts;return C.createElement("div",{className:"BottomRecirc"},C.createElement("h2",{className:"BottomRecirc-label",onClick:this.toggleVisibility},o.size>0&&n),C.createElement("div",{style:{display:t?"block":"none"}},r()))}}]),n}(C.Component),V=(0,D.$j)((function(e,t){var n=e.posts,r=e.ui,o=t.op,i=t.treatment;return{posts:n.get("recircPosts"),isBottomRecircVisible:r.gallery.get("isBottomRecircVisible"),title:i===R.Hp?"More posts from ".concat(o):"More posts you may like"}}),(function(e,t){var n=t.op,r=t.postHash,o=t.treatment,i=function(){},a="",s="";return o===R.Hp?(s=O.xR,i=M.oH,a=n):o===R.MW&&(s=O.H5,i=x.rk,a=r),{setBottomRecircVisibilityAction:function(t){e((0,F.l5)(t))},getRecirc:function(){return C.createElement(w._6,{streamSection:s,streamParam:a,recircFetcher:i,navigationTrigger:"Recirc -",navigationDirection:"Post Footer",location:Z.qL,sendToTop:!0})},setPosts:function(){e(i(a,0,x.HK,r))}}}))(G);G.__docgenInfo={description:"",methods:[{name:"toggleVisibility",docblock:null,modifiers:[],params:[],returns:null}],displayName:"BottomRecirc",props:{posts:{type:{name:"object"},required:!0,description:""},setBottomRecircVisibilityAction:{type:{name:"func"},required:!0,description:""},isBottomRecircVisible:{type:{name:"bool"},required:!0,description:""},adsEnabled:{type:{name:"bool"},required:!1,description:""},adConfig:{type:{name:"object"},required:!1,description:""},op:{type:{name:"string"},required:!1,description:""},title:{type:{name:"string"},required:!0,description:""},getRecirc:{type:{name:"func"},required:!0,description:""},postHash:{type:{name:"string"},required:!1,description:""},isInRecircExperimentWithTreatment:{type:{name:"bool"},required:!1,description:""},setPosts:{type:{name:"func"},required:!0,description:""}}};const H=(0,D.$j)((function(e){var t=e.posts,n=e.ui;return{posts:t.get("posts"),isBottomRecircVisible:n.gallery.get("isBottomRecircVisible"),title:(0,U.Z)("page404LabelPosts")}}),(function(e,t){return{setBottomRecircVisibilityAction:function(t){e((0,F.l5)(t))},setPosts:function(n){var r=t.adsEnabled,o=t.adConfig,i=[],a=(0,_.FD)(o);n.toArray().forEach((function(e){(r&&a||!e.get("isAd"))&&i.push(e.toJS())})),e((0,T.QG)(i))},getRecirc:function(){return C.createElement(w.zK,{navigationTrigger:"Recirc -",navigationDirection:"Post Footer",location:Z.qL,sendToTop:!0})}}}))(G);var W=n("ucDD"),j=n("tKQO"),z=n("sEfC"),Y=n.n(z);function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var $=function(e){u()(n,e);var t=K(n);function n(){return a()(this,n),t.apply(this,arguments)}return c()(n,[{key:"handleScroll",value:function(){(0,this.props.onScroll)((0,N.uI)("pageYOffset"),(0,N.uI)("innerHeight"))}},{key:"componentDidMount",value:function(){var e=this.props.debounceTimeout;this.handleScroll(),this.handleScroll=Y()(this.handleScroll.bind(this),e),(0,N._E)("scroll",this.handleScroll),(0,N._E)("resize",this.handleScroll)}},{key:"componentWillUnmount",value:function(){this.handleScroll.cancel(),(0,N.II)("scroll",this.handleScroll),(0,N.II)("resize",this.handleScroll)}},{key:"render",value:function(){return C.createElement("span",null)}}]),n}(C.Component);$.defaultProps={debounceTimeout:10},$.__docgenInfo={description:"",methods:[{name:"handleScroll",docblock:null,modifiers:[],params:[],returns:null}],displayName:"Scroll",props:{debounceTimeout:{defaultValue:{value:"10",computed:!1},type:{name:"number"},required:!1,description:""},onScroll:{type:{name:"func"},required:!0,description:""}}};var J=n("t9wu"),X=n("dONk"),Q=n("JMKP"),ee=n("pq3F");function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var ne=function(e){u()(n,e);var t=te(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(m()(r),"lazyLoadHandler",Y()((function(){var e=r.props.lazyLoadBuffer;(0,ee.PZ)(r.lazyLoadContainer.current,e)&&(r.setState({lazyLoadedIntoView:!0}),(0,N.KZ)("scroll",r.lazyLoadHandler),(0,N.KZ)("resize",r.lazyLoadHandler))}),200)),r.lazyLoadContainer=C.createRef(),r.state={lazyLoadedIntoView:!1},r}return c()(n,[{key:"componentDidMount",value:function(){(0,N.kZ)("scroll",this.lazyLoadHandler),(0,N.kZ)("resize",this.lazyLoadHandler),this.lazyLoadHandler()}},{key:"componentWillUnmount",value:function(){(0,N.KZ)("scroll",this.lazyLoadHandler),(0,N.KZ)("resize",this.lazyLoadHandler)}},{key:"render",value:function(){var e=this.props.children,t=this.state.lazyLoadedIntoView;return C.createElement("div",{ref:this.lazyLoadContainer},t?e():"")}}]),n}(C.Component);ne.__docgenInfo={description:"",methods:[],displayName:"LazyLoad",props:{children:{type:{name:"func"},required:!0,description:""},lazyLoadBuffer:{type:{name:"number"},required:!0,description:""}}};var re=n("x2zi"),oe=n("r9od"),ie=n("9Cp0"),ae=n("0yzV"),se=n("CvWe");function ce(e){var t=e.children,n=e.experimentTrigger,r=e.experimentName;return(0,C.useEffect)((function(){return n(r),function(){}}),[]),null!=t?t:null}ce.propTypes={experimentName:E().string,experimentTrigger:E().func,children:E().node};const le=(0,D.$j)(null,{experimentTrigger:se.UG})(ce);var me=n("pPb0"),de=n("kWpY"),ue=n("oIX6");var pe=n("d/qw"),fe=n("ZK3p"),ge=n("AYOl"),ye=n("tbwY");function he(e){var t,n,r=e.post,o=r&&r.get("inGallery")?"follow, index":"none",i=(0,ye.h)(r);return C.createElement(ge.Z,null,C.createElement("title",null,(0,ye.k)(function(e){if(r){var t=e.get("title"),n=e.get("media"),o=n.first();if(o&&(o.get("animationType")||o.get("isVideo")))return n.size>1?(0,U.Z)("galleryMetaTitleGifs",t):(0,U.Z)("galleryMetaTitleGif",t);var i=e.get("tags");return i.size?(0,U.Z)("galleryMetaTitleTag",t,i.first().get("display",i.first().get("tag"))):t}return(0,U.Z)("defaultTitle")}(r))),C.createElement("meta",{name:"description",content:i}),C.createElement("meta",{property:"og:description",content:i}),C.createElement("meta",{name:"twitter:description",content:i}),C.createElement("link",{rel:"canonical",href:(t=r,n=ue.FH,r?(t.get("inGallery")?n+="/gallery/".concat(t.get("id")):t.get("isAlbum")?n+="/a/".concat(t.get("id")):n+="/".concat(t.get("id")),n):n)}),C.createElement("meta",{name:"robots",content:o}))}he.__docgenInfo={description:"",methods:[],displayName:"GalleryMeta",props:{post:{type:{name:"object"},required:!1,description:""}}};var ve=n("TSYQ"),Ce=n.n(ve),be=n("nUZK"),Ee=n("Amru"),Pe=n("e2tm"),ke=n("/9Cr");function Ie(e){var t=e.isAnnouncement,n=Ce()({"promoted-label":!0,"announcement-label":t,"promoted-hover":!t});return C.createElement("div",{className:n,onClick:!t&&function(e){e.preventDefault(),(0,N.gB)(Z.tT)},title:(0,U.Z)("promotedLabelTitle",t)},(0,U.Z)("promotedText",t))}Ie.defatulProps={isAnnouncement:!1},Ie.__docgenInfo={description:"",methods:[],displayName:"PromotedLabel",props:{isAnnouncement:{type:{name:"bool"},required:!1,description:""}}};var Ne=n("ANjH"),qe=n("Txp7"),Se=n("VGss"),Ae=n("QILm"),Re=n.n(Ae),De=n("HMNm"),we=n("Qii0");function Te(e){var t=e.recircSortType,n=e.postId,r=e.match,i=e.children,a=(e.dispatch,e.staticContext,Re()(e,["recircSortType","postId","match","children","dispatch","staticContext"])),s=r.params,c=(0,we.JT)(t,s);return C.createElement(De.Z,o()({to:"".concat(c).concat(n)},a),i)}Te.__docgenInfo={description:"",methods:[],displayName:"PostLink",props:{match:{type:{name:"object"},required:!0,description:""},children:{type:{name:"union",value:[{name:"arrayOf",value:{name:"node"}},{name:"node"}]},required:!0,description:""},recircSortType:{type:{name:"string"},required:!1,description:""},postId:{type:{name:"string"},required:!0,description:""},dispatch:{type:{name:"func"},required:!0,description:""},staticContext:{type:{name:"object"},required:!1,description:""},style:{type:{name:"object"},required:!1,description:""}}};const Me=(0,Ne.qC)((0,D.$j)((function(e){return{recircSortType:e.postsData.get("recircSortType")}})),P.Z)(Te);function xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var Ze=function(e){u()(n,e);var t=xe(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(m()(r),"clickNext",(function(){var e=r.props,t=e.toNext,n=e.match.params;t(A.RR.BUTTON,n)})),v()(m()(r),"clickPrev",(function(){var e=r.props,t=e.toPrev,n=e.match.params;t(A.RR.BUTTON,n)})),r.elm=C.createRef(),r}return c()(n,[{key:"setElementPosition",value:function(){var e=this.props,t=e.setPosition,n=e.header,r=parseInt(this.elm.getBoundingClientRect().bottom,10)+(0,N.X_)();n&&t(r)}},{key:"componentDidMount",value:function(){this.setElementPosition()}},{key:"componentDidUpdate",value:function(){this.setElementPosition()}},{key:"render",value:function(){var e=this,t=this.props,n=t.prevPost,r=t.nextPost,o=t.transformationStyle,i=t.transformationNextStyle,a=Ce()({"Navigation-Container":!0,"first-item":!n,"last-item":!r});return C.createElement("div",{ref:function(t){e.elm=t}},(n||r)&&C.createElement("div",{className:a},n&&C.createElement(Me,{className:"Navigation Navigation-prev",postId:n.get("id"),onClick:this.clickPrev},C.createElement("div",{className:"content"},C.createElement(Se.ZP,{name:Se.w8,width:"16",height:"16",alt:"<"}))),r&&C.createElement(Me,{className:"Navigation Navigation-next",postId:r.get("id"),onClick:this.clickNext,style:o},C.createElement("div",{className:"content"},C.createElement("span",{style:i},(0,U.Z)("nextPost")),C.createElement(Se.ZP,{name:Se.MO,width:"16",height:"16",alt:">"})))))}}]),n}(C.Component);Ze.defaultProps={header:!1},Ze.__docgenInfo={description:"",methods:[{name:"setElementPosition",docblock:null,modifiers:[],params:[],returns:null},{name:"clickNext",docblock:null,modifiers:[],params:[],returns:null},{name:"clickPrev",docblock:null,modifiers:[],params:[],returns:null}],displayName:"PrevNextButtonsComponent",props:{header:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},prevPost:{type:{name:"object"},required:!1,description:""},nextPost:{type:{name:"object"},required:!1,description:""},toNext:{type:{name:"func"},required:!0,description:""},toPrev:{type:{name:"func"},required:!0,description:""},match:{type:{name:"object"},required:!0,description:""},transformationStyle:{type:{name:"object"},required:!1,description:""},transformationNextStyle:{type:{name:"object"},required:!1,description:""},setPosition:{type:{name:"func"},required:!0,description:""},coverHeight:{type:{name:"number"},required:!0,description:""}}};const Oe=(0,Ne.qC)((0,D.$j)((function(e){var t=e.postsData,n=e.ad,r=e.ui,o={},i={};return n.getIn(["transformation","enabled"])&&(o={background:"rgb(".concat(n.getIn(["transformation","secondaryColor"]),")"),fontFamily:n.getIn(["transformation","fontFamily"]),fontSize:n.getIn(["transformation","nextFontSize"])},i={verticalAlign:n.getIn(["transformation","nextAlignment"])}),{prevPost:t.get("prevPost"),nextPost:t.get("nextPost"),coverHeight:r.cover.get("height"),transformationStyle:o,transformationNextStyle:i}}),{toNext:qe.RU,toPrev:qe.CQ,setPosition:qe.mQ}),P.Z)(Ze);var Ue=function(e){var t=e.className,n=e.navigate,r=e.href,i=e.children,a=e.onClick,s=Re()(e,["className","navigate","href","children","onClick"]),c=Ce()("AuthorLink-button",t);return C.createElement("button",o()({type:"button",className:c,onClick:function(){a(),n(r)}},s),i)};function Le(e){var t=e.className,n=e.username,r=e.label,o=e.useButton,i=e.children,a=e.onClick;n.toLowerCase()===ue.uZ&&(n=ue.mc);var s=r||n;return"function"==typeof i?s=i(s):i&&(s=i),C.createElement(De.Z,{className:t,to:"/user/".concat(n),title:(0,U.Z)("usernameHint",n),onClick:a,component:o?Ue:void 0},s)}function Fe(e){var t=e.postTitle,n=e.postAuthor,r=e.className,o=e.isPostLoading,i=e.onProfileClick,a=e.transformationTitleStyle,s=e.isAnnouncement,c=e.isAd;return C.createElement("div",{className:Ce()(v()({CoverPostMeta:!0},r,r))},C.createElement("div",{className:"Wrapper"},C.createElement("div",{className:"Meta".concat(o?" fadeOut":"")},C.createElement("div",{className:"PostTitle",style:a},t),c&&C.createElement(Ie,{isAnnouncement:s}),n&&C.createElement(Le,{className:"author-name",username:n,onClick:function(){return i(n,"Username Byline")},useButton:!0},(function(e){return C.createElement(C.Fragment,null,C.createElement("span",{className:"normal"},(0,U.Z)("postByLine")," "),e)}))),C.createElement("div",{className:"Navigation-buttons"},C.createElement(Oe,null))))}Le.defaultProps={useButton:!1},Le.__docgenInfo={description:"",methods:[],displayName:"AuthorLinkComponent",props:{useButton:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},className:{type:{name:"string"},required:!1,description:""},username:{type:{name:"string"},required:!0,description:""},label:{type:{name:"string"},required:!1,description:""},children:{type:{name:"union",value:[{name:"func"},{name:"instanceOf",value:"Object"}]},required:!1,description:""},onClick:{type:{name:"func"},required:!1,description:""}}};Fe.__docgenInfo={description:"",methods:[],displayName:"CoverPostMetaComponent",props:{className:{type:{name:"string"},required:!1,description:""},postTitle:{type:{name:"string"},required:!1,description:""},postAuthor:{type:{name:"string"},required:!1,description:""},isPostLoading:{type:{name:"bool"},required:!1,description:""},onProfileClick:{type:{name:"func"},required:!0,description:""},transformationTitleStyle:{type:{name:"object"},required:!0,description:""},isAd:{type:{name:"bool"},required:!1,description:""},isAnnouncement:{type:{name:"bool"},required:!1,description:""}}};const _e=(0,D.$j)((function(e){var t=e.postsData,n=e.ad,r=t.get("currentPost"),o={};return n.getIn(["transformation","enabled"])&&(o={fontFamily:n.getIn(["transformation","fontFamily"]),fontSize:n.getIn(["transformation","stickyTitleFontSize"])}),{postTitle:r&&r.get("title"),postAuthor:r&&r.get("inGallery")&&r.getIn(["account","username"],""),transformationTitleStyle:o}}),{onProfileClick:ke._K})(Fe);function Be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var Ge=function(e){u()(n,e);var t=Be(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(m()(r),"onScroll",(function(){var e=r.props,t=e.prevNextPosition,n=e.coverTop,o=(0,N.X_)()+Math.abs(n)>=t;o!==r.state.isDisplayPostMeta&&r.setState({isDisplayPostMeta:o})})),r.state={isDisplayPostMeta:!1},r}return c()(n,[{key:"componentDidUpdate",value:function(e){e.prevNextPosition!==this.props.prevNextPosition&&this.onScroll()}},{key:"render",value:function(){var e=this.props,t=e.isPostLoading,n=e.isPostAd,r=e.isAnnouncement,o=Ce()({GalleryCover:!0,withPostMeta:this.state.isDisplayPostMeta});return C.createElement(be.o,{minHeight:0,className:o,backgroundType:S.Ur,hideNewPostNotification:!0,SCTU:n?void 0:Ee.Z,SCTUPath:Z.Kn,SCTUReservePath:Z.lf,SCTUTargeting:{"2019NewPostPage":!0},onScroll:this.onScroll,Banner:Pe.Z},C.createElement(_e,{className:this.state.isDisplayPostMeta?"Display":"",isAd:n,isAnnouncement:r,isPostLoading:t}))}}]),n}(C.Component);Ge.__docgenInfo={description:"",methods:[{name:"onScroll",docblock:null,modifiers:[],params:[],returns:null}],displayName:"GalleryCoverComponent",props:{prevNextPosition:{type:{name:"number"},required:!0,description:""},isPostLoading:{type:{name:"bool"},required:!1,description:""},isPostAd:{type:{name:"bool"},required:!1,description:""},coverTop:{type:{name:"number"},required:!1,description:""},positionY:{type:{name:"number"},required:!1,description:""},isAnnouncement:{type:{name:"bool"},required:!1,description:""}}};const Ve=(0,D.$j)((function(e){var t=e.postsData,n=e.ui;return{prevNextPosition:t.get("prevNextPosition"),isPostLoading:n.spinner.get("retrievePost",{}).loading,isPostAd:t.getIn(["currentPost","isAd"],!1),isAnnouncement:t.getIn(["currentPost","isAnnouncement"],!1),coverTop:n.cover.getIn(["navbar","top"])}}))(Ge);var He=n("BrA2"),We=n("4ELA"),je=n("5bgp"),ze=n("mOu4");function Ye(e){var t=e.closeDialog,n=e.muteUser,r=e.resetMuteUserData,o=e.username,i=e.type,a=e.id;if(!(o&&i&&a))return null;var s=function(){r(),t()};return C.createElement(We.U,{className:"MuteUserDialog",name:He.pN,isModal:!1,onClose:r},C.createElement("div",{className:"MuteUserDialog-head"},C.createElement("span",null,(0,U.Z)("muteUserDialogTitle")),C.createElement(je.zx,{className:"MuteUserDialog-head--close",imageSrc:ze.UZ[ze.oV],onClick:s})),C.createElement("div",{className:"MuteUserDialog-content"},C.createElement("div",{className:"MuteUserDialog-content--text"},(0,U.Z)("muteUserDialogText")),C.createElement("div",{className:"MuteUserDialog-content--buttons"},C.createElement(je.zx,{className:"MuteUserDialog-content--mute",onClick:function(){n(o,i,a),t()},label:(0,U.Z)("muteUserDialogMuteBtn")}),C.createElement(je.zx,{className:"MuteUserDialog-content--cancel",onClick:s,label:(0,U.Z)("muteUserDialogCancelBtn")}))))}Ye.__docgenInfo={description:"",methods:[],displayName:"MuteUserDialog",props:{closeDialog:{type:{name:"func"},required:!0,description:""},muteUser:{type:{name:"func"},required:!0,description:""},resetMuteUserData:{type:{name:"func"},required:!0,description:""},username:{type:{name:"string"},required:!1,description:""},type:{type:{name:"string"},required:!1,description:""},id:{type:{name:"union",value:[{name:"number"},{name:"string"}]},required:!1,description:""}}};const Ke=(0,D.$j)((function(e){var t=e.user;return{username:t.getIn(["muteUserData","username"]),type:t.getIn(["muteUserData","type"]),id:t.getIn(["muteUserData","id"])}}),{closeDialog:F.gk,muteUser:ke.W3,resetMuteUserData:ke.n8})(Ye);var $e=n("iY/4"),Je=n("DHkX"),Xe=n("qIoc"),Qe=n("YwzB"),et=n("VDU/"),tt=n("K1+V");function nt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var rt=function(e){u()(n,e);var t=nt(n);function n(e){var r;return a()(this,n),(r=t.call(this,e)).state={countdown:null},r}return c()(n,[{key:"tick",value:function(){var e=this.props.target;e&&this.setState({countdown:(0,tt.SV)(e)})}},{key:"componentDidMount",value:function(){var e=this;this.tick();var t=this.props.target;!this.timerID&&t&&(this.timerID=(0,N.Zi)((function(){return e.tick()}),1e3))}},{key:"componentWillUnmount",value:function(){(0,N.cv)(this.timerID),this.timerID=null}},{key:"render",value:function(){var e=this.state.countdown,t=this.props.className;return C.createElement("div",{className:t},e)}}]),n}(C.Component);rt.__docgenInfo={description:"",methods:[{name:"tick",docblock:null,modifiers:[],params:[],returns:null}],displayName:"Countdown",props:{target:{type:{name:"string"},required:!0,description:""},className:{type:{name:"string"},required:!1,description:""}}};var ot=n("RIqP"),it=n.n(ot);function at(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var st=function(e){u()(n,e);var t=at(n);function n(){return a()(this,n),t.apply(this,arguments)}return c()(n,[{key:"renderInventory",value:function(e,t){var n=t?"active":"dimmed";return C.createElement("div",{className:"AccoladeDialog-inventory--".concat(n),key:e},C.createElement(Se.ZP,{name:Se.xe,width:"18",height:"20",viewBox:"0 -9 32 32"}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.total,r=t.remaining;return n&&0!==r?C.createElement("div",{className:"AccoladeDialog-inventory"},C.createElement("div",{className:"AccoladeDialog-inventory-badges"},it()(Array(n)).map((function(t,n){return e.renderInventory(n,n+1<=r)}))),C.createElement("div",{className:"AccoladeDialog-inventory-message"},(0,Je.Z)("accoladesInventoryRemaining",r))):null}}]),n}(C.Component);st.__docgenInfo={description:"",methods:[{name:"renderInventory",docblock:null,modifiers:[],params:[{name:"key",type:null},{name:"isActive",type:null}],returns:null}],displayName:"Inventory",props:{total:{type:{name:"number"},required:!1,description:""},remaining:{type:{name:"number"},required:!1,description:""}}};var ct=n("hegW");function lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var mt=n("QlXF");const dt=(0,D.$j)((function(e){var t=e.postsData,n=e.user,r=t.getIn(["currentPostMeta","user","accolades"]),o=t.getIn(["currentPostMeta","post","accolades_counts"]);return{isSubscribed:n.getIn(["subscription","isSubscribed"],!1),postId:t.getIn(["currentPost","id"]),initialVote:t.getIn(["currentPost","vote"],Qe.gZ),accolades:t.getIn(["currentPostMeta","accolades","available"]),total:r&&r.getIn(["total"],0),remaining:r&&r.getIn(["remaining"]),timerReset:r&&r.getIn(["timer_reset"]),userAccoladeId:r&&r.getIn(["accolade_id"]),postAccolades:o?o.toJS():{},isOwner:n.get("username")===t.getIn(["currentPost","account","username"],"").toLowerCase(),currentUsername:n.get("username","")}}),(function(e){return{close:function(){e((0,F.gk)(Xe.R))},submit:function(t){e((0,qe.Gi)(t)),e((0,F.gk)(Xe.R)),t.vote===Qe.UP?e(t.userAccoladeId?(0,mt.fA)(t):(0,mt.bi)(t)):e((0,mt.rT)(t))},onAccoladeDialogOpen:function(t){return e((0,qe.Eb)(t))}}}))(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(n){u()(i,n);var r=lt(i);function i(e){var t;return a()(this,i),t=r.call(this,e),v()(m()(t),"chooseAccolade",(function(e,n,r){0===n&&e&&!r||t.setState({currentSelectedAccoladeId:e})})),v()(m()(t),"handleAward",(function(){var e=t.props,n=e.submit,r=e.postId,o=e.initialVote,i=e.postAccolades,a=e.accolades,s=e.userAccoladeId,c=t.state.currentSelectedAccoladeId;n({postId:r,vote:Qe.UP,initialVote:o,trigger:"Award Accolade",accoladeId:c,userAccoladeId:s,accoladeName:a.find((function(e){return e.get("id")===c})).get("name"),accoladeCount:(0,et.aq)(i)+1,previousAccoladeName:s?a.find((function(e){return e.get("id")===s})).get("name"):null})})),v()(m()(t),"handleRemove",(function(){var e=t.props,n=e.submit,r=e.postId,o=e.initialVote,i=e.userAccoladeId;n({postId:r,vote:Qe.gZ,initialVote:o,trigger:"Delete Accolade",userAccoladeId:i})})),v()(m()(t),"getCount",(function(e){var n=t.props,r=n.postAccolades,o=n.userAccoladeId,i=r&&r[e]?r[e]:0;return i?(e===o&&--i,i):0})),v()(m()(t),"isAccoladeButtonEnabled",(function(){var e=t.props,n=e.userAccoladeId,r=e.remaining,o=t.state.currentSelectedAccoladeId;return null!==o&&(!(0===r&&!n)&&(!n||o!==n))})),v()(m()(t),"onOpen",(function(){var e=t.props,n=e.onAccoladeDialogOpen,r=e.isOwner,o=e.postAccolades;n({accoladeIds:r&&o&&Object.keys(o).length>0?Object.keys(o):null}),t.chooseAccolade(null)})),t.state={currentSelectedAccoladeId:null},t}return c()(i,[{key:"accoladeData",value:function(e,t){var n=this,r=this.state.currentSelectedAccoladeId,o=this.props,i=o.userAccoladeId,a=o.currentUsername,s=o.remaining,c=e.get("id");return C.createElement("div",{key:t,onClick:function(){return n.chooseAccolade(e.get("id"),s,i)}},C.createElement(ct.Z,{count:this.getCount(c),username:c===i?a:"",background:c===r,imageUrl:e.get("image_url"),imageName:e.get("name")}))}},{key:"renderAccolades",value:function(){var e=this,t=this.props.accolades;if(t)return C.createElement("div",{className:"AccoladeDialog-accoladesContainer"},t.map((function(t,n){return e.accoladeData(t,n)})))}},{key:"renderDialogTitle",value:function(){var e=this.props,t=e.isSubscribed,n=e.userAccoladeId,r=e.isOwner,o=e.postAccolades,i=e.remaining,a=e.timerReset;if(r){var s=(0,et.aq)(o);return(0,Je.Z)(s?"accoladePostHasAccoladesTitle":"accoladePostNotHasAccoladesTitle",(0,et.$N)(s))}return t?0===i?C.createElement(C.Fragment,null,C.createElement(rt,{target:a,className:"AccoladeDialog-countdown"}),(0,Je.Z)("accoladesInventoryReload")):(0,Je.Z)(n?"accoladeGivenTitle":"accoladeGiveTitle"):(0,Je.Z)("accoladeJoinTitle")}},{key:"renderDialogButton",value:function(){var e=this.props,t=e.isSubscribed,n=e.userAccoladeId,r=e.remaining;if(!t)return C.createElement("a",{className:"AccoladeDialog-link",href:"/".concat(W.EL,"?source=").concat(Xe.q9)},(0,Je.Z)("accoladeJoinEmerald"));if(0===r&&!n)return"";var o=this.isAccoladeButtonEnabled();return C.createElement("button",{disabled:!o,type:"button",className:"AccoladeDialog-button-".concat(o?"-active":"-hidden"),onClick:this.handleAward},n?(0,Je.Z)("accoladeChange"):(0,Je.Z)("accoladeAward"))}},{key:"render",value:function(){var n=this.props,r=n.isSubscribed,i=n.total,a=n.remaining,s=n.userAccoladeId,c=n.isOwner,l=n.close;return C.createElement(e,o()({className:"AccoladeDialog",isModal:!1,onClose:l,name:Xe.R,onOpen:this.onOpen},t),C.createElement("div",{className:"AccoladeDialog-head"},r&&!c&&0!==a&&C.createElement(st,{total:i,remaining:a}),C.createElement(je.ZP,{className:"AccoladeDialog-head--close",image:C.createElement(Se.ZP,{name:Se.dq,width:"24",height:"24"}),onClick:l})),C.createElement("div",{className:"AccoladeDialog-content"},C.createElement("div",{className:"AccoladeDialog-content-title"},this.renderDialogTitle()),this.renderAccolades()),C.createElement("div",{className:"AccoladeDialog-footer"},C.createElement("a",{className:"AccoladeDialog-LearnMore",href:Xe.ZV,target:"_blank",rel:"noopener noreferrer"},C.createElement(Se.ZP,{height:"24",name:Se.G_,width:"24"})),!c&&C.createElement("div",{className:"AccoladeDialog-footer-actions"},s&&C.createElement("div",{className:"AccoladeDialog-button--remove",onClick:this.handleRemove},(0,Je.Z)("accoladeRemove")),this.renderDialogButton())))}}]),i}(C.Component);return n.defaultProps={onAccoladeDialogOpen:function(){}},n}(We.U));var ut=n("+Jo0"),pt=n("ii6B");function ft(e){var t=e.closeDialog,n=e.deleteComment,r=e.resetDeleteCommentData,o=e.commentId;if(!o||!n)return null;var i=function(){r(),t()};return C.createElement(We.U,{className:"DeleteCommentDialog",name:ut.JF,isModal:!1,onClose:r},C.createElement("div",{className:"DeleteCommentDialog-head"},C.createElement("span",null,(0,U.Z)("DeleteCommentDialogTitle")),C.createElement(je.zx,{className:"DeleteCommentDialog-head--close",imageSrc:ze.UZ[ze.oV],onClick:i})),C.createElement("div",{className:"DeleteCommentDialog-content"},C.createElement("div",{className:"DeleteCommentDialog-content--text"},(0,U.Z)("DeleteCommentDialogText")),C.createElement("div",{className:"DeleteCommentDialog-content--buttons"},C.createElement(je.zx,{className:"DeleteCommentDialog-content--cancel",onClick:i,label:(0,U.Z)("DeleteCommentDialogKeepBtn")}),C.createElement(je.zx,{className:"DeleteCommentDialog-content--delete",onClick:function(){n(o),t()},label:(0,U.Z)("DeleteCommentDialogDeleteBtn")}))))}ft.__docgenInfo={description:"",methods:[],displayName:"DeleteCommentDialog",props:{closeDialog:{type:{name:"func"},required:!0,description:""},deleteComment:{type:{name:"func"},required:!0,description:""},resetDeleteCommentData:{type:{name:"func"},required:!0,description:""},commentId:{type:{name:"number"},required:!0,description:""}}};const gt=(0,D.$j)((function(e){return{commentId:e.comments.get("commentToDeleteId")}}),{closeDialog:F.gk,deleteComment:pt.YF,resetDeleteCommentData:pt.zW})(ft);var yt=n("kzpL"),ht=n("KMJ1");function vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}function Ct(){return C.createElement("svg",{style:{position:"absolute"},width:"0",height:"0",fill:"none",xmlns:"http://www.w3.org/2000/svg"},C.createElement("defs",null,C.createElement("path",{id:"folder-path0",fillRule:"evenodd",clipRule:"evenodd",d:"M49.5016 28.901C50.277 21.4876 50.2816 15.783 49.5151 8.38824C49.3029 6.34142 47.5376 4.81321 45.4651 4.81322L26.9653 4.81325L24.2944 2.17465C23.7942 1.68042 23.1282 1.36611 22.406 1.3012C18.3753 0.938945 13.6547 0.903928 9.49736 1.19359C7.49418 1.33316 5.94918 2.89066 5.77795 4.79585C4.96489 13.8429 4.9636 19.7981 5.77425 28.8361C5.94902 30.7846 7.54505 32.3306 9.55171 32.4588C20.8619 33.1811 34.4288 33.1804 45.7348 32.4567C47.7079 32.3304 49.2999 30.8296 49.5016 28.901Z",fill:"#43D0BD"}),C.createElement("path",{id:"folder-path1",fillRule:"evenodd",clipRule:"evenodd",d:"M49.5016 28.901C50.277 21.4876 50.2816 15.783 49.5151 8.38824C49.3029 6.34142 47.5376 4.81321 45.4651 4.81322L26.9653 4.81325L24.2944 2.17465C23.7942 1.68042 23.1282 1.36611 22.406 1.3012C18.3753 0.938945 13.6547 0.903928 9.49736 1.19359C7.49418 1.33316 5.94918 2.89066 5.77795 4.79585C4.96489 13.8429 4.9636 19.7981 5.77425 28.8361C5.94902 30.7846 7.54505 32.3306 9.55171 32.4588C20.8619 33.1811 34.4288 33.1804 45.7348 32.4567C47.7079 32.3304 49.2999 30.8296 49.5016 28.901Z"}),C.createElement("path",{id:"folder-lock-path",fillRule:"evenodd",clipRule:"evenodd",d:"M27 11.0375C24.7909 11.0375 23 12.8954 23 15.1872V16.4018C21.8348 16.829 21 17.9819 21 19.337V22.4493C21 24.1682 22.3431 25.5617 24 25.5617H30C31.6569 25.5617 33 24.1682 33 22.4493V19.337C33 17.9819 32.1652 16.829 31 16.4018V15.1872C31 12.8954 29.2091 11.0375 27 11.0375ZM29 16.2247V15.1872C29 14.0413 28.1046 13.1124 27 13.1124C25.8954 13.1124 25 14.0413 25 15.1872V16.2247H29ZM24 18.2996C23.4477 18.2996 23 18.764 23 19.337V22.4493C23 23.0223 23.4477 23.4868 24 23.4868H30C30.5523 23.4868 31 23.0223 31 22.4493V19.337C31 18.764 30.5523 18.2996 30 18.2996H24Z",fill:"white"}),C.createElement("filter",{id:"filter0_d",x:"0.167206",y:"0",width:"54.9194",height:"42",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},C.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),C.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),C.createElement("feOffset",{dy:"4"}),C.createElement("feGaussianBlur",{stdDeviation:"2.5"}),C.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.24 0"}),C.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow"}),C.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"}))))}function bt(e){var t=e.id,n=e.coverHash,r=e.isPrivate;return C.createElement("svg",{width:"45",height:"32",viewBox:"5 1 45 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},C.createElement("g",{filter:"url(#filter0_d)"},C.createElement("use",{xlinkHref:"#folder-path0"}),n&&!r&&C.createElement("use",{xlinkHref:"#folder-path1",fill:"url(#pattern".concat(t,")")})),r&&C.createElement("use",{xlinkHref:"#folder-lock-path"}),C.createElement("defs",null,C.createElement("pattern",{id:"pattern".concat(t),patternContentUnits:"objectBoundingBox",width:"1",height:"1"},C.createElement("use",{xlinkHref:"#image".concat(t),transform:""})),C.createElement("image",{id:"image".concat(t),width:"1",height:"1",xlinkHref:n&&"".concat(ue.LS,"/").concat(n,"s.png")})))}function Et(e){var t=e.id,n=void 0===t?yt.BZ:t,r=e.coverHash,o=e.name,i=e.isPrivate,a=e.isSelected;return C.createElement("div",{className:"FavoriteDialog-Folder"},C.createElement("div",{className:"FavoriteDialog-FolderIcon"},C.createElement(bt,{coverHash:r,id:n,isPrivate:i})),C.createElement("div",{className:"FavoriteDialog-FolderLabel".concat(a?" selected":"")},o),C.createElement("div",{className:"FavoriteDialog-FolderSelected"},a&&C.createElement(Se.ZP,{name:Se.S,width:"16",height:"16"})))}var Pt=function(e){u()(n,e);var t=vt(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(m()(r),"handleClose",(function(){var e=r.props.closeDialogAction;r.onClose(),e()})),v()(m()(r),"onClose",(function(){var e=r.props.resetFavoriteDataAction,t=r.state.selected;(0,N.gr)(r.closeTimeOut),e(),t!==yt.BZ&&r.setState({selected:yt.BZ}),(0,N.KZ)("scroll",r.handleClose)})),v()(m()(r),"handleSelectFolder",(function(e){var t=r.props,n=t.addFavoritesToFolderAction,o=t.postId,i=t.isAlbum;n({id:e,faves:["".concat(i?"album":"image","/").concat(o)],disableMessage:!0}),r.setState({selected:e}),(0,N.iK)(r.handleClose,500)})),v()(m()(r),"onOpen",(function(){(0,r.props.fetchFoldersAction)(),r.closeTimeOut=(0,N.iK)(r.handleClose,1e4),(0,N.kZ)("scroll",r.handleClose)})),v()(m()(r),"onMouseEnter",(function(){(0,N.gr)(r.closeTimeOut),(0,N.KZ)("scroll",r.handleClose)})),v()(m()(r),"onMouseLeave",(function(){(0,N.kZ)("scroll",r.handleClose)})),r.closeTimeOut=null,r.state={selected:yt.BZ},r}return c()(n,[{key:"componentWillUnmount",value:function(){this.onClose()}},{key:"render",value:function(){var e=this,t=this.props,n=t.folders,r=t.postId,i=t.coverHeight,a=t.coverTop,s=t.isCoverFixed,c=this.state.selected;if(!r)return null;var l={top:s?81:i-136+81+a};return C.createElement(We.U,{className:"FavoritesFoldersDialog",overlayOpacity:0,name:j.mE,isModal:!1,onClose:this.onClose,onOpen:this.onOpen,styles:l},C.createElement("div",{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},C.createElement("div",{className:"FavoritesFoldersDialog-head"},C.createElement("span",null,(0,U.Z)("FavoritesFoldersDialogTitle")),C.createElement(je.zx,{className:"FavoritesFoldersDialog-head--close",imageSrc:ze.UZ[ze.oV],onClick:this.handleClose})),C.createElement("div",{className:"FavoritesFoldersDialog-content"},C.createElement(Ct,null),C.createElement("div",{className:"fadeOut fadeOut-top"}),C.createElement("div",{className:"FavoritesFoldersDialog-content--list Scrollbar--gray"},n.map((function(t){return C.createElement("button",{onClick:function(){return e.handleSelectFolder(t.id||yt.BZ)},type:"submit",key:t.id||yt.BZ},C.createElement(Et,o()({},t,{isSelected:c===t.id})))}))),C.createElement("div",{className:"fadeOut fadeOut-bottom"}))))}}]),n}(C.Component);Pt.__docgenInfo={description:"",methods:[{name:"handleClose",docblock:null,modifiers:[],params:[],returns:null},{name:"onClose",docblock:null,modifiers:[],params:[],returns:null},{name:"handleSelectFolder",docblock:null,modifiers:[],params:[{name:"id",type:null}],returns:null},{name:"onOpen",docblock:null,modifiers:[],params:[],returns:null},{name:"onMouseEnter",docblock:null,modifiers:[],params:[],returns:null},{name:"onMouseLeave",docblock:null,modifiers:[],params:[],returns:null}],displayName:"FavoritesFoldersDialog",props:{fetchFoldersAction:{type:{name:"func"},required:!0,description:""},closeDialogAction:{type:{name:"func"},required:!0,description:""},resetFavoriteDataAction:{type:{name:"func"},required:!0,description:""},addFavoritesToFolderAction:{type:{name:"func"},required:!0,description:""},folders:{type:{name:"array"},required:!1,description:""},postId:{type:{name:"string"},required:!1,description:""},isAlbum:{type:{name:"bool"},required:!1,description:""},isCoverFixed:{type:{name:"bool"},required:!1,description:""},coverHeight:{type:{name:"number"},required:!1,description:""},coverTop:{type:{name:"number"},required:!1,description:""}}};const kt=(0,D.$j)((function(e){var t=e.favorites,n=e.postsData,r=e.ui;return{folders:t.get("folders").toList().toJS(),postId:n.getIn(["favoriteData","postId"]),isAlbum:n.getIn(["favoriteData","isAlbum"]),coverHeight:r.cover.get("height"),coverTop:r.cover.get("top"),isCoverFixed:r.cover.get("fixed")}}),{fetchFoldersAction:ht.F5,closeDialogAction:F.gk,resetFavoriteDataAction:qe.sZ,addFavoritesToFolderAction:ht.Ib})(Pt);var It=n("aIiJ");function Nt(e){var t=e.points,n=e.ups,r=e.downs,o=66*Math.PI,i=n*o/(n+r);return C.createElement("div",{className:"ChartData"},C.createElement("div",{className:"Chart"},C.createElement("svg",{width:"192",height:"192",viewBox:"14 0 178 192",fill:"none",xmlns:"http://www.w3.org/2000/svg"},C.createElement("g",{filter:"url(#filter0_d)"},C.createElement("g",{filter:"url(#filter1_d)"},C.createElement("circle",{cx:"96",cy:"86",r:"65",fill:"#FE6065"})),C.createElement("circle",{r:"33",cx:"0",cy:"0",stroke:"#2FBE7C",strokeWidth:"97",strokeDasharray:"".concat(i," ").concat(o),transform:"rotate(-90) scale(1, -1) translate(-86, -96)"}),C.createElement("g",{filter:"url(#filter2_d)"},C.createElement("circle",{cx:"96",cy:"86",r:"50",fill:"#3C424B"})),C.createElement("text",{x:"96",y:"82",textAnchor:"middle",className:"points"},(0,et.$N)(t)),C.createElement("text",{x:"96",y:"100",textAnchor:"middle",className:"pointsLabel"},(0,U.Z)("statisticsDialogPoints"))),C.createElement("defs",null,C.createElement("filter",{id:"filter0_d",x:"0",y:"0",width:"192",height:"192",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},C.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),C.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),C.createElement("feOffset",{dy:"10"}),C.createElement("feGaussianBlur",{stdDeviation:"7"}),C.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),C.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow"}),C.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"})),C.createElement("filter",{id:"filter1_d",x:"17",y:"17",width:"158",height:"158",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},C.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),C.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),C.createElement("feOffset",{dy:"10"}),C.createElement("feGaussianBlur",{stdDeviation:"7"}),C.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),C.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow"}),C.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"})),C.createElement("filter",{id:"filter2_d",x:"32",y:"24",width:"128",height:"128",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},C.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),C.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),C.createElement("feOffset",{dy:"2"}),C.createElement("feGaussianBlur",{stdDeviation:"7"}),C.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),C.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow"}),C.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"}))))),C.createElement("div",{className:"Votes"},C.createElement("div",{className:"ups"},C.createElement(It.NN,{isMini:!0,selected:!0})," ",(0,et.$N)(n)),C.createElement("div",{className:"downs"},C.createElement(It.AI,{isMini:!0,selected:!0})," ",(0,et.$N)(r))))}function qt(e){var t=e.title,n=e.createAd,r=new Date(n);return C.createElement("div",{className:"TitleDate"},C.createElement("div",{className:"Title"},t),C.createElement("div",{className:"Date"},(0,U.Z)("statisticsDialogUploaded")," ",(0,tt.VG)(r)))}function St(e){var t=e.views,n=e.comments,r=e.bandwidth,o=e.favorites,i=[{title:(0,U.Z)("statisticsDialogViews"),value:(0,et.$N)(t),icon:C.createElement(Se.ZP,{name:Se.yh,width:"16",height:"16"})},{title:(0,U.Z)("statisticsDialogBandwidth"),value:(0,et.gB)(r),icon:C.createElement(Se.ZP,{name:Se.b4,width:"16",height:"16"})},{title:(0,U.Z)("statisticsDialogComments"),value:(0,et.$N)(n),icon:C.createElement(Se.ZP,{name:Se.AY,width:"16",height:"16"})},{title:(0,U.Z)("statisticsDialogFavorites"),value:(0,et.$N)(o),icon:C.createElement(Se.ZP,{name:Se.XU,width:"16",height:"16"})}];return C.createElement("div",{className:"StatisticsData"},i.map((function(e,t){return C.createElement("div",{className:"item ".concat(t%2>0?"right":"left"," ").concat(t<2&&"top"),key:t},C.createElement("div",{className:"title-icon"},C.createElement("div",{className:"title"},e.title),C.createElement("div",{className:"icon"},e.icon)),C.createElement("div",{className:"value"},e.value))})))}function At(e){var t=e.closeDialog,n=e.meta,r=e.title,o=e.createdAtDate,i=e.coverImage,a=e.mediaSize;if(!n||!n.size)return null;var s={backgroundImage:"url(".concat(i,")")};return C.createElement(We.U,{className:"StatisticsDialog",name:j.EE,isModal:!1},C.createElement("div",{className:"StatisticsDialog-head"},C.createElement("span",null,(0,U.Z)("statisticsDialogTitle")),C.createElement(je.zx,{className:"StatisticsDialog-head--close",imageSrc:ze.UZ[ze.oV],onClick:function(){return t()}})),C.createElement("div",{className:"StatisticsDialog-content"},C.createElement("div",{className:"Background",style:s},C.createElement("div",{className:"Background-Overlay"})),C.createElement("div",{className:"StatisticsDialog-content-container"},C.createElement(qt,{createAd:o,title:r}),C.createElement(Nt,{points:n.get("point_count"),ups:n.get("upvote_count"),downs:n.get("downvote_count")}),C.createElement(St,{views:n.get("view_count"),comments:n.get("comment_count"),bandwidth:n.get("view_count")*a,favorites:n.get("favorite_count")}))))}Nt.__docgenInfo={description:"",methods:[],displayName:"Chart",props:{points:{type:{name:"number"},required:!0,description:""},ups:{type:{name:"number"},required:!0,description:""},downs:{type:{name:"number"},required:!0,description:""}}};At.__docgenInfo={description:"",methods:[],displayName:"StatisticsDialog",props:{closeDialog:{type:{name:"func"},required:!0,description:""},meta:{type:{name:"object"},required:!1,description:""},title:{type:{name:"string"},required:!1,description:""},createdAtDate:{type:{name:"string"},required:!1,description:""},coverImage:{type:{name:"string"},required:!1,description:""},mediaSize:{type:{name:"number"},required:!1,description:""}}};const Rt=(0,D.$j)((function(e){var t=e.postsData;return{meta:t.getIn(["currentPostMeta","post"]),title:t.getIn(["currentPost","title"]),createdAtDate:t.getIn(["currentPost","createdAt"]),coverImage:t.getIn(["currentPost","src","coverImage"]),mediaSize:t.getIn(["currentPost","media"],[]).reduce((function(e,t){return e+parseInt(t.get("size"),10)}),0)}}),{closeDialog:F.gk})(At);function Dt(e){var t=e.viewPortWidth,n=e.post;return(0,N.fL)()||t<768||n.get("isAd")?null:C.createElement("div",{className:"BottomAd-container"},C.createElement(fe.ZP,{elementID:"BottomAd",adUnitID:Z.wq}))}Dt.__docgenInfo={description:"",methods:[],displayName:"BottomAd",props:{post:{type:{name:"object"},required:!0,description:""},viewPortWidth:{type:{name:"number"},required:!0,description:""}}};const wt=(0,D.$j)((function(e){return{viewPortWidth:e.display.getIn(["viewPort","width"])}}))(Dt);var Tt=n("Kaud"),Mt=n("Ggsu"),xt=n("c08G"),Zt=n("J4zp"),Ot=n.n(Zt),Ut=n("mxGq"),Lt=n("3dMY"),Ft=n("wxt4"),_t=n("zdjE"),Bt=n("8GRf"),Gt=n("Ktyt"),Vt=n("4cUD"),Ht=n("vWou"),Wt=n("Do23"),jt=n("sCW7"),zt=n("nrQ4");function Yt(e){var t,n=e.onReport,r=e.onClick,i=e.isReported,a=e.isLoggedIn,s=e.ElementType,c=e.reportType,l=e.id,m=e.isMature,d=e.className,u=Re()(e,["onReport","onClick","isReported","isLoggedIn","ElementType","reportType","id","isMature","className"]),p=Ce()((t={},v()(t,d,d),v()(t,"disabled",i),t));return C.createElement(s,o()({className:p,onClick:function(e){if(e.preventDefault(),e.stopPropagation(),r&&r(e),i)return!1;n(c,l,m,a)}},u),C.createElement(Se.ZP,{className:"icon fill",name:Se.dK,width:"32",height:"32",fillColor:"#B4B9C2"}),C.createElement("span",{className:"label"},(0,U.Z)(i?"reported":"report")))}Yt.defaultProps={ElementType:"button"};Yt.__docgenInfo={description:"",methods:[],displayName:"ReportDropDownOption",props:{ElementType:{defaultValue:{value:"'button'",computed:!1},type:{name:"string"},required:!1,description:""},onReport:{type:{name:"func"},required:!0,description:""},onClick:{type:{name:"func"},required:!1,description:""},isReported:{type:{name:"bool"},required:!1,description:""},isLoggedIn:{type:{name:"bool"},required:!1,description:""},isMature:{type:{name:"bool"},required:!1,description:""},className:{type:{name:"string"},required:!1,description:""},reportType:{type:{name:"enum",value:[{value:"import { DIALOG_NAME, REPORT_TYPE_COMMENT, REPORT_TYPE_POST } from 'components/Report';",computed:!0},{value:"import { DIALOG_NAME, REPORT_TYPE_COMMENT, REPORT_TYPE_POST } from 'components/Report';",computed:!0}]},required:!0,description:""},id:{type:{name:"union",value:[{name:"number"},{name:"string"}]},required:!1,description:""}}};const Kt=(0,D.$j)((function(e,t){var n=e.user,r=e.report,o=t.reportType,i=t.id;return{isLoggedIn:!!n.get("isLoggedIn"),isReported:o===Q.YP&&!!r.get("reportedPosts",{})[i]||o===Q.H6&&!!r.get("reportedComments",{})[i]}}),(function(e){return{onReport:function(t,n,r,o){e((0,zt.xk)({type:t,id:n,isMature:r})),o&&e((0,F.G3)({name:Q.C8}))}}}))(Yt);function $t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var Jt=function(e){u()(n,e);var t=$t(n);function n(){var e;a()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),v()(m()(e),"download",(function(){var t=e.props,n=t.isAlbum,r=t.postId,o=t.postTitle;n?(0,N.gB)("".concat(ue.FH,"/a/").concat(r,"/zip")):(0,N.gB)("".concat(ue.FH,"/download/").concat(r,"/").concat(encodeURIComponent(o)))})),v()(m()(e),"removeFromPublic",(function(){(0,e.props.openDialog)({name:j.ZA})})),v()(m()(e),"navigateToEditPage",(function(){var t=e.props,n=t.history,r=t.postId,o=t.isAlbum,i=t.isEditBeta,a=(0,we.Bh)(r,o);if(i)return n.push(a);(0,N.gB)(a)})),v()(m()(e),"embed",(function(){var t=e.props,n=t.postId,r=t.postTitle,o=t.isAlbum,i=t.setEmbedData,a=t.openDialog,s=t.postTags;a({name:Vt.k}),i(n,r,Vt.Q,o,s)})),v()(m()(e),"muteOP",(function(){var t=e.props,n=t.postUsername,r=t.postId,o=t.openDialog,i=t.muteUserData;o({name:He.pN}),i(n,He.xM,r)})),e}return c()(n,[{key:"render",value:function(){var e=this.props,t=e.postId,n=e.isMature,r=e.hideReport,o=e.isOwner,i=e.isUserLoggedIn,a=e.inGallery;return C.createElement("div",{className:"Gallery-Options"},C.createElement(Q.ZP,{type:Q.YP}),C.createElement(jt.fD,{className:"Gallery-OptionsMenu Dropdown--btn",dropdownIcon:C.createElement(Se.ZP,{name:Se.D1,width:"32",height:"32"})},C.createElement("button",{type:"button",onClick:this.embed},C.createElement(Se.ZP,{className:"icon stroke",name:Se.iu,width:"32",height:"32"}),C.createElement("span",{className:"label"},(0,U.Z)("embed"))),C.createElement("button",{type:"button",onClick:this.download},C.createElement(Se.ZP,{className:"icon stroke",name:Se.K$,width:"32",height:"32"}),C.createElement("span",{className:"label"},(0,U.Z)("download"))),!a&&C.createElement("button",{type:"button",onClick:function(){return(0,N.uO)(Ht.lW[Ht.vd].href)}},C.createElement(Se.ZP,{className:"icon stroke",name:Se.dK,width:"32",height:"32"}),C.createElement("span",{className:"label"},(0,U.Z)("requestDeletionFooter"))),!r&&C.createElement(Kt,{reportType:Q.YP,id:t,isMature:n}),o&&C.createElement(C.Fragment,null,C.createElement("button",{type:"button",onClick:this.navigateToEditPage},C.createElement(Se.ZP,{className:"icon stroke",name:Se.Es,width:"32",height:"32"}),C.createElement("span",{className:"label"},(0,U.Z)("editPost"))),C.createElement("button",{type:"button",onClick:this.removeFromPublic},C.createElement(Se.ZP,{className:"icon stroke",name:Se.Im,width:"32",height:"32"}),C.createElement("span",{className:"label"},(0,U.Z)("removeFromPublic")))),i&&!o&&!r&&C.createElement(C.Fragment,null,C.createElement("button",{type:"button",onClick:this.muteOP},C.createElement(Se.ZP,{className:"icon stroke",name:Se.M6,width:"32",height:"32"}),C.createElement("span",{className:"label"},(0,U.Z)("postMuteUser"))))))}}]),n}(C.Component),Xt={openDialog:F.G3,setEmbedData:Wt.gK,muteUserData:ke.Y5};Jt.__docgenInfo={description:"",methods:[{name:"download",docblock:null,modifiers:[],params:[],returns:null},{name:"removeFromPublic",docblock:null,modifiers:[],params:[],returns:null},{name:"navigateToEditPage",docblock:null,modifiers:[],params:[],returns:null},{name:"embed",docblock:null,modifiers:[],params:[],returns:null},{name:"muteOP",docblock:null,modifiers:[],params:[],returns:null}],displayName:"GalleryOptions",props:{postId:{type:{name:"string"},required:!0,description:""},postTitle:{type:{name:"string"},required:!0,description:""},isMature:{type:{name:"bool"},required:!0,description:""},hideReport:{type:{name:"bool"},required:!0,description:""},isAlbum:{type:{name:"bool"},required:!0,description:""},isOwner:{type:{name:"bool"},required:!0,description:""},onRemoveFromPublic:{type:{name:"func"},required:!0,description:""},history:{type:{name:"object"},required:!0,description:""},isEditBeta:{type:{name:"bool"},required:!1,description:""},setEmbedData:{type:{name:"func"},required:!0,description:""},openDialog:{type:{name:"func"},required:!0,description:""},postTags:{type:{name:"array"},required:!1,description:""},muteUserData:{type:{name:"func"},required:!0,description:""},postUsername:{type:{name:"string"},required:!1,description:""},isUserLoggedIn:{type:{name:"bool"},required:!1,description:""},inGallery:{type:{name:"bool"},required:!0,description:""}}};const Qt=(0,Ne.qC)((0,D.$j)((function(e){var t=e.postsData,n=e.user,r=t.getIn(["currentPost","inGallery"]),o=!r,i=n.get("username")===t.getIn(["currentPost","account","username"],"").toLowerCase();return o||(t.getIn(["currentPost","isAd"])||i)&&(o=!0),{postTitle:t.getIn(["currentPost","title"]),postId:t.getIn(["currentPost","id"]),isMature:!!t.getIn(["currentPost","isMature"]),hideReport:o,isAlbum:t.getIn(["currentPost","isAlbum"]),isOwner:i,isEditBeta:!!n.getIn(["flags","desktopEditPageBeta"]),postTags:t.getIn(["currentPost","tags"]).map((function(e){return e.get("tag")})).toJS(),postUsername:t.getIn(["currentPost","account","username"]),isUserLoggedIn:n.get("isLoggedIn"),inGallery:r}}),Xt),P.Z,(0,Gt.A)(Bt.SM,Bt.Fg))(Jt);function en(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var tn=function(e){u()(n,e);var t=en(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(m()(r),"setElementPosition",(function(){(0,r.props.setByLInePosition)(parseInt(r.elm.getBoundingClientRect().top+(0,N.X_)(),10))})),v()(m()(r),"onProfileClick",(function(e){(0,r.props.onProfileClick)(r.getUsername(),e)})),v()(m()(r),"onUserProfileClick",(function(){return r.onProfileClick("Username Byline")})),v()(m()(r),"onAvatarProfileClick",(function(){return r.onProfileClick("Avatar Byline")})),v()(m()(r),"onGiveEmerald",(function(){var e=r.props,t=e.giveEmeraldData,n=e.username,o=e.postId;t({recipientUsername:n,recipientId:e.accountId,source:Xe.d2,postId:o})})),v()(m()(r),"getUserAvatar",(function(){var e=r.props,t=e.avatar,n=e.isPromoted,o=e.isAnnouncement,i=r.isImgurAccount(),a=r.getUsername();return n?C.createElement(_t.p,{className:o?"Gallery-Byline-announcement":""},C.createElement(Le,{className:"author-link",username:a,onClick:r.onAvatarProfileClick},(function(){return C.createElement(Ut.Y,{src:t,username:a,displayUsername:a,className:"uScaleTransition Avatar".concat(i?" Avatar--imgur":"")})})),C.createElement(_t.F,null,C.createElement(Ie,{isAnnouncement:o}))):C.createElement(Le,{className:"author-link",username:a,onClick:r.onAvatarProfileClick,useButton:!0},C.createElement(Ut.Y,{src:t,username:a,displayUsername:a,className:"uScaleTransition Avatar".concat(i?" Avatar--imgur":"")}))})),r.elm=C.createRef(),r}return c()(n,[{key:"getUsername",value:function(){var e=this.props.username;return e.toLowerCase()===ue.uZ?ue.mc:e}},{key:"isImgurAccount",value:function(){return this.getUsername()===ue.mc}},{key:"componentDidMount",value:function(){var e=this.props.currentPostViewingSummaryAnalytics;this.setElementPosition(),e(),this.maybeFireOpViewAnalytics()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.postId,r=t.currentPostViewingSummaryAnalytics,o=t.currentUserId;this.setElementPosition(),e.postId!==n?(r(),this.maybeFireOpViewAnalytics()):o!==e.currentUserId&&this.maybeFireOpViewAnalytics()}},{key:"maybeFireOpViewAnalytics",value:function(){var e=this.props,t=e.currentUserId,n=e.accountId,r=e.postId,o=e.score,i=e.minutesOld,a=e.currentUserReputation,s=e.commentCount,c=e.inGallery,l=e.viewedByOpAnalyticsAction;c&&t===n&&l(r,o,i,s,a)}},{key:"render",value:function(){var e=this,t=this.props,n=t.createdAt,r=t.isPromoted,o=t.views,i=t.platform,a=t.inGallery,s=t.children,c=t.isUserLoggedIn,l=t.isUserLoaded,m=t.currentUsername,d=new Date(n),u=this.getUsername(),p=Ce()({"Info-Wrapper":!0,"hidden-post":!a});return C.createElement("div",{className:"Gallery-Byline",ref:function(t){e.elm=t}},u&&this.getUserAvatar(),C.createElement("div",{className:p},u&&C.createElement("div",{className:"Info"},C.createElement(Le,{className:"author-name".concat(r?" author-name-promoted":""),username:u,onClick:this.onUserProfileClick},(function(e){return r?C.createElement(C.Fragment,null,C.createElement("span",{className:"normal"},(0,U.Z)("postByLine")," "),e):e})),C.createElement(Lt.Z,{currentUsername:m,itemUsername:u,isUserLoaded:l,isPromoted:r,isEnabled:ue.NB},C.createElement(Ft.Z,{isUserLoggedIn:c,showSmallVersion:!0,showTitle:!0,onClick:this.onGiveEmerald}))),!r&&C.createElement("div",{className:"Meta"},C.createElement("span",null,(0,et.$N)(o)," ","Views"),C.createElement("span",{className:"delimiter"},"•"),C.createElement("span",{title:d},(0,tt.VG)(d)),i&&i.toLowerCase()!==ue.iM&&C.createElement(C.Fragment,null,C.createElement("span",{className:"delimiter"},"•"),C.createElement("span",null,"via"," ",C.createElement("a",{className:"platform bold",href:"/apps"},(0,et.y8)(i)))))),C.createElement(Qt,null),s)}}]),n}(C.Component);tn.defaultProps={isPromoted:!1,handleFollow:function(e){return(0,N.iG)('Follow "'.concat(e,'"?'))}};tn.__docgenInfo={description:"",methods:[{name:"getUsername",docblock:null,modifiers:[],params:[],returns:null},{name:"isImgurAccount",docblock:null,modifiers:[],params:[],returns:null},{name:"maybeFireOpViewAnalytics",docblock:null,modifiers:[],params:[],returns:null},{name:"setElementPosition",docblock:null,modifiers:[],params:[],returns:null},{name:"onProfileClick",docblock:null,modifiers:[],params:[{name:"location",type:null}],returns:null},{name:"onUserProfileClick",docblock:null,modifiers:[],params:[],returns:null},{name:"onAvatarProfileClick",docblock:null,modifiers:[],params:[],returns:null},{name:"onGiveEmerald",docblock:null,modifiers:[],params:[],returns:null},{name:"getUserAvatar",docblock:null,modifiers:[],params:[],returns:null}],displayName:"GalleryByline",props:{isPromoted:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},handleFollow:{defaultValue:{value:'(username) => confirm(`Follow "${username}"?`)',computed:!1},type:{name:"func"},required:!1,description:""},postId:{type:{name:"string"},required:!0,description:""},username:{type:{name:"string"},required:!0,description:""},avatar:{type:{name:"string"},required:!0,description:""},accountId:{type:{name:"number"},required:!0,description:""},createdAt:{type:{name:"string"},required:!0,description:""},views:{type:{name:"number"},required:!0,description:""},platform:{type:{name:"string"},required:!1,description:""},isAnnouncement:{type:{name:"bool"},required:!1,description:""},setByLInePosition:{type:{name:"func"},required:!0,description:""},currentPostViewingSummaryAnalytics:{type:{name:"func"},required:!0,description:""},prevPost:{type:{name:"object"},required:!1,description:""},nextPost:{type:{name:"object"},required:!1,description:""},onProfileClick:{type:{name:"func"},required:!0,description:""},inGallery:{type:{name:"bool"},required:!1,description:""},children:{type:{name:"array"},required:!1,description:""},giveEmeraldData:{type:{name:"func"},required:!0,description:""},isUserLoggedIn:{type:{name:"bool"},required:!0,description:""},isUserLoaded:{type:{name:"bool"},required:!0,description:""},currentUsername:{type:{name:"string"},required:!0,description:""},currentUserId:{type:{name:"number"},required:!1,description:""},score:{type:{name:"number"},required:!0,description:""},minutesOld:{type:{name:"number"},required:!0,description:""},currentUserReputation:{type:{name:"number"},required:!0,description:""},commentCount:{type:{name:"number"},required:!0,description:""},viewedByOpAnalyticsAction:{type:{name:"func"},required:!0,description:""}}};const nn=(0,D.$j)((function(e){var t=e.postsData,n=e.user;return{prevPost:t.get("prevPost"),nextPost:t.get("nextPost"),inGallery:t.getIn(["currentPost","inGallery"]),isUserLoggedIn:n.get("isLoggedIn"),isUserLoaded:n.get("isLoaded"),currentUsername:n.get("username")||"",currentUserId:n.get("id"),currentUserReputation:n.get("reputation")}}),{currentPostViewingSummaryAnalytics:qe.K8,setByLInePosition:qe._z,onProfileClick:ke._K,giveEmeraldData:mt.Sv,viewedByOpAnalyticsAction:qe.bG})(tn);function rn(e){var t=e.accolades,n=e.onClick;return C.createElement("div",{className:"AccoladesBadge"},t.map((function(e,t){return C.createElement("div",{key:t,className:Ce()(v()({"AccoladesBadge-item":!0},"AccoladesBadge-item-".concat(t),!0)),onClick:n,title:"This post has been awarded the ".concat(e.get("name")," Accolade")},C.createElement(ct.Z,{imageUrl:e.get("image_url"),imageName:e.get("name"),background:t>0}))})))}rn.__docgenInfo={description:"",methods:[],displayName:"AccoladesBadge",props:{accolades:{type:{name:"object"},required:!1,description:""},onClick:{type:{name:"func"},required:!1,description:""}}};var on=n("EEWp");function an(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var sn=function(e){u()(n,e);var t=an(n);function n(){return a()(this,n),t.apply(this,arguments)}return c()(n,[{key:"render",value:function(){var e=this.props,t=e.accolades,n=e.openDialogAction;return t&&0!==t.size?C.createElement("div",{className:"Gallery-AccoladesBadge"},C.createElement(rn,{accolades:t,onClick:function(){n({name:Xe.R,eventSource:A.zx.CLICKED_BADGE})}})):null}}]),n}(C.Component);sn.__docgenInfo={description:"",methods:[],displayName:"GalleryAccoladesBadge",props:{accolades:{type:{name:"object"},required:!1,description:""},openDialogAction:{type:{name:"func"},required:!0,description:""}}};const cn=(0,D.$j)((function(e){var t=e.postsData;return{accolades:(0,on.fi)(t.getIn(["currentPostMeta","accolades","available"]),t.getIn(["currentPostMeta","post","accolades_counts"]))}}),{openDialogAction:F.G3})(sn);function ln(e){var t=e.post,n=e.transformationTitleStyle,r={postId:t.get("id"),username:t.getIn(["account","username"],""),avatar:t.getIn(["account","avatar_url"]),accountId:t.getIn(["account","id"],0),createdAt:t.get("createdAt"),views:t.get("views"),platform:t.get("platform"),isPromoted:t.get("isAd"),score:t.get("score",0),minutesOld:(0,tt.DN)(t.get("createdAt")),commentCount:t.get("commentCount"),isAnnouncement:t.get("isAnnouncement")},o=t.get("title"),i=!o||!o.length,a=!(0,we.if)(t);return C.createElement("div",{className:"Gallery-Header"},C.createElement("div",{style:n,className:"Gallery-Title".concat(t.get("title").length>80?" long":"")},!i&&C.createElement("div",{className:"row"},C.createElement("h1",null,t.get("title")),a&&C.createElement(Oe,{header:!0}))),C.createElement(nn,r,i&&a&&C.createElement(Oe,{header:!0})),C.createElement(cn,null))}ln.__docgenInfo={description:"",methods:[],displayName:"GalleryHeader",props:{post:{type:{name:"object"},required:!0,description:""},transformationTitleStyle:{type:{name:"object"},required:!1,description:""}}};var mn=n("FP0a"),dn=n.n(mn),un=n("Z18p"),pn=n("IH2l"),fn=n("1hNa"),gn=n("Jjnr"),yn=n("/Xj4"),hn=n("e1IN"),vn=n("bY2E"),Cn="a",bn="iframe",En={hashtag:Cn,mention:Cn,url:Cn,iframe:bn},Pn={hashtag:function(e){return"/t/".concat(e.get("tag"))},mention:function(e){return"/user/".concat(e.get("username"))},url:function(e){return e.get("url")},iframe:function(e){return e.get("attributes").reduce((function(e,t,n){return e+="".concat(n,'="').concat(t,'" ')}),"")}};var kn=n("S5xO");function In(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return"".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0).concat(e," ").concat(t).concat(e," ").concat(n).concat(e," ").concat(r).concat(e)}var Nn=n("mIpz");function qn(e){var t=e.adsEnabled,n=e.adUnitID;return t?C.createElement(fe.ZP,{elementID:"GalleryContentAd",adUnitID:n}):null}qn.__docgenInfo={description:"",methods:[],displayName:"GalleryContentAd",props:{adsEnabled:{type:{name:"bool"},required:!0,description:""},adUnitID:{type:{name:"string"},required:!0,description:""}}};const Sn=(0,D.$j)((function(e){var t=e.ad,n=e.user,r=e.postsData;return{adsEnabled:(0,de.M4)(t,n,null==r?void 0:r.get("currentPost"))}}))(qn);function An(e){var t=e.message,n=e.onClick;return C.createElement("div",{className:"loadMoreContainer"},C.createElement("button",{type:"button",className:"loadMore",onClick:n},C.createElement("div",{className:"BgHover"}),C.createElement("div",{className:"text"},C.createElement("span",null,t)," ",C.createElement(Se.ZP,{name:Se.du,width:"18",height:"18",alt:"▼"}))))}function Rn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}An.__docgenInfo={description:"",methods:[],displayName:"LoadMoreButton",props:{message:{type:{name:"string"},required:!0,description:""},onClick:{type:{name:"func"},required:!0,description:""}}};var Dn=1,wn=2;function Tn(e){var t=e.post;return C.createElement("div",{className:"Gallery-ContentWrapper"},C.createElement(xn,{post:t}))}var Mn=function(e){u()(n,e);var t=Rn(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(m()(r),"loadMore",(function(){var e=r.props,t=e.onLoadMore,n=e.resetMediaHeightForPostAction,o=e.post,i=r.state.isExtended,a=o.get("id");i||(n(a),r.setState({isExtended:!0,renderMode:Dn},t))})),v()(m()(r),"onKeyboardInteraction",(function(e){return e.target&&["INPUT","TEXTAREA"].includes(e.target.tagName)||"9"===e.key&&r.loadMore(),e})),v()(m()(r),"onResize",(function(){var e=r.props;(0,e.resetMediaHeightForPostAction)(e.post.get("id"))})),v()(m()(r),"handleIntersection",(function(e){e.forEach((function(e){var t=r.props,n=t.addVideoToViewListAction,o=t.removeVideoFromViewListAction,i=e.target.getAttribute("hash"),a=e.boundingClientRect.top<0?vn.zg.GALLERY.TOP:vn.zg.GALLERY.BOTTOM;e.intersectionRatio>a?n(i):o(i)}))})),v()(m()(r),"renderLoadMore",(function(e){return C.createElement(An,{message:(0,U.Z)("loadMoreImages",e),onClick:r.loadMore})})),r.state={isExtended:!1,renderMode:L.yh?wn:Dn,isSSR:L.yh},r}return c()(n,[{key:"componentDidMount",value:function(){var e,t,n=this.state.isSSR;this.intersectionObserver=(e=this.handleIntersection,t={rootMargin:In("px",-S.fv),threshold:[vn.zg.HIDE,vn.zg.GALLERY.TOP,vn.zg.GALLERY.BOTTOM]},new window.IntersectionObserver(e,t)),(0,N.kZ)("keydown",this.onKeyboardInteraction),(0,N.kZ)("resize",this.onResize),n&&this.setState({isSSR:!1})}},{key:"componentDidUpdate",value:function(e){var t=this.props.post,n=e.post,r=this.state.renderMode,o=t.get("id");n.get("id")!==o&&this.setState({isExtended:!1}),r===Dn&&this.setState({renderMode:wn})}},{key:"componentWillUnmount",value:function(){(0,N.KZ)("keydown",this.onKeyboardInteraction),(0,N.KZ)("resize",this.onResize)}},{key:"render",value:function(){var e=this,t=this.props,n=t.post,r=t.onMainContentReady,o=t.maxWidth,i=t.zoom,a=t.isWebPSupported,s=t.setMediaHeightForPostAction,c=this.state,l=c.isExtended,m=c.renderMode,d=c.isSSR,u=n.get("media"),p=n.get("meta"),f=n.get("id"),g=n.get("title"),y=n.get("description"),h=n.get("inGallery"),v=Ot()(Z.h,1)[0],b=u.size,E=u;l||m!==wn||(E=E.slice(0,j.Mr));var P=E.map((function(e){if(e.get("renderHeight"))return e.get("renderHeight");var t=0;return t=o>=e.get("width")?e.get("height"):o*e.get("height")/e.get("width"),e.get("isVideo")&&t>((0,Nn.s)()?L.YJ:window.innerHeight)&&(t*=.8),Math.ceil(t)})),k=E.map((function(t,c){var l=(0,_.Un)(h,c+1,b)&&o>=v;return C.createElement(C.Fragment,{key:t.get("id")},C.createElement(Zn,{maxWidth:o,mediaItem:t,postMeta:p,onMediaReady:0===c?r:void 0,index:c,zoom:i,isWebPSupported:a,postId:f,setMediaHeightForPostAction:s,renderMode:m,mediaHeight:P.get(c),intersectionObserver:e.intersectionObserver,postTitle:g,postDescription:y,mediaDescription:t.getIn(["metadata","description"]),tags:n.get("tags")?n.get("tags").toJS():[]}),l&&C.createElement("div",{className:"Gallery-Content--ad"},C.createElement(Sn,{adUnit:Z.sl})))}));if(m===Dn)return C.createElement(C.Fragment,null,k,!l&&u.size>j.Mr&&this.renderLoadMore(u.size-j.Mr));var I=P.toJS(),N=I.reduce((function(e,t){return e+t}),j.SU),q={elementHeight:I,containerHeight:d?N:void 0,useWindowAsScrollContainer:!d};return C.createElement(C.Fragment,null,C.createElement(dn(),q,k),!l&&u.size>j.Mr&&this.renderLoadMore(u.size-j.Mr))}}]),n}(C.Component),xn=(0,D.$j)((function(e){var t=e.ui,n=e.agent;return{maxWidth:t.gallery.get("contentWrapperWidth"),isWebPSupported:n.get(hn.H2)}}),{onLoadMore:qe.Ge,onMainContentReady:qe.QL,zoom:un.b,setMediaHeightForPostAction:qe.sT,resetMediaHeightForPostAction:qe.X7,addVideoToViewListAction:pn.$S,removeVideoFromViewListAction:pn.kh})(Mn),Zn=function(e){u()(n,e);var t=Rn(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(m()(r),"setHeight",(function(){var e=r.props,t=e.setMediaHeightForPostAction,n=e.postId,o=e.mediaItem,i=e.index;o.get("renderHeight")!==r.mediaContainer.current.offsetHeight&&t(n,i,r.mediaContainer.current.offsetHeight)})),r.mediaContainer=C.createRef(),r}return c()(n,[{key:"componentDidMount",value:function(){this.setHeight()}},{key:"componentDidUpdate",value:function(){this.setHeight()}},{key:"render",value:function(){var e=this.props,t=e.mediaItem,n=e.onMediaReady,r=e.index,o=e.maxWidth,i=e.zoom,a=e.isWebPSupported,s=e.renderMode,c=e.mediaHeight,l=e.intersectionObserver,m=e.postTitle,d=e.tags,u=e.postDescription,p=t.toJS(),f=p.id,g=p.isVideo,y=p.meta,h=p.src,v=p.animationType,b=p.url,E=p.width,P=p.height,k=p.isPicsart,I=(0,kn.j)(o,E,P),N=Ce()({"Gallery-Content--media":!0,"Gallery-Content--unconstrained":!(0,kn.v)(E,P)}),q=h.coverImage;return a&&v===j.OP&&(q=h.webPImage),C.createElement("div",{ref:this.mediaContainer,className:"Gallery-Content--mediaContainer"},C.createElement("div",{className:N},s===Dn&&C.createElement("div",{style:{height:c}}),s!==Dn&&(g?C.createElement(yn.Vf,{src:h,animationType:v,playVideo:!1,playVideoByOne:!0,handleCanPlay:n,onError:n,controls:!0,hash:f,isFirst:0===r,width:E,height:P,maxHeight:I,title:y.title,index:r,intersectionObserver:l,postTitle:m,mediaDescription:y.description,postDescription:u,tags:d}):C.createElement(gn.D,{hash:f,thumbSrc:q,originalSrc:b,onLoad:n,onError:n,withOriginalImage:!0,width:E,height:P,maxHeight:I,zoom:i,title:y.title,index:r,poweredBy:k&&(0,U.Z)("poweredByPicsart"),postTitle:m,mediaDescription:y.description,postDescription:u,tags:d}))),y.description&&C.createElement(On,{description:t.getIn(["meta","description"]),textAnnotations:t.getIn(["meta","text_annotations"])}))}}]),n}(C.Component);function On(e){var t,n,r,o,i=e.description,a=e.textAnnotations;return t=a?C.createElement("div",{dangerouslySetInnerHTML:(n=i,r=a,o=n.split(""),{__html:r.filter((function(e,t){return t in En})).reduce((function(e,t,n){return t.forEach((function(t){var r=t.get("indices").get(0),o=t.get("indices").get(1)-1;switch(En[n]){case Cn:return e[r]="<".concat(Cn,' target="_blank" href="').concat(Pn[n](t),'">').concat(e[r]),void(e[o]="".concat(e[o],"</").concat(Cn,">"));case bn:e[r]="<".concat(bn," ").concat(Pn[n](t),"></").concat(bn,">")}})),e}),o).join("")})}):C.createElement(fn.C,{isPostDescription:!0},i),C.createElement("div",{className:"Gallery-Content--descr"},t)}Mn.defaultProps={onMediaReady:function(){}},Tn.__docgenInfo={description:"",methods:[],displayName:"GalleryPostContent",props:{post:{type:{name:"object"},required:!0,description:""}}},Mn.__docgenInfo={description:"",methods:[{name:"loadMore",docblock:null,modifiers:[],params:[],returns:null},{name:"onKeyboardInteraction",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"onResize",docblock:null,modifiers:[],params:[],returns:null},{name:"handleIntersection",docblock:null,modifiers:[],params:[{name:"entries",optional:!1,type:null}],returns:null},{name:"renderLoadMore",docblock:null,modifiers:[],params:[{name:"count",optional:!1,type:null}],returns:null}],displayName:"PostDefaultView",props:{onMediaReady:{defaultValue:{value:"() => {}",computed:!1},required:!1},post:{type:{name:"object"},required:!0,description:""},onLoadMore:{type:{name:"func"},required:!0,description:""},onMainContentReady:{type:{name:"func"},required:!0,description:""},maxWidth:{type:{name:"number"},required:!1,description:""},zoom:{type:{name:"func"},required:!1,description:""},isWebPSupported:{type:{name:"bool"},required:!1,description:""},setMediaHeightForPostAction:{type:{name:"func"},required:!0,description:""},resetMediaHeightForPostAction:{type:{name:"func"},required:!0,description:""},addVideoToViewListAction:{type:{name:"func"},required:!0,description:""},removeVideoFromViewListAction:{type:{name:"func"},required:!0,description:""}}},Zn.__docgenInfo={description:"",methods:[{name:"setHeight",docblock:null,modifiers:[],params:[],returns:null}],displayName:"PostDefaultViewMedia",props:{mediaItem:{type:{name:"object"},required:!0,description:""},postMeta:{type:{name:"object"},required:!0,description:""},onMediaReady:{type:{name:"func"},required:!1,description:""},index:{type:{name:"number"},required:!1,description:""},maxWidth:{type:{name:"number"},required:!1,description:""},zoom:{type:{name:"func"},required:!1,description:""},isWebPSupported:{type:{name:"bool"},required:!1,description:""},postId:{type:{name:"string"},required:!0,description:""},setMediaHeightForPostAction:{type:{name:"func"},required:!0,description:""},renderMode:{type:{name:"number"},required:!0,description:""},mediaHeight:{type:{name:"number"},required:!1,description:""},intersectionObserver:{type:{name:"object"},required:!1,description:""},postTitle:{type:{name:"string"},required:!1,description:""},mediaDescription:{type:{name:"string"},required:!1,description:""},postDescription:{type:{name:"string"},required:!1,description:""},tags:{type:{name:"arrayOf",value:{name:"object"}},required:!1,description:""}}},On.__docgenInfo={description:"",methods:[],displayName:"PostDefaultViewDescription",props:{description:{type:{name:"string"},required:!0,description:""},textAnnotations:{type:{name:"object"},required:!1,description:""}}};var Un=n("jBfu");function Ln(e){var t=e.backgroundHash,n=e.children,r=e.tagLink,o=e.onClick,i="linear-gradient(0deg, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2)), url(".concat(ue.LS,"/").concat(t,"_d.jpg?maxwidth=200&fidelity=grand)");return C.createElement(Un.Z,{className:"TagPill",to:r,style:{background:i},onClick:o},n)}function Fn(e){var t=e.tags,n=e.onTagInteracted,r=e.isMainContentReady;return C.createElement("div",{className:"Gallery-Content--tags"},r&&t.map((function(e){var t=e.get("tag");return C.createElement(Ln,{key:t,backgroundHash:e.get("background_id"),tagLink:"/t/".concat(t),onClick:function(){return n(t)}},e.get("display")||e.get("tag"))})))}Ln.defaultProps={onClick:function(){}},Ln.__docgenInfo={description:"",methods:[],displayName:"TagPill",props:{onClick:{defaultValue:{value:"() => {}",computed:!1},type:{name:"func"},required:!1,description:""},backgroundHash:{type:{name:"string"},required:!1,description:""},tagLink:{type:{name:"string"},required:!1,description:""},children:{type:{name:"union",value:[{name:"array"},{name:"string"}]},required:!1,description:""}}};Fn.__docgenInfo={description:"",methods:[],displayName:"GalleryTags",props:{tags:{type:{name:"object"},required:!0,description:""},onTagInteracted:{type:{name:"func"},required:!0,description:""},isMainContentReady:{type:{name:"bool"},required:!1,description:""}}};const _n=(0,D.$j)((function(e){return{isMainContentReady:!!e.postsData.get("isMainContentReady")}}),{onTagInteracted:qe.M})(Fn);var Bn=n("S2q1");function Gn(e){var t=e.title,n=e.icon,r=e.stat,o=e.text,i=e.link,a=C.createElement(C.Fragment,null,C.createElement("div",{className:"OPStats-title"},t),C.createElement("div",{className:"OPStats-icon"},n),r&&C.createElement("div",{className:"OPStats-stat"},(0,et.oh)(r)),C.createElement("div",{className:"OPStats-text"},o));return i?C.createElement(De.Z,{to:{pathname:i},target:"_blank",className:"OPStats-card"},a):C.createElement("div",{className:"OPStats-card"},a)}function Vn(e){var t=e.score,n=e.seed,r="",o="",i="";return t<=5?(r="https://blog.".concat(ue.VB,"/2015/05/20/how-to-reach-the-front-page/"),o=(0,U.Z)("opStatsTipsNoobLabel"),i=(0,U.Z)("opStatsTipsNoobText",n)):(o=(0,U.Z)("opStatsTipsMasterLabel"),i=(0,U.Z)("opStatsTipsMasterText",n)),C.createElement(Gn,{title:o,icon:C.createElement(Se.ZP,{name:Se.eu,width:"29",height:"29"}),text:i,link:r})}function Hn(e){var t=e.tags,n=e.hash,r=e.isAlbum,o=e.score,i=e.seed,a=t.get(i%t.size),s="",c=!1;return 0===t.size?(s="/".concat(r?"a/":"").concat(n),c=!0):a&&o>=5&&(s="/t/".concat(a),c=!0),c?C.createElement(Gn,{title:(0,U.Z)("opStatsTagsLabel",t.size),icon:C.createElement(Se.ZP,{name:Se.iG,width:"29",height:"29"}),text:(0,U.Z)("opStatsTagsText",t.size,a,i),link:s}):null}function Wn(e){var t=e.post,n=e.postMeta,r=e.isFavoritedByOP;if(!t||!n)return null;var o=(0,tt.DN)(t.get("createdAt")),i=new Date(t.get("createdAt")).getTime(),a=r?1:0,s=n.get("favorite_count")-a>0,c=null;return c=o<15?C.createElement(Gn,{title:(0,U.Z)("opStatsTipsNewLabel"),icon:C.createElement(Se.ZP,{name:Se.eu,width:"29",height:"29"}),text:(0,U.Z)("opStatsTipsNewText")}):C.createElement(C.Fragment,null,n.get("view_count")>0&&C.createElement(Gn,{title:(0,U.Z)("opStatsViewsLabel"),icon:C.createElement(Se.ZP,{name:Se.OM,width:"29",height:"29"}),stat:n.get("view_count"),text:(0,U.Z)("opStatsViewsText",i)}),C.createElement(Vn,{score:n.get("point_count"),seed:i}),n.get("upvote_count")>1&&C.createElement(Gn,{title:(0,U.Z)("opStatsUpvotesLabel"),icon:C.createElement(Se.ZP,{name:Se.rU,width:"29",height:"29",fillColor:Bn.$darkMintGreen,strokeColor:Bn.$darkMintGreen}),stat:n.get("upvote_count"),text:(0,U.Z)("opStatsUpvotesText",i)}),s&&C.createElement(Gn,{title:(0,U.Z)("opStatsFavoritesLabel"),icon:C.createElement(Se.ZP,{name:Se.Ez,width:"29",height:"29",fillColor:Bn.$tealish,strokeColor:Bn.$tealish}),stat:n.get("favorite_count"),text:(0,U.Z)("opStatsFavoritesText",n.get("favorite_count"),i)}),n.get("comment_count")>0&&C.createElement(Gn,{title:(0,U.Z)("opStatsCommentsLabel"),icon:C.createElement(Se.ZP,{name:Se.FP,width:"29",height:"29",fillColor:Bn.$lavender,strokeColor:Bn.$lavender}),stat:n.get("comment_count"),text:(0,U.Z)("opStatsCommentsText",i)}),C.createElement(Hn,{tags:t.get("tags").map((function(e){return e.get("tag")})),hash:t.get("id"),isAlbum:t.get("isAlbum"),score:n.get("point_count"),seed:i}),t.get("inMostViral")&&C.createElement(Gn,{title:(0,U.Z)("opStatsViralLabel"),icon:C.createElement(Se.ZP,{name:Se.uh,width:"29",height:"29"}),text:(0,U.Z)("opStatsViralText",i)})),C.createElement("div",null,C.createElement("h3",{className:"OPStats-header"},(0,U.Z)("opStatsTitle")),C.createElement("div",{className:"OPStats"},c))}Wn.__docgenInfo={description:"",methods:[],displayName:"OPStats",props:{post:{type:{name:"object"},required:!0,description:""},postMeta:{type:{name:"object"},required:!0,description:""},isFavoritedByOP:{type:{name:"bool"},required:!1,description:""}}};const jn=(0,D.$j)((function(e){var t=e.postsData;return{post:t.get("currentPost"),postMeta:t.getIn(["currentPostMeta","post"]),isFavoritedByOP:t.getIn(["currentPostMeta","user","favorite"],!1)}}),{})(Wn);function zn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}Gn.__docgenInfo={description:"",methods:[],displayName:"StatCard",props:{title:{type:{name:"string"},required:!0,description:""},icon:{type:{name:"element"},required:!0,description:""},stat:{type:{name:"number"},required:!1,description:""},text:{type:{name:"node"},required:!0,description:""},link:{type:{name:"string"},required:!1,description:""}}},Vn.__docgenInfo={description:"",methods:[],displayName:"TipsAndTricksCard",props:{score:{type:{name:"number"},required:!0,description:""},seed:{type:{name:"number"},required:!0,description:""}}},Hn.__docgenInfo={description:"",methods:[],displayName:"TagCard",props:{tags:{type:{name:"object"},required:!0,description:""},hash:{type:{name:"string"},required:!0,description:""},isAlbum:{type:{name:"bool"},required:!1,description:""},score:{type:{name:"number"},required:!0,description:""},seed:{type:{name:"number"},required:!0,description:""}}};var Yn=function(e){u()(n,e);var t=zn(n);function n(){return a()(this,n),t.apply(this,arguments)}return c()(n,[{key:"render",value:function(){var e=this.props,t=e.post,n=e.transformationTitleStyle,r=e.isOwner,o=e.contentWidth,i=t.get("tags"),a=o>=Ot()(Z.h,1)[0];return C.createElement("div",{className:"Gallery-Content"},C.createElement(ln,{post:t,transformationTitleStyle:n}),C.createElement(Tn,{post:t}),i&&!!i.size&&C.createElement(_n,{tags:i}),r&&C.createElement(jn,null),a&&C.createElement("div",{className:"Gallery-Content-BottomAd"},C.createElement(Sn,{adUnitID:Z.JD})))}}]),n}(C.Component);Yn.__docgenInfo={description:"",methods:[],displayName:"GalleryContent",props:{post:{type:{name:"object"},required:!1,description:""},transformationTitleStyle:{type:{name:"object"},required:!1,description:""},isOwner:{type:{name:"bool"},required:!1,description:""},contentWidth:{type:{name:"number"},required:!1,description:""}}};const Kn=(0,D.$j)((function(e){return{contentWidth:e.ui.gallery.get("contentWrapperWidth")}}),null)(Yn);var $n=n("tYU/"),Jn=n("BxWF"),Xn=n("RnMR");function Qn(e){var t=e.index,n=e.postId,r=e.cover,o=e.title,i=e.gallerySize,a=e.isPromoted,s=e.onMouseEnter,c=e.onMouseLeave,l=e.onClick,m=e.isActive,d=e.isAnnouncement;return C.createElement(Me,{className:"SidebarPost".concat(m?" active":""),onMouseEnter:s,onMouseLeave:c,onClick:function(){l(a,i,t)},postId:n},C.createElement("div",{className:"hover-bg"}),C.createElement("div",{className:"Thumbnail"},i>1&&C.createElement("span",{className:"counter"},i),C.createElement("img",{src:r,loading:"lazy",width:64,height:64})),C.createElement("div",{className:"description"},a&&C.createElement(Ie,{isAnnouncement:d}),C.createElement("span",{className:"label"},(0,et.$G)(o,j.Iu))))}Qn.__docgenInfo={description:"",methods:[],displayName:"SidebarPost",props:{index:{type:{name:"string"},required:!0,description:""},postId:{type:{name:"string"},required:!0,description:""},cover:{type:{name:"string"},required:!1,description:""},gallerySize:{type:{name:"number"},required:!1,description:""},title:{type:{name:"string"},required:!0,description:""},onClick:{type:{name:"func"},required:!0,description:""},isPromoted:{type:{name:"bool"},required:!1,description:""},onMouseEnter:{type:{name:"func"},required:!1,description:""},onMouseLeave:{type:{name:"func"},required:!1,description:""},isActive:{type:{name:"bool"},required:!1,description:""},isAnnouncement:{type:{name:"bool"},required:!1,description:""}}};var er=n("LvDl");function tr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var nr=function(e){u()(n,e);var t=tr(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(m()(r),"handleAdUpdate",(function(){(0,r.props.handleAdUpdate)(r.container.current.clientHeight)})),r.container=C.createRef(),r.mutationObserver=new MutationObserver(r.handleAdUpdate.bind(m()(r))),r.resizeObserver=new ResizeObserver(r.handleAdUpdate.bind(m()(r))),r}return c()(n,[{key:"componentDidMount",value:function(){this.mutationObserver.observe(this.container.current,{childList:!0,subtree:!0,attributes:!0}),this.resizeObserver.observe(this.container.current)}},{key:"componentDidUpdate",value:function(){this.handleAdUpdate()}},{key:"componentWillUnmount",value:function(){this.mutationObserver.disconnect(),this.resizeObserver.disconnect()}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.classNames,r=t.postId;return n!==e.classNames||r!==e.postId}},{key:"render",value:function(){var e=this.props,t=e.classNames,n=e.adUnitID,r=Ce()(t);return C.createElement("div",{ref:this.container,className:r},C.createElement(fe.ZP,{elementID:(0,er.uniqueId)("SidebarAd-"),adUnitID:n,refreshTimer:1e4}))}}]),n}(C.Component);function rr(e){var t=e.postId,n=e.targeting,r=e.viewportHeight>=$n.$sidebar600adMinHeightToShow;return C.createElement(nr,{postId:t,adUnitID:r?Z.sm:Z.Wy,slotTargeting:n,classNames:Ce()("ad-slot",{Top300x600:r,Top320:!r})})}nr.defaultProps={handleAdUpdate:function(){}},nr.__docgenInfo={description:"",methods:[{name:"handleAdUpdate",docblock:null,modifiers:[],params:[],returns:null}],displayName:"SidebarAd",props:{handleAdUpdate:{defaultValue:{value:"() => {}",computed:!1},type:{name:"func"},required:!1,description:""},adUnitID:{type:{name:"any"},required:!0,description:""},slotTargeting:{type:{name:"object"},required:!1,description:""},classNames:{type:{name:"string"},required:!1,description:""},postId:{type:{name:"string"},required:!0,description:""}}},rr.__docgenInfo={description:"",methods:[],displayName:"SidebarResponsiveAd",props:{postId:{type:{name:"string"},required:!0,description:""},adConfig:{type:{name:"object"},required:!0,description:""},targeting:{type:{name:"object"},required:!0,description:""},viewportHeight:{type:{name:"number"},required:!0,description:""}}};const or=rr;var ir=n("VeLT"),ar=n("nozz"),sr=n("a5Cr");function cr(e){var t=e.isIncludeIcon,n=e.copy;return C.createElement(C.Fragment,null,t&&C.createElement("span",{role:"img","aria-label":"fire",className:"emoji"},"🔥"),n)}function lr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}function mr(e){var t=function(t){u()(r,t);var n=lr(r);function r(t){var i;return a()(this,r),i=n.call(this,t),v()(m()(i),"getComponent",(function(){var t=i.props,n=t.posts,r=t.streamSection,a=t.history,s=!(n&&n.size&&[O.JM,O.aF,O.HM,O.FD].includes(r)&&"PUSH"===a.action);return(0,ar.Z)(s,!1,!1)((function(t){return C.createElement(e,o()({Title:i.TitleComponent},t))}))})),v()(m()(i),"getTitleCopy",(function(){var e=i.props,t=e.streamSection,n=e.streamSort,r=e.streamWindow;return t===O.JM?(0,U.Z)("recircTitle".concat(t).concat(r)):[O.aF,O.HM,O.FD].includes(t)?(0,U.Z)("recircTitle".concat(t).concat(n)):(0,U.Z)("recircTitle".concat(O.HM).concat(O.QC))})),v()(m()(i),"TitleComponent",(function(){return C.createElement(cr,{copy:i.getTitleCopy(),isIncludeIcon:i.props.streamSort===O.QC&&i.props.streamSection!==O.JM})})),i.state={Component:L.yh?i.getComponent():null},i}return c()(r,[{key:"componentDidMount",value:function(){this.state.Component||this.setState({Component:this.getComponent()})}},{key:"componentWillUnmount",value:function(){this.setState({Component:null})}},{key:"render",value:function(){var e=this,t=this.state.Component;return t?C.createElement(t,{setGalleryParams:function(){return e.props.setInitialGalleryState((0,ir.nn)())},location:Z.qL}):null}}]),r}(C.Component);t.displayName="WithSidebarHPHOC(".concat((0,sr.Gf)(e),")");return(0,Ne.qC)((0,D.$j)((function(e){var t=e.posts,n=e.gallery;return{posts:t.get("posts"),streamSection:n.get("streamSection"),streamSort:n.get("streamSort"),streamWindow:n.get("streamWindow")}}),{setInitialGalleryState:x.e}),P.Z)(t)}function dr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}function ur(e){var t=function(t){u()(r,t);var n=dr(r);function r(t){var i;return a()(this,r),i=n.call(this,t),v()(m()(i),"getComponent",(function(){var t=i.props,n=t.posts,r=t.history;return(0,ar.Z)(!(n&&n.size&&"PUSH"===r.action),!1,!1)((function(t){return C.createElement(e,o()({Title:i.TitleComponent},t))}))})),v()(m()(i),"TitleComponent",(function(){var e=i.state.sort,t=i.props.streamDisplayName;return C.createElement(cr,{copy:(0,U.Z)("recircTitleTag".concat(e),(0,et.BH)(t,24)),isIncludeIcon:e===O.QC})})),i.state={Component:L.yh?i.getComponent():null,sort:O.QC},i}return c()(r,[{key:"componentDidMount",value:function(){var e=this.props.streamSort;this.state.Component||this.setState({Component:this.getComponent(),sort:O.jY[O.Kg].includes(e)?e:O.QC})}},{key:"componentWillUnmount",value:function(){this.setState({Component:null})}},{key:"render",value:function(){var e=this.state.Component;if(!e)return null;var t=this.props,n=t.match.params.tagName,r=t.setInitialGalleryState;return C.createElement(e,{setGalleryParams:function(){return r((0,ir.Gc)(n))}})}}]),r}(C.Component);t.displayName="WithSidebarTagHOC(".concat((0,sr.Gf)(e),")");return(0,Ne.qC)((0,D.$j)((function(e){var t=e.posts,n=e.gallery;return{posts:t.get("posts"),streamSort:n.get("streamSort"),streamDisplayName:n.get("streamDisplayName")}}),{setInitialGalleryState:x.e}),P.Z)(t)}cr.__docgenInfo={description:"",methods:[],displayName:"TitleComponent",props:{isIncludeIcon:{type:{name:"bool"},required:!1,description:""},copy:{type:{name:"any"},required:!0,description:""}}};var pr=n("XJLh"),fr=n("S1wb");function gr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}function yr(e){var t=function(t){u()(r,t);var n=gr(r);function r(t){var i;return a()(this,r),i=n.call(this,t),v()(m()(i),"getComponent",(function(){var t=i.props,n=t.posts,r=t.history;return(0,fr.Z)(!(n&&n.size&&"PUSH"===r.action))((function(t){return C.createElement(e,o()({Title:i.TitleComponent},t))}))})),v()(m()(i),"getCopyTitle",(function(){return C.createElement(C.Fragment,null,C.createElement("span",null,i.props.username||i.props.match.params.username),(0,U.Z)("recircTitleFavorites"))})),v()(m()(i),"TitleComponent",(function(){return C.createElement(cr,{copy:i.getCopyTitle(),isIncludeIcon:!1})})),i.state={Component:L.yh?i.getComponent():null},i}return c()(r,[{key:"componentDidMount",value:function(){var e=this.props.isFoldersFetched,t=this.state.Component;e||this.props.fetchFolders(),t||this.setState({Component:this.getComponent()})}},{key:"componentWillUnmount",value:function(){this.setState({Component:null})}},{key:"render",value:function(){var e=this.state.Component;if(!e)return null;var t=this.props,n=t.username,r=t.isOwner,o=t.isLoggedIn;return C.createElement(e,{username:n,isOwner:r,isLoggedIn:o})}}]),r}(C.Component);t.displayName="WithSidebarFavoriteHOC(".concat((0,sr.Gf)(e),")");return(0,Ne.qC)(P.Z,(0,D.$j)((function(e,t){var n=e.posts,r=e.favorites,o=e.account,i=e.user,a=t.match,s=t.history,c=(0,pr.j)(i,o,s,a);return{posts:n.get("posts"),username:c,isOwner:i.get("username")===c,isFoldersFetched:r.get("isFoldersFetched"),isLoggedIn:!!i.get("isLoggedIn")}}),{fetchPublicFolders:ht.O_,fetchFolders:ht.F5}))(t)}function hr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}function vr(e){var t=function(t){u()(r,t);var n=hr(r);function r(e){var t;return a()(this,r),t=n.call(this,e),v()(m()(t),"TitleComponent",(function(){return C.createElement(cr,{copy:(0,U.Z)("recircTitleSearch",(0,et.BH)(t.props.searchQuery,24)),isIncludeIcon:!1})})),t.state={Component:null},t}return c()(r,[{key:"componentDidMount",value:function(){var t=this;this.setState({Component:(0,ar.Z)(!0,!1,!1)((function(n){return C.createElement(e,o()({Title:t.TitleComponent},n))}))})}},{key:"componentWillUnmount",value:function(){this.setState({Component:null})}},{key:"render",value:function(){var e=this,t=this.state.Component;return t?C.createElement(t,{setGalleryParams:function(){return e.props.setInitialGalleryState((0,ir.fd)(e.props.searchQuery))}}):null}}]),r}(C.Component);t.displayName="WithSidebarSearchHOC(".concat((0,sr.Gf)(e),")");return(0,Ne.qC)((0,D.$j)((function(e){var t=e.posts,n=e.gallery;return{posts:t.get("posts"),searchQuery:n.get("searchQuery")}}),{setInitialGalleryState:x.e}),P.Z)(t)}function Cr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var br=n("rpZf");function Er(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var Pr=function(e){u()(n,e);var t=Er(n);function n(e){var r;return a()(this,n),(r=t.call(this,e)).impressionTimer=null,r.iframeRef=null,r.writeIframe=r.writeIframe.bind(m()(r)),r}return c()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.data,r=t.promotedPostProxyPixelAction;if(n){var o=n.impressionUrl;o&&(this.impressionTimer=(0,N.Zi)((function(){e.iframeRef&&(0,ee.PZ)(e.iframeRef)&&((0,N.fL)()&&(0,Xn.xn)(o)?r(o):(0,Xn.B5)(o),(0,N.cv)(e.impressionTimer))}),800))}}},{key:"componentWillUnmount",value:function(){(0,N.cv)(this.impressionTimer)}},{key:"writeIframe",value:function(e){if(e){this.iframeRef=e;var t,n,r,o,i=this.props.data,a=e.contentDocument;switch((0,br.Z)(i,"contents.0.data.customData.adType")){case"hash":case"native":n="".concat(ue.LS,"/").concat((0,br.Z)(i,"contents.0.data.customData.hash"),".jpg"),r=(0,br.Z)(i,"contents.0.data.customData.link"),o=(0,br.Z)(i,"contents.0.data.customData.title"),t='<a href="'.concat(r,'" rel="nofollow" target="_blank" title="').concat(o,'"><img src="').concat(n,'" title="').concat(o,'" alt="').concat(o,'" border="0" width="300" height="250"></a>');break;case"html":t=(0,br.Z)(i,"contents.0.data.customData.html");break;default:t=(0,br.Z)(i,"contents.0.body")}a.open(),a.write(t),a.close()}}},{key:"render",value:function(){return this.props.data?C.createElement("div",{className:"Top320 MedRec ad-slot"},C.createElement("iframe",{ref:this.writeIframe,className:"Gallery-Sidebar-CompanionAd",title:"companion ad",width:"300",height:"250",marginWidth:"0",marginHeight:"0",hspace:"0",vspace:"0",scrolling:"no",frameBorder:"0",seamless:"seamless",sandbox:"allow-same-origin allow-scripts allow-popups allow-popups-to-escape-sandbox"})):null}}]),n}(C.Component);Pr.__docgenInfo={description:"",methods:[{name:"writeIframe",docblock:"This method in combination with it being a ref is a bit of a hack to allow for writing\ncontent to a src-less iframe that companion ads can execute scripts inside of them which\nis something not allowed by React's dangerouslySetInnerHTML because it uses innerHTML\n@param {node} frame",modifiers:[],params:[{name:"frame",description:null,type:{name:"node"},optional:!1}],returns:null,description:"This method in combination with it being a ref is a bit of a hack to allow for writing\ncontent to a src-less iframe that companion ads can execute scripts inside of them which\nis something not allowed by React's dangerouslySetInnerHTML because it uses innerHTML"}],displayName:"CompanionAd",props:{data:{type:{name:"object"},required:!1,description:""},promotedPostProxyPixelAction:{type:{name:"func"},required:!0,description:""}}};const kr=(0,D.$j)(null,{promotedPostProxyPixelAction:qe.g0})(Pr);function Ir(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var Nr=$n.$recircElmHeight+$n.$recircElmMargin;function qr(e,t){var n="".concat(ue.LS,"/").concat(t);return n+=e?"_d.".concat(Jn.FJ,"?maxwidth=").concat(Jn.gj,"&shape=thumb"):"b.".concat(Jn._3)}var Sr=function(e){u()(n,e);var t=Ir(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(m()(r),"getElementHeights",(function(){var e=r.props.postOrder,t=r.state.elementHeights;return e.size===t.length?t:Array(e.size).fill(Nr)})),v()(m()(r),"scrollToCurrentPost",(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(r.postsComp&&r.postsComp.scrollable&&r.props.postIndex>=0){var t=r.props.postIndex*Nr-r.postsComp.scrollable.scrollTop;if(!t)return;if(Math.abs(t)>4*Nr)r.postsComp.scrollable.classList[e?"remove":"add"]("without-smoothScroll"),r.postsComp.scrollable.scrollTop=r.props.postIndex*Nr;else{r.postsComp.scrollable.classList.add("without-smoothScroll");var n=r.postsComp.scrollable.firstChild;n.addEventListener("transitionend",r.onTransitionEnd),n.style.transform="translate(0, ".concat(-1*t,"px)"),n.classList.add("scroll")}}})),v()(m()(r),"onTransitionEnd",(function(e){var t=r.postsComp.scrollable.firstChild;e.target===t&&(r.postsComp.scrollable.scrollTop=r.props.postIndex*Nr,t.style.transform="translate(0, 0)",t.classList.remove("scroll"),t.removeEventListener("transitionend",r.onTransitionEnd))})),v()(m()(r),"handlePostClick",(function(e,t){var n=r.props,o=n.setCurrentPostIndexAction,i=n.recircSortType;o(t),r.props.postRecircInteractedAnalytics(t+1,e,Xn.hH[i],null,r.shouldRenderAds())})),v()(m()(r),"updateElementHeight",(function(e,t){r.setState((function(n){var r=n.elementHeights;return r[e]=t,{elementHeights:r}}))})),v()(m()(r),"handleTopAdUpdate",(function(e){r.setState({topAdClassNames:Ce()({Top320:!0,MedRec:e>=250,"ad-slot":!0})})})),r.postsComp=C.createRef(),r.sidebarWrapper=C.createRef(),r.state={elementHeights:[],topAdClassNames:"Top320 ad-slot"},r}return c()(n,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.posts,r=t.postOrder,o=this.state.elementHeights;(!e.posts.size&&n.size||e.postIndex!==this.props.postIndex||e.isMainContentReady!==this.props.isMainContentReady)&&this.scrollToCurrentPost(e.postIndex>=0&&e.isMainContentReady),r.size!==o.length&&this.setState({elementHeights:this.getElementHeights()})}},{key:"componentWillUnmount",value:function(){(0,this.props.setCurrentPostIndexAction)(-1)}},{key:"currentPost",value:function(){var e=this.props,t=e.posts,n=e.post,r=n&&n.get("id");return t.get(r)||n}},{key:"shouldRenderAds",value:function(){var e=this.props,t=e.adsEnabled,n=e.posts,r=this.currentPost();return t&&r&&!r.get("isAd")&&n&&n.size>1}},{key:"shouldComponentUpdate",value:function(e,t){var n=this.state.topAdClassNames,r=this.props,o=r.postOrder,i=r.isLoading,a=r.post,s=r.postIndex,c=r.isMainContentReady,l=r.transformationEnabled,m=a&&a.get("id"),d=e.post&&e.post.get("id");return e.postOrder!==o||e.isLoading!==i||m!==d||e.postIndex!==s||e.isMainContentReady!==c||t.topAdClassNames!==n||e.transformationEnabled!==l}},{key:"render",value:function(){var e=this,t=this.props,n=t.post,r=t.posts,o=t.postOrder,i=t.moreDataFetch,a=t.isLoading,s=t.Title,c=t.isWebPSupported,l=t.recircItemCount,m=t.streamSection,d=t.streamSort,u=t.viewportHeight,p=this.state.topAdClassNames,f={},g={},y=!0,h=this.currentPost();h&&(f=h.get("adConfig"),g=(0,we.yL)(h,m,d),y=!(0,we.if)(h));var v=this.props.isMainContentReady&&n&&o.size>0&&y,b=this.getElementHeights(),E=this.shouldRenderAds();return C.createElement("div",{ref:this.sidebarWrapper,className:"Gallery-Sidebar-Wrapper"},C.createElement("div",{className:"Top Sticky"},E&&C.createElement(nr,{postId:this.props.post.get("id"),adUnitID:Z.Jp,slotTargeting:g,classNames:p,handleAdUpdate:this.handleTopAdUpdate}),h&&h.get("isAd")&&C.createElement(kr,{data:h.get("adSource",{}).sponsored_companion}),y&&C.createElement("h3",null,C.createElement(De.Z,{to:"/".concat(W.Sd)},C.createElement(s,null))),C.createElement("div",{className:"Gallery-Sidebar-Posts-Wrapper"},v&&C.createElement(dn(),{containerHeight:$n.$recircItemHeight*l,elementHeight:b,className:"Gallery-Sidebar-posts Scrollbar--gray",onInfiniteLoad:i,isInfiniteLoading:a,infiniteLoadBeginEdgeOffset:200,ref:function(t){e.postsComp=t},loadingSpinnerDelegate:C.createElement(xt.AR,{size:30})},o.map((function(t,n){var o=r.get(t.get("postId"));return C.createElement(Rr,{key:n,setHeight:function(t){return e.updateElementHeight(n,t)},index:n,height:b[n]},C.createElement(Qn,{key:n,index:"".concat(n),postId:o.get("id"),cover:qr(c,o.getIn(["cover","id"])||o.get("id")),title:o.get("title"),gallerySize:o.get("imageCount"),isPromoted:o.get("isAd"),onClick:function(){return e.handlePostClick(o,n)},isActive:o.get("id")===h.get("id"),isAnnouncement:o.get("isAnnouncement")}))}))),v&&C.createElement("div",{className:"fade-out"})),E&&C.createElement(or,{postId:h.get("id"),adConfig:f,targeting:g,viewportHeight:u})))}}]),n}(C.Component);Sr.defaultProps={Title:function(){return""}};Sr.__docgenInfo={description:"",methods:[{name:"getElementHeights",docblock:null,modifiers:[],params:[],returns:null},{name:"scrollToCurrentPost",docblock:null,modifiers:[],params:[{name:"isSmoothScroll",type:null}],returns:null},{name:"onTransitionEnd",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"currentPost",docblock:null,modifiers:[],params:[],returns:null},{name:"shouldRenderAds",docblock:null,modifiers:[],params:[],returns:null},{name:"handlePostClick",docblock:null,modifiers:[],params:[{name:"post",type:null},{name:"index",type:null}],returns:null},{name:"updateElementHeight",docblock:null,modifiers:[],params:[{name:"index",type:null},{name:"height",type:null}],returns:null},{name:"handleTopAdUpdate",docblock:null,modifiers:[],params:[{name:"elementHeight",type:null}],returns:null}],displayName:"GallerySidebar",props:{Title:{defaultValue:{value:"() => ''",computed:!1},type:{name:"func"},required:!1,description:""},moreDataFetch:{type:{name:"func"},required:!0,description:""},postRecircInteractedAnalytics:{type:{name:"func"},required:!0,description:""},setCurrentPostIndexAction:{type:{name:"func"},required:!0,description:""},posts:{type:{name:"object"},required:!1,description:""},post:{type:{name:"object"},required:!1,description:""},postOrder:{type:{name:"object"},required:!1,description:""},postIndex:{type:{name:"number"},required:!1,description:""},isLoading:{type:{name:"bool"},required:!1,description:""},adsEnabled:{type:{name:"bool"},required:!1,description:""},isMainContentReady:{type:{name:"bool"},required:!1,description:""},recircSortType:{type:{name:"string"},required:!1,description:""},isWebPSupported:{type:{name:"bool"},required:!1,description:""},recircItemCount:{type:{name:"number"},required:!0,description:""},transformationEnabled:{type:{name:"bool"},required:!0,description:""},streamSection:{type:{name:"string"},required:!0,description:""},streamSort:{type:{name:"string"},required:!0,description:""},viewportHeight:{type:{name:"number"},required:!0,description:""}}};const Ar=(0,Ne.qC)((function(e){return(0,Ne.qC)(P.Z,(0,D.$j)((function(e){var t=e.posts,n=e.gallery;return{posts:t.get("posts"),streamSection:n.get("streamSection"),searchQuery:n.get("searchQuery")}}),{setRecircSortType:qe.Rs}))(function(e){return function(t){u()(r,t);var n=Cr(r);function r(t){var o;return a()(this,r),o=n.call(this,t),v()(m()(o),"getComponentData",(function(){var t=o.props,n=t.streamSection,r=t.match.params,i=t.history,a=t.searchQuery;if(r.tagName)return[j.b7.TAG,ur(e)];if((r.username||(0,N.Jz)().startsWith("/account/favorites/"))&&r.galleryId)return[j.b7.FAVORITE,yr(e)];if(a&&"POP"===i.action)return[j.b7.SEARCH,vr(e)];var s=j.b7.MOST_VIRAL;switch(n){case O.aF:s=j.b7.USER_SUB;break;case O.JM:s=j.b7.TOP_GALLERY}return[s,mr(e)]})),v()(m()(o),"getComponent",(function(){var e=o.getComponentData();return Ot()(e,2)[1]})),v()(m()(o),"recognizeRenderComponent",(function(){var e=o.props.setRecircSortType,t=o.getComponentData(),n=Ot()(t,2),r=n[0],i=n[1];e(r),o.setState({Component:i})})),o.state={Component:L.yh?o.getComponent():null},o}return c()(r,[{key:"componentDidMount",value:function(){this.recognizeRenderComponent()}},{key:"componentDidUpdate",value:function(e){var t=this.props.posts;e.posts.size&&!t.size&&this.recognizeRenderComponent()}},{key:"componentWillUnmount",value:function(){this.setState({Component:null})}},{key:"render",value:function(){var e=this.state.Component;return e?C.createElement(e,null):null}}]),r}(C.Component)}(e))}),(0,D.$j)((function(e){var t=e.postsData,n=e.posts,r=e.ad,o=e.gallery,i=e.user,a=e.agent,s=e.display;return{post:t.get("currentPost"),postIndex:t.get("currentPostIndex"),recircSortType:t.get("recircSortType"),posts:n.get("posts"),postOrder:n.get("postOrder"),adsEnabled:(0,de.M4)(r,i,null==t?void 0:t.get("currentPost")),isMainContentReady:t.get("isMainContentReady"),isLoading:o.get("isFetching"),isWebPSupported:a.get(hn.H2),recircItemCount:i.getIn(["subscription","isSubscribed"])||i.get("hasPaid")?j.BH:j.g2,transformationEnabled:r.getIn(["transformation","enabled"]),streamSection:o.get("streamSection"),streamSort:o.get("streamSort"),viewportHeight:s.getIn(["viewPort","height"])}}),{postRecircInteractedAnalytics:qe.To,setCurrentPostIndexAction:qe.ZH}))(Sr);var Rr=function(e){u()(n,e);var t=Ir(n);function n(e){var r;return a()(this,n),(r=t.call(this,e)).node=C.createRef(),r.state={height:r.props.height},r}return c()(n,[{key:"componentDidUpdate",value:function(){var e=Math.round(this.node.getBoundingClientRect().height);this.state.height!==e&&(this.setState({height:e}),this.props.setHeight(e))}},{key:"render",value:function(){var e=this;return C.createElement("div",{ref:function(t){e.node=t},className:"Gallery-Sidebar-PostContainer"},this.props.children)}}]),n}(C.Component);Rr.__docgenInfo={description:"",methods:[],displayName:"SideBarPostContainer",props:{children:{type:{name:"node"},required:!0,description:""},setHeight:{type:{name:"func"},required:!0,description:""},height:{type:{name:"number"},required:!1,description:""},index:{type:{name:"number"},required:!1,description:""}}};var Dr=n("2+Sp"),wr=n("J4ux"),Tr=n("8Fpl"),Mr=n("Nc9o");function xr(e){var t=e.selected,n=void 0!==t&&t,r=Re()(e,["selected"]),i=Ce()({Favorite:!0,"Favorite--selected":n}),a={height:"32",width:"32",fillColor:"none",strokeColor:"#ffffff"};return C.createElement(Se.ZP,o()({className:i,name:Se.Ez},a,r))}xr.__docgenInfo={description:"",methods:[],displayName:"Favorite",props:{selected:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""}}};var Zr=function(e){var t=e.accolades,n=e.title,r=e.body,o=e.buttonText,i=e.onButtonClick,a=e.className,s=t.map((function(e){return C.createElement("img",{key:e.id,className:"AccoladesTooltip-accoladeIcon",src:e.get("image_url")})})),c=Ce()(v()({AccoladesTooltip:!0},a,!0));return C.createElement("div",{className:c},s,C.createElement("div",{className:"AccoladesTooltip-title"},n),C.createElement("div",{className:"AccoladesTooltip-body"},r),C.createElement("button",{type:"button",className:"AccoladesTooltip-button",onClick:i},o))};Zr.defaultProps={className:"",accolades:[],onButtonClick:function(){}},Zr.__docgenInfo={description:"",methods:[],displayName:"AccoladesTooltip",props:{className:{defaultValue:{value:"''",computed:!1},type:{name:"string"},required:!1,description:""},accolades:{defaultValue:{value:"[]",computed:!1},type:{name:"array"},required:!1,description:""},onButtonClick:{defaultValue:{value:"() => {}",computed:!1},type:{name:"func"},required:!1,description:""},title:{type:{name:"string"},required:!0,description:""},body:{type:{name:"string"},required:!0,description:""},buttonText:{type:{name:"string"},required:!0,description:""}}};var Or=function(e){var t,n=e.show,r=e.children,o=e.className,i=e.transitionName,a=(0,C.useRef)(null),s=(0,C.useState)(!1),c=Ot()(s,2),l=c[0],m=c[1],d=(0,C.useState)(!1),u=Ot()(d,2),p=u[0],f=u[1],g=(0,C.useState)(!1),y=Ot()(g,2),h=y[0],b=y[1],E=function(e){e.animationName==="".concat(i,"-animationend")&&(m(!1),f(!1))};(0,C.useEffect)((function(){var e=a.current;if(e)return e.addEventListener("animationend",E,!1),function(){e.removeEventListener("animationend",E,!1)}}),[a]),(0,C.useLayoutEffect)((function(){n?m(!0):h&&(b(!1),f(!0))}),[n]),(0,C.useLayoutEffect)((function(){l&&b(!0)}),[l]);var P=Ce()((t={Toggler:!0},v()(t,o,!0),v()(t,i,!0),v()(t,"Toggler-showing",l),v()(t,"".concat(i,"-visible"),h),v()(t,"".concat(i,"-hiding"),p),t));return C.createElement("div",{ref:a,className:P},r)};Or.__docgenInfo={description:"",methods:[],displayName:"Toggler",props:{show:{type:{name:"bool"},required:!0,description:""},className:{type:{name:"string"},required:!0,description:""},transitionName:{type:{name:"string"},required:!0,description:""},children:{type:{name:"element"},required:!0,description:""}}};var Ur=function(e){var t=e.showAccolades,n=e.onEmeraldClick,r=e.availableAccolades,o=e.accolades,i=e.currentUsername,a=e.inGallery,s=e.isEmerald;if(!t)return t;var c=(0,C.useState)(null),l=Ot()(c,2),m=l[0],d=l[1],u=(0,C.useState)(!1),p=Ot()(u,2),f=p[0],g=p[1],y=(0,C.useState)(!1),h=Ot()(y,2),b=h[0],E=h[1];(0,C.useEffect)((function(){if(!s&&t&&a&&(null!=m&&((0,N.gr)(m),d(null)),f)){var e=(0,N.iK)((function(){E(!0)}),500);return function(){(0,N.gr)(e),d(null)}}}),[f,a]);var P,k,I=!(b||(P=o,P&&P.size>0)),q=function(){return(0,N.Yu)("?source=tooltip")};return C.createElement(C.Fragment,null,b&&C.createElement("div",{className:"GalleryVote-modal"}),C.createElement("div",{onMouseEnter:function(){return g(!0)},onMouseLeave:function(){g(!1),E(!1)},className:Ce()({"GalleryVote-accoladesButton":!0,"GalleryVote-accoladesAnimate":I,"GalleryVote-accoladesHighlight":b}),onClick:s?function(){return n(A.zx.CLICKED_EMERALD)}:q},C.createElement("div",{className:Ce()({item:!0,"item-single":!0,btn:!0,"btn-emerald":!0,"btn-emerald-highlight":b})},0===(k=o?Math.min(o.size,3):0)?C.createElement(Se.ZP,{className:"emerald-icon",name:Se.uD,width:"32",height:"32"}):C.createElement(C.Fragment,null,o.slice(0,3).map((function(e,t){return C.createElement("div",{key:t,className:Ce()(v()({"accolade-icon":!0},"accolade-icon-".concat(k,"-").concat(t),!0))},C.createElement(ct.Z,{username:e.get("user_selected")?i:"",imageUrl:e.get("image_url"),imageName:e.get("name")}))})))),C.createElement("div",null,C.createElement("div",{className:"GalleryVote-accoladesBridge"},C.createElement(Or,{show:b,className:"AccoladesButton-toggler",transitionName:"fader-right"},C.createElement(Zr,{accolades:r,title:(0,Je.Z)("accoladesTooltipTitle"),buttonText:(0,Je.Z)("accoladesTooltipBtnTxt"),className:"AccoladesButton-accoladesTooltip AccoladesTooltip-engagementTooltip",onButtonClick:q,body:(0,Je.Z)("accoladesTooltipBody")}))))))};function Lr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}Ur.__docgenInfo={description:"",methods:[],displayName:"AccoladeButton",props:{showAccolades:{type:{name:"bool"},required:!0,description:""},onEmeraldClick:{type:{name:"func"},required:!0,description:""},availableAccolades:{type:{name:"array"},required:!0,description:""},accolades:{type:{name:"object"},required:!0,description:""},currentUsername:{type:{name:"string"},required:!0,description:""},inGallery:{type:{name:"bool"},required:!0,description:""},isEmerald:{type:{name:"bool"},required:!0,description:""}}};var Fr=function(e){u()(n,e);var t=Lr(n);function n(e){var r;return a()(this,n),(r=t.call(this,e)).state={isFade:!1},r.timeout=null,r.tooltipDelay=null,r}return c()(n,[{key:"componentDidUpdate",value:function(e){var t=this,n=this.props,r=n.score,o=n.postId;e.score!==r&&e.postId===o&&(this.setState({isFade:!0}),this.timeout=(0,N.iK)((function(){t.setState({isFade:!1})}),150))}},{key:"render",value:function(){var e=this.props,t=e.vote,n=e.onVote,r=e.score,o=e.isFavorite,i=e.onFavorite,a=e.hidePoints,s=e.upvoteRef,c=e.downvoteRef,l=e.favoriteRef,m=e.showEmerald,d=e.isEmerald,u=e.onEmeraldClick,p=e.transformationStyle,f=e.onPointsClick,g=e.accolades,y=e.inGallery,h=e.currentUsername,v=e.availableAccolades,b=this.state.isFade,E={item:!0,score:!0,"score-upvoted":t===Qe.UP,"score-downvoted":t===Qe.WV,"score-fade":b},P=m&&y;return C.createElement("div",{className:Ce()({GalleryVote:!0,"hidden-post":!y})},C.createElement(Ur,{showAccolades:P,onEmeraldClick:u,accolades:g,availableAccolades:v,currentUsername:h,inGallery:y,isEmerald:d}),C.createElement("div",{className:"GalleryVote-controls",style:p},y&&C.createElement(C.Fragment,null,C.createElement("div",{className:"item btn btn-upvote",onClick:function(e){return n(e,t===Qe.UP?Qe.gZ:Qe.UP)}},C.createElement(It.NN,{selected:t===Qe.UP,width:"32",height:"32",title:(0,U.Z)("upvoteHint"),setRef:s})),!a&&C.createElement("div",{className:Ce()(E),onClick:f},C.createElement("span",{title:(0,U.Z)("scoreHint")},(0,et.$N)(r))),C.createElement("div",{className:"item btn btn-downvote",onClick:function(e){return n(e,t===Qe.WV?Qe.gZ:Qe.WV)}},C.createElement(It.AI,{selected:t===Qe.WV,width:"32",height:"32",title:(0,U.Z)("downvoteHint"),setRef:c}))),C.createElement("div",{className:"item item-single btn btn-favorite GalleryVote-favorite",onClick:i},C.createElement(xr,{selected:o,width:"32",height:"32",title:(0,U.Z)("favoriteHint"),setRef:l}))))}}]),n}(C.Component);Fr.defaultProps={vote:Qe.gZ,onVote:function(){},score:0,isFaforite:!1,onFavorite:function(){},hidePoints:!1,showEmerald:!1,inGallery:!0},Fr.__docgenInfo={description:"",methods:[],displayName:"GalleryVote",props:{vote:{defaultValue:{value:"VETO",computed:!0},type:{name:"enum",value:[{value:"import { UP, DOWN, VETO } from 'constants/vote_type';",computed:!0},{value:"import { UP, DOWN, VETO } from 'constants/vote_type';",computed:!0},{value:"import { UP, DOWN, VETO } from 'constants/vote_type';",computed:!0}]},required:!1,description:""},onVote:{defaultValue:{value:"() => {}",computed:!1},type:{name:"func"},required:!1,description:""},score:{defaultValue:{value:"0",computed:!1},type:{name:"number"},required:!1,description:""},isFaforite:{defaultValue:{value:"false",computed:!1},required:!1},onFavorite:{defaultValue:{value:"() => {}",computed:!1},type:{name:"func"},required:!1,description:""},hidePoints:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},showEmerald:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},inGallery:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:""},postId:{type:{name:"string"},required:!0,description:""},isFavorite:{type:{name:"bool"},required:!1,description:""},onPointsClick:{type:{name:"func"},required:!0,description:""},upvoteRef:{type:{name:"object"},required:!1,description:""},downvoteRef:{type:{name:"object"},required:!1,description:""},favoriteRef:{type:{name:"object"},required:!1,description:""},isEmerald:{type:{name:"bool"},required:!0,description:""},onEmeraldClick:{type:{name:"func"},required:!1,description:""},transformationStyle:{type:{name:"object"},required:!1,description:""},availableAccolades:{type:{name:"array"},required:!1,description:""},accolades:{type:{name:"object"},required:!1,description:""},currentUsername:{type:{name:"string"},required:!1,description:""}}};var _r=n("P5Jw"),Br=n("qk1P"),Gr=n("9eUW");function Vr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var Hr=function(e){u()(n,e);var t=Vr(n);function n(){var e;a()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),v()(m()(e),"facebook",(function(){var t=e.props,n=t.onFacebookShare,r=t.postTitle,o=t.postId,i=t.postTags;n((0,Gr.rX)(),r,o,i,Br.wy)})),v()(m()(e),"twitter",(function(){var t=e.props,n=t.onTwitterShare,r=t.postTitle,o=t.postId,i=t.postTags;n((0,Gr.rX)(),r,o,i,Br.wy)})),v()(m()(e),"reddit",(function(){var t=e.props,n=t.onRedditShare,r=t.postTitle,o=t.postId,i=t.postTags;n((0,Gr.rX)(),r,o,i,Br.wy)})),v()(m()(e),"email",(function(){var t=e.props,n=t.onEmailShare,r=t.postTitle,o=t.postId,i=t.postTags;n((0,Gr.rX)(),r,o,i,Br.wy)})),v()(m()(e),"link",(function(){var t=e.props,n=t.onCopyLink,r=t.postTitle,o=t.postId,i=t.postTags;n((0,Gr.rX)(),r,o,i,Br.wy)})),e}return c()(n,[{key:"render",value:function(){return C.createElement("div",{className:"Gallery-Share"},C.createElement(jt.fD,{className:"item Gallery-ShareMenu Dropdown--horizontal Dropdown--btn",dropdownIcon:C.createElement(Se.ZP,{name:Se.$D,width:"32",height:"32"})},C.createElement("label",null,"Share"),C.createElement("button",{type:"button",onClick:this.facebook},C.createElement(Se.ZP,{className:"icon icon-facebook",name:Se.Kh,width:"32",height:"32",title:(0,U.Z)("facebook")})),C.createElement("button",{type:"button",onClick:this.twitter},C.createElement(Se.ZP,{className:"icon icon-twitter",name:Se.Hz,width:"32",height:"32",title:(0,U.Z)("twitter")})),C.createElement("button",{type:"button",onClick:this.reddit},C.createElement(Se.ZP,{className:"icon icon-reddit",name:Se.Cj,width:"32",height:"32",title:(0,U.Z)("reddit")})),C.createElement("button",{type:"button",onClick:this.email},C.createElement(Se.ZP,{className:"icon icon-mail",name:Se.Q,width:"32",height:"32",title:(0,U.Z)("email")})),C.createElement(_r.CopyToClipboard,{text:(0,Gr.rX)(),onCopy:this.link},C.createElement("button",{type:"button"},C.createElement(Se.ZP,{className:"icon icon-link",name:Se.Mi,width:"32",height:"32",title:(0,U.Z)("copyLinkToClipboard")})))))}}]),n}(C.Component),Wr={onFacebookShare:qe.GB,onTwitterShare:qe.v0,onRedditShare:qe.oN,onEmailShare:qe.RC,onCopyLink:qe.fB};Hr.__docgenInfo={description:"",methods:[{name:"facebook",docblock:null,modifiers:[],params:[],returns:null},{name:"twitter",docblock:null,modifiers:[],params:[],returns:null},{name:"reddit",docblock:null,modifiers:[],params:[],returns:null},{name:"email",docblock:null,modifiers:[],params:[],returns:null},{name:"link",docblock:null,modifiers:[],params:[],returns:null}],displayName:"GalleryShare",props:{postTitle:{type:{name:"string"},required:!0,description:""},postId:{type:{name:"string"},required:!0,description:""},postTags:{type:{name:"array"},required:!0,description:""},onFacebookShare:{type:{name:"func"},required:!0,description:""},onTwitterShare:{type:{name:"func"},required:!0,description:""},onRedditShare:{type:{name:"func"},required:!0,description:""},onEmailShare:{type:{name:"func"},required:!0,description:""},onCopyLink:{type:{name:"func"},required:!0,description:""}}};const jr=(0,D.$j)((function(e){var t=e.postsData;return{postTitle:t.getIn(["currentPost","title"]),postId:t.getIn(["currentPost","id"]),postTags:t.getIn(["currentPost","tags"])&&t.getIn(["currentPost","tags"]).map((function(e){return e.get("tag")})).toJS()}}),Wr)(Hr);function zr(e){var t=e.commentsCount,n=e.onClick,r=e.transformationStyle;return C.createElement("div",{className:"Gallery-CommentsCounter",title:(0,U.Z)("commentsCounterHint"),onClick:n,style:r},C.createElement("div",{className:"item"},C.createElement(Se.ZP,{name:Se.FP,width:"32",height:"32",title:"Jump to Comments",fillColor:null})),C.createElement("div",{className:"item label"},C.createElement("span",null,(0,et.$N)(t))))}zr.defaultProps={commentsCount:0,onClick:function(){}},zr.__docgenInfo={description:"",methods:[],displayName:"GalleryCommentsCounter",props:{commentsCount:{defaultValue:{value:"0",computed:!1},type:{name:"number"},required:!1,description:""},onClick:{defaultValue:{value:"() => {}",computed:!1},type:{name:"func"},required:!1,description:""},transformationStyle:{type:{name:"object"},required:!1,description:""}}};var Yr=n("qNBE"),Kr=n("Janf");function $r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var Jr=function(e){u()(n,e);var t=$r(n);function n(e){var r;a()(this,n),r=t.call(this,e),v()(m()(r),"setHovering",(function(e){r.setState({hovering:e})})),v()(m()(r),"unhover",(function(){r.setHovering(!1),(0,N.II)("click",r.unhover)})),v()(m()(r),"setTransformation",(function(e){var t=r.props,n=t.setAnimatingIn,o=t.setAnimatingOut,i=t.onClick,a=t.font,s=t.transitionEnabledPixels;(0,N.rI)("TransformationFont")||(0,N.F_)((0,N.vy)("link",{id:"TransformationFont",href:a,rel:"stylesheet"})),e?(n(!0),(0,N.X5)(0,0,"smooth"),s.forEach((function(e){(0,Xn.B5)(e)}))):o(!0),(0,N.iK)((function(){i(e,!0,!0)}),$n.$transformationFadeOutTimeMS/2),(0,N.iK)((function(){e?n(!1):o(!1)}),$n.$transformationFadeOutTimeMS)}));var o=!1;return(0,Kr.h2)(e.name)||((0,Kr.d7)(e.name,!0,7),o=!0),r.state={hovering:o},r}return c()(n,[{key:"componentDidMount",value:function(){(0,N._E)("click",this.unhover)}},{key:"componentWillUnmount",value:function(){(0,N.II)("click",this.unhover)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.positionY,r=t.postId;n===e.positionY&&r===e.postId||this.setHovering(!1)}},{key:"render",value:function(){var e=this,t=this.props,n=t.isTransformed,r=t.transformationEnabledByDefault,o=t.exitIcon,i=t.enterIcon,a=t.buttonColor,s=t.tooltipTitle,c=t.tooltipDescription,l=t.tooltipStyle,m=this.state.hovering,d={};return m&&(d.filter="drop-shadow(0 0 3px rgba(".concat(a,", 0.16))")),C.createElement("div",{className:"Transformation-wrapper"},C.createElement("img",{src:n?o:i,style:d,className:"Transformation",onMouseEnter:function(){return e.setHovering(!0)},onMouseLeave:function(){return e.setHovering(!1)},onClick:function(){return e.setTransformation(!n)},alt:(0,U.Z)(n?"exit":"enter")}),n===r&&C.createElement("div",{className:"Transformation-tooltip".concat(m?" Transformation-tooltip--hovering":""),style:l},C.createElement("h2",null,s),C.createElement("p",null,c)))}}]),n}(C.Component);Jr.__docgenInfo={description:"",methods:[{name:"setHovering",docblock:null,modifiers:[],params:[{name:"hovering",type:null}],returns:null},{name:"unhover",docblock:null,modifiers:[],params:[],returns:null},{name:"setTransformation",docblock:null,modifiers:[],params:[{name:"enabled",type:null}],returns:null}],displayName:"PromotedTransformation",props:{name:{type:{name:"string"},required:!0,description:""},isTransformed:{type:{name:"bool"},required:!0,description:""},transformationEnabledByDefault:{type:{name:"bool"},required:!0,description:""},onClick:{type:{name:"func"},required:!0,description:""},setAnimatingIn:{type:{name:"func"},required:!0,description:""},setAnimatingOut:{type:{name:"func"},required:!0,description:""},enterIcon:{type:{name:"string"},required:!0,description:""},exitIcon:{type:{name:"string"},required:!0,description:""},buttonColor:{type:{name:"string"},required:!0,description:""},tooltipTitle:{type:{name:"string"},required:!0,description:""},tooltipDescription:{type:{name:"string"},required:!0,description:""},tooltipStyle:{type:{name:"object"},required:!0,description:""},positionY:{type:{name:"number"},required:!0,description:""},postId:{type:{name:"string"},required:!0,description:""},font:{type:{name:"string"},required:!0,description:""},transitionEnabledPixels:{type:{name:"arrayOf",value:{name:"string"}},required:!0,description:""}}};const Xr=(0,D.$j)((function(e){var t=e.ad,n=e.display,r=e.postsData;return{name:t.getIn(["transformation","name"]),isTransformed:t.getIn(["transformation","enabled"]),transformationEnabledByDefault:t.getIn(["transformation","enabledByDefault"]),font:t.getIn(["transformation","font"]),enterIcon:t.getIn(["transformation","enterIcon"]),exitIcon:t.getIn(["transformation","exitIcon"]),buttonColor:t.getIn(["transformation","buttonColor"]),tooltipTitle:t.getIn(["transformation","tooltipTitle"]),tooltipDescription:t.getIn(["transformation","tooltipDescription"]),tooltipStyle:{backgroundImage:'url("'.concat(t.getIn(["transformation","tooltipBg"]),'")')},positionY:n.get("positionY"),postId:r.getIn(["currentPost","id"],""),transitionEnabledPixels:t.getIn(["transformation","enabledPixels"])}}),{onClick:Yr.nV,setAnimatingIn:Yr.SR,setAnimatingOut:Yr.zv})(Jr);function Qr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function eo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qr(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function to(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var no=function(e){u()(n,e);var t=to(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(m()(r),"handleVote",(function(e,t){var n=r.props,o=n.isUserLoggedOut,i=n.showGalleryPopOverCTAAction,a=n.onVote,s=n.post,c=n.currentPostMeta,l=n.userAccoladeId,m=n.accoladeRevoked;if(o)return t===Qe.UP?i(wr.RT,r.upvoteRef.current.parentNode):i(wr.fh,r.downvoteRef.current.parentNode);if(!l||(0,N.uI)("confirm")((0,Je.Z)("accoladesDeleteConfirm",Qe.y2[t].toLowerCase()))){var d=e.type&&e.type.includes("key")?"Key Press":A.jd;a({postId:s.get("id"),vote:t,initialVote:c.getIn(["user","vote"]),trigger:d}),t!==Qe.UP&&l&&m({userAccoladeId:l})}})),v()(m()(r),"handleFavorite",(function(e){var t=r.props,n=t.isUserLoggedOut,o=t.showGalleryPopOverCTAAction,i=t.onFavorite,a=t.post,s=t.currentPostMeta,c=t.openDialogAction;if(n)return o(wr.UP,r.favoriteRef.current.parentNode);var l=e.type&&e.type.includes("key")?"Key Press":A.jd,m=s.getIn(["user","favorite"])||a.get("favorite"),d=j.Di;return a.get("inGallery")||(d=a.get("isAlbum")?j.v$:j.TN),i(a.get("id"),!m,a.get("isAlbum"),l,d),m?void 0:c({name:j.mE})})),v()(m()(r),"handleCommentsCounterClick",(function(){var e=r.props,t=e.onScrollToComments,n=e.commentsListId,o=e.contentOffset,i=e.onScrollToCommentsAnalytics;t(n,o),i()})),v()(m()(r),"onKeyboardInteraction",(function(e){var t=r.props,n=t.openDialogAction,o=t.showEmerald;if(e.target&&["INPUT","TEXTAREA"].includes(e.target.tagName))return e;var i=r.props.currentPostMeta.getIn(["user","vote"]);switch(e.key){case")":case"0":r.handleFavorite(e);break;case"-":case"_":r.handleVote(e,i===Qe.WV?Qe.gZ:Qe.WV);break;case"+":case"=":r.handleVote(e,i===Qe.UP?Qe.gZ:Qe.UP);break;case"*":case"8":if(!o)return e;n({name:Xe.R,eventSource:A.zx.HOTKEY})}return e})),r.state={gradient:""},r.upvoteRef=C.createRef(),r.downvoteRef=C.createRef(),r.favoriteRef=C.createRef(),r}return c()(n,[{key:"componentDidMount",value:function(){(0,N.kZ)("keydown",this.onKeyboardInteraction)}},{key:"componentWillUnmount",value:function(){(0,N.KZ)("keydown",this.onKeyboardInteraction)}},{key:"componentDidUpdate",value:function(e){if(Tr.DY){var t=this.props.currentPostMeta,n=e.currentPostMeta;t.get("id")!==n.get("id")&&this.setState({gradient:(0,Mr.YQ)()})}}},{key:"render",value:function(){var e=this.props,t=e.post,n=e.currentPostMeta,r=e.openDialogAction,o=e.transformationStyle,i=e.showEmerald,a=e.availableAccolades,s=e.isEmerald,c=e.accolades,l=e.currentUsername,m=e.showsTransformationButton,d=this.state.gradient,u=n.getIn(["user","vote"])||Qe.gZ,p=Tr.DY?{background:(0,Mr.pT)(u,d)}:{},f=eo(eo({},o),p),g=Ce()("Gallery-EngagementBar",{"april-fools-engagement-bar":Tr.DY});return C.createElement("div",{className:g},C.createElement("div",{className:"Gallery-EngagementBarContainer",style:{paddingBottom:0}},C.createElement(Fr,{postId:t.get("id"),vote:u,score:n.getIn(["post","point_count"])||0,onVote:this.handleVote,isFavorite:n.getIn(["user","favorite"])||t.get("favorite")||!1,onFavorite:this.handleFavorite,hidePoints:t.get("isAd")||t.get("adType")>0,upvoteRef:this.upvoteRef,downvoteRef:this.downvoteRef,favoriteRef:this.favoriteRef,transformationStyle:f,showEmerald:i,availableAccolades:a,isEmerald:s,onEmeraldClick:function(e){r({name:Xe.R,eventSource:e})},onPointsClick:function(){return r({name:j.EE})},accolades:c,currentUsername:l,inGallery:t.get("inGallery")}),m&&C.createElement(Xr,null),C.createElement(jr,null),!t.get("commentsDisabled")&&C.createElement(zr,{commentsCount:n.getIn(["post","comment_count"]),onClick:this.handleCommentsCounterClick,transformationStyle:f})))}}]),n}(C.Component);no.defaultProps={onFavorite:function(){},onVote:function(){},onScrollToComments:function(){},availableAccolades:[]},no.__docgenInfo={description:"",methods:[{name:"handleVote",docblock:null,modifiers:[],params:[{name:"e",type:null},{name:"vote",type:null}],returns:null},{name:"handleFavorite",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"handleCommentsCounterClick",docblock:null,modifiers:[],params:[],returns:null},{name:"onKeyboardInteraction",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null}],displayName:"GalleryEngagementBar",props:{onFavorite:{defaultValue:{value:"() => {}",computed:!1},type:{name:"func"},required:!1,description:""},onVote:{defaultValue:{value:"() => {}",computed:!1},type:{name:"func"},required:!1,description:""},onScrollToComments:{defaultValue:{value:"() => {}",computed:!1},type:{name:"func"},required:!1,description:""},availableAccolades:{defaultValue:{value:"[]",computed:!1},type:{name:"array"},required:!1,description:""},post:{type:{name:"object"},required:!0,description:""},currentPostMeta:{type:{name:"object"},required:!0,description:""},onScrollToCommentsAnalytics:{type:{name:"func"},required:!1,description:""},commentsListId:{type:{name:"string"},required:!1,description:""},contentOffset:{type:{name:"number"},required:!0,description:""},showGalleryPopOverCTAAction:{type:{name:"func"},required:!0,description:""},isUserLoggedOut:{type:{name:"bool"},required:!1,description:""},setRef:{type:{name:"func"},required:!1,description:""},openDialogAction:{type:{name:"func"},required:!0,description:""},transformationStyle:{type:{name:"object"},required:!1,description:""},showEmerald:{type:{name:"bool"},required:!0,description:""},isEmerald:{type:{name:"bool"},required:!0,description:""},accolades:{type:{name:"object"},required:!1,description:""},currentUsername:{type:{name:"string"},required:!1,description:""},userAccoladeId:{type:{name:"number"},required:!1,description:""},accoladeRevoked:{type:{name:"func"},required:!1,description:""},showsTransformationButton:{type:{name:"bool"},required:!0,description:""}}};const ro=(0,D.$j)((function(e){var t=e.ui,n=e.user,r=e.postsData,o=e.ad,i=!r.getIn(["currentPost","isAd"],!1),a={};return o.getIn(["transformation","enabled"])&&(a={borderColor:"rgb(".concat(o.getIn(["transformation","primaryColor"]),")"),boxShadow:"0 0 8px rgba(".concat(o.getIn(["transformation","primaryColor"]),", 0.32)")}),{contentOffset:t.cover.get("collapsed",0),isUserLoggedOut:!n.get("isLoggedIn"),isEmerald:n.getIn(["subscription","isSubscribed"]),transformationStyle:a,showEmerald:i,currentPostMeta:r.get("currentPostMeta")&&(0,Mt.RH)(r.get("currentPostMeta")),availableAccolades:r.getIn(["currentPostMeta","accolades","available"]),accolades:(0,on.fi)(r.getIn(["currentPostMeta","accolades","available"]),r.getIn(["currentPostMeta","post","accolades_counts"]),r.getIn(["currentPostMeta","user","accolades","accolade_id"])),currentUsername:n.get("username",""),userAccoladeId:r.getIn(["currentPostMeta","user","accolades","accolade_id"])}}),{onFavorite:qe.xZ,onVote:qe.Gi,onScrollToComments:Dr.KY,onScrollToCommentsAnalytics:qe.Hy,showGalleryPopOverCTAAction:wr.p3,openDialogAction:F.G3,accoladeRevoked:mt.rT})(no);var oo=n("JPcv"),io=n("xySZ"),ao=n("btPs"),so=n("g1ek"),co=n("qV9W"),lo=n("HDV1"),mo=n("J5Wp"),uo=n("NSLs");function po(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var fo=function(e){u()(n,e);var t=po(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(m()(r),"handleFileInput",(function(e){(0,r.props.startCommentUpload)(e.target.files),r.inputRef.value=""})),v()(m()(r),"componentDidMount",(function(){(0,r.props.onLoad)(r.wrapperRef)})),r.inputRef=C.createRef(),r.wrapperRef=C.createRef(),r}return c()(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.disabled,r=t.title;return C.createElement("div",{className:"CommentUploadButton",disabled:n,ref:function(t){e.wrapperRef=t}},C.createElement(Se.ZP,{className:"icon fill",name:Se.v_,width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:function(t){return e.inputRef.click(t)},title:r}),C.createElement("input",{id:"file-input",className:"CommentUpload-fileInput",type:"file",name:"files",ref:function(t){e.inputRef=t},accept:uo.Hi,onChange:this.handleFileInput,disabled:n}))}}]),n}(C.Component);function go(e){var t=e.className,n=e.copyName,r=e.op,o=(new Date).getTime();return C.createElement("p",{className:t},(0,U.Z)(n,r,o))}fo.defaultProps={title:(0,U.Z)("commentUploadButton")},fo.__docgenInfo={description:"",methods:[{name:"handleFileInput",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"componentDidMount",docblock:null,modifiers:[],params:[],returns:null}],displayName:"CommentUploadButton",props:{title:{defaultValue:{value:"copy('commentUploadButton')",computed:!0},type:{name:"string"},required:!1,description:""},startCommentUpload:{type:{name:"func"},required:!1,description:""},disabled:{type:{name:"bool"},required:!1,description:""},onLoad:{type:{name:"func"},required:!1,description:""}}},go.__docgenInfo={description:"",methods:[],displayName:"CommentFormTitle",props:{className:{type:{name:"string"},required:!1,description:""},copyName:{type:{name:"string"},required:!1,description:""},op:{type:{name:"string"},required:!1,description:""}}};const yo=(0,C.memo)(go);var ho=n("9WAK"),vo=n.n(ho),Co=1,bo=3;function Eo(e){var t=e.openReactionGifs,n=e.setCommentValue,r=C.createElement(Se.ZP,{className:"icon fill Comment-create-prompts-gif",name:Se.gt,"aria-label":(0,U.Z)("GIF"),title:(0,U.Z)("GIF"),width:"26",height:"26",viewBox:"0 1 30 30"}),o=vo()([C.createElement("div",{onClick:function(){return t("cake day","commentAddCakeDay")}},(0,U.Z)("commentAddCakeDay"),r),C.createElement("div",{onClick:function(){return t("dance","commentAddDance")}},(0,U.Z)("commentAddDance"),r)]),i=vo()([C.createElement("div",{onClick:function(){return n((0,U.Z)("commentHappyCakeDayOP"))}},(0,U.Z)("commentHappyCakeDayOP")),C.createElement("div",{onClick:function(){return n((0,U.Z)("commentCakeDayHaveYourCake"))}},(0,U.Z)("commentCakeDayHaveYourCake")),C.createElement("div",{onClick:function(){return n((0,U.Z)("commentCakeDayBringOnTheCake"))}},(0,U.Z)("commentCakeDayBringOnTheCake")),C.createElement("div",{onClick:function(){return n((0,U.Z)("commentCakeDayEatSlice"))}},(0,U.Z)("commentCakeDayEatSlice")),C.createElement("div",{onClick:function(){return n((0,U.Z)("commentCakeDayGoodToHaveYou"))}},(0,U.Z)("commentCakeDayGoodToHaveYou")),C.createElement("div",{onClick:function(){return n((0,U.Z)("commentCakeDayBigBundts"))}},(0,U.Z)("commentCakeDayBigBundts")),C.createElement("div",{onClick:function(){return n((0,U.Z)("commentCakeDayCongrats"))}},(0,U.Z)("commentCakeDayCongrats")),C.createElement("div",{onClick:function(){return n((0,U.Z)("commentCakeDayEatCake"))}},(0,U.Z)("commentCakeDayEatCake")),C.createElement("div",{onClick:function(){return n((0,U.Z)("commentCakeDayRemember"))}},(0,U.Z)("commentCakeDayRemember")),C.createElement("div",{onClick:function(){return n((0,U.Z)("commentCakeDayBestDay"))}},(0,U.Z)("commentCakeDayBestDay"))]);return C.createElement(C.Fragment,null,o.filter((function(e,t){return t<Co})),i.filter((function(e,t){return t<bo})))}function Po(e){var t=e.openReactionGifs,n=e.setCommentValue,r=C.createElement(Se.ZP,{className:"icon fill Comment-create-prompts-gif",name:Se.gt,"aria-label":(0,U.Z)("GIF"),title:(0,U.Z)("GIF"),width:"26",height:"26",viewBox:"0 1 30 30"}),o=vo()([C.createElement("div",{onClick:function(){return t("hello","commentNewOPGif")}},(0,U.Z)("commentNewOPGif"),r),C.createElement("div",{onClick:function(){return t("upvote","commentFirstPostAddAnUpvote")}},(0,U.Z)("commentFirstPostAddAnUpvote"),r),C.createElement("div",{onClick:function(){return t("thumbs up","commentFirstPostThumbsUp")}},(0,U.Z)("commentFirstPostThumbsUp"),r)]),i=vo()([C.createElement("div",{onClick:function(){return n((0,U.Z)("commentFirstPostOPSolid"))}},(0,U.Z)("commentFirstPostOPSolid")),C.createElement("div",{onClick:function(){return n((0,U.Z)("commentFirstPostOPHaveAnUpvote"))}},(0,U.Z)("commentFirstPostOPHaveAnUpvote")),C.createElement("div",{onClick:function(){return n((0,U.Z)("commentNewOPOneOfUs"))}},(0,U.Z)("commentNewOPOneOfUs")),C.createElement("div",{onClick:function(){return n((0,U.Z)("commentFirstPostGreatPostOnFirstTry"))}},(0,U.Z)("commentFirstPostGreatPostOnFirstTry")),C.createElement("div",{onClick:function(){return n((0,U.Z)("commentFirstPostFirstForay"))}},(0,U.Z)("commentFirstPostFirstForay")),C.createElement("div",{onClick:function(){return n((0,U.Z)("commentFirstPostIRemember"))}},(0,U.Z)("commentFirstPostIRemember")),C.createElement("div",{onClick:function(){return n((0,U.Z)("commentFirstPostHappyPosting"))}},(0,U.Z)("commentFirstPostHappyPosting")),C.createElement("div",{onClick:function(){return n((0,U.Z)("commentFirstPostFirstDay"))}},(0,U.Z)("commentFirstPostFirstDay"))]);return C.createElement(C.Fragment,null,o.filter((function(e,t){return t<Co})),i.filter((function(e,t){return t<bo})))}function ko(e){var t=e.openReactionGifs,n=e.setCommentValue,r=C.createElement(Se.ZP,{className:"icon fill Comment-create-prompts-gif",name:Se.gt,"aria-label":(0,U.Z)("GIF"),title:(0,U.Z)("GIF"),width:"26",height:"26",viewBox:"0 1 30 30"}),o=vo()([C.createElement("div",{onClick:function(){return t("welcome","commentNewOPWelcomeGif")}},(0,U.Z)("commentNewOPWelcomeGif"),r),C.createElement("div",{onClick:function(){return t("hello","commentNewOPGif")}},(0,U.Z)("commentNewOPGif"),r)]),i=vo()([C.createElement("div",{onClick:function(){return n((0,U.Z)("commentNewOPOneOfUs"))}},(0,U.Z)("commentNewOPOneOfUs")),C.createElement("div",{onClick:function(){return n((0,U.Z)("commentNewOPHello"))}},(0,U.Z)("commentNewOPHello")),C.createElement("div",{onClick:function(){return n((0,U.Z)("commentNewOPGladYoureHere"))}},(0,U.Z)("commentNewOPGladYoureHere")),C.createElement("div",{onClick:function(){return n("".concat((0,U.Z)("commentNewOPWelcomeToParty")," 👋"))}},(0,U.Z)("commentNewOPWelcomeToParty"),C.createElement("span",{role:"img","aria-label":"wave"}," 👋")),C.createElement("div",{onClick:function(){return n((0,U.Z)("commentNewOPYayYouMadeIt"))}},(0,U.Z)("commentNewOPYayYouMadeIt")),C.createElement("div",{onClick:function(){return n("".concat((0,U.Z)("commentNewOPWelcome")," 👋"))}},(0,U.Z)("commentNewOPWelcome"),C.createElement("span",{role:"img","aria-label":"wave"}," 👋")),C.createElement("div",{onClick:function(){return n((0,U.Z)("commentNewOPWelcomeCupcakes"))}},(0,U.Z)("commentNewOPWelcomeCupcakes")),C.createElement("div",{onClick:function(){return n((0,U.Z)("commentNewOPWelcomePal"))}},(0,U.Z)("commentNewOPWelcomePal")),C.createElement("div",{onClick:function(){return n((0,U.Z)("commentNewOPFitRightIn"))}},(0,U.Z)("commentNewOPFitRightIn"))]);return C.createElement(C.Fragment,null,o.filter((function(e,t){return t<Co})),i.filter((function(e,t){return t<bo})))}function Io(e){var t=e.suggestionGroup,n=e.openReactionGifs,r=e.setCommentValue;return C.createElement("div",{className:"Comment-create-prompts"},t===ut.vu&&C.createElement(ko,{openReactionGifs:n,setCommentValue:r}),t===ut.QW&&C.createElement(Po,{openReactionGifs:n,setCommentValue:r}),t===ut.hc&&C.createElement(Eo,{openReactionGifs:n,setCommentValue:r}))}Eo.propTypes={openReactionGifs:E().func,setCommentValue:E().func},Po.propTypes={openReactionGifs:E().func,setCommentValue:E().func},ko.propTypes={openReactionGifs:E().func,setCommentValue:E().func},Io.__docgenInfo={description:"",methods:[],displayName:"CommentSuggetions",props:{suggestionGroup:{type:{name:"string"},required:!1,description:""},openReactionGifs:{type:{name:"func"},required:!1,description:""},setCommentValue:{type:{name:"func"},required:!1,description:""}}};const No=(0,C.memo)(Io);Eo.__docgenInfo={description:"",methods:[],displayName:"CakeDaySuggestions",props:{openReactionGifs:{type:{name:"func"},required:!1,description:""},setCommentValue:{type:{name:"func"},required:!1,description:""}}},Po.__docgenInfo={description:"",methods:[],displayName:"FirstPostSuggestions",props:{openReactionGifs:{type:{name:"func"},required:!1,description:""},setCommentValue:{type:{name:"func"},required:!1,description:""}}},ko.__docgenInfo={description:"",methods:[],displayName:"NewOpSuggestions",props:{openReactionGifs:{type:{name:"func"},required:!1,description:""},setCommentValue:{type:{name:"func"},required:!1,description:""}}};var qo=n("Bgl3"),So=n("hOZj");function Ao(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var Ro=function(e){u()(n,e);var t=Ao(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(m()(r),"textareaElem",null),v()(m()(r),"adminBadgeElem",null),v()(m()(r),"handleSubmit",(function(e){e.preventDefault();var t=r.state,n=t.value,o=t.hasAdminBadge,i=t.maxChars,a=t.uploadedFile,s=(0,et.IP)(n);(0===s||s>i)&&!a||(0,r.props.onCreate)({comment:n,hasAdminBadge:o,file:a})})),v()(m()(r),"handleClose",(function(e){var t=r.state.value;if(!("click"!==e.type&&(0,et.IP)(t)>0)){var n=r.props.onClose;n&&n()}})),v()(m()(r),"handleKeyDown",(function(e){e.key===q.NW?r.handleSubmit(e):[q.nQ,q.$1].includes(e.key)&&r.handleClose(e)})),v()(m()(r),"onChange",(function(e){var t=r.state.value;r.updateTextareaHeight(r.textareaElem);var n=e?e.target.value:t,o=(0,et.IP)(n),i=Tr.DY?(0,Mr.bb)(o):0;r.setState({characterCount:o,value:n,progressBarPercent:i})})),v()(m()(r),"setFocusIn",(function(){r.setState({focused:!0})})),v()(m()(r),"setFocusOut",(function(){r.setState({focused:!1})})),v()(m()(r),"setTextareaElem",(function(e){r.textareaElem=e})),v()(m()(r),"onCheckboxChange",(function(e){r.setState({hasAdminBadge:e.target.checked})})),v()(m()(r),"updateTextareaHeight",(function(e){e&&(e.style.height="auto",e.style.height="".concat(e.scrollHeight,"px"))})),v()(m()(r),"onGIFSelect",(function(e){var t=r.state.value,n="".concat(t).concat(e),o=(0,et.IP)(n);r.setState({value:n,characterCount:o,hasMedia:!0})})),v()(m()(r),"removeUploadedFile",(function(){var e=r.state,t=e.maxChars,n=e.fileObjURL;(0,N.sl)(n),r.setState({uploadedFile:null,maxChars:t+ue.GJ,fileObjURL:"",hasMedia:!1})})),v()(m()(r),"getReactionPreview",(function(e){var t=(0,so.wI)(e);if(t)return C.createElement(qo.Z,{src:t,onClose:function(){return r.removeReactionMedia(t)}})})),v()(m()(r),"removeReactionMedia",(function(e){var t=r.state.value;r.setState({value:t.replace(e,""),hasMedia:!1},r.onChange)})),v()(m()(r),"focusOnTextArea",(function(){r.textareaElem.focus()})),v()(m()(r),"startCommentUpload",(function(e){if(e&&e[0]){var t=r.state.maxChars;r.setState({uploadedFile:e[0],fileObjURL:(0,N.wX)(e[0]),maxChars:t-ue.GJ,hasMedia:!0})}})),v()(m()(r),"showUploadPopOver",(function(e){var t=r.props,n=t.showPopOver;return(0,t.viewedCommentUploadPopupAction)(),n(wr.Gd,e)})),v()(m()(r),"openReactionGifs",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=r.props,o=n.setReactionGifSearchStringAction,i=n.newOPWelcomeAnalyticsAction;o(e),r.setState({isGIFOpen:!0}),i((0,U.Z)(t))})),v()(m()(r),"setCommentValue",(function(e){var t=r.props.newOPWelcomeAnalyticsAction;r.setState({value:e},r.onChange),t(e)})),v()(m()(r),"setReactionGifPopupVisibility",(function(e){r.setState({isGIFOpen:e})})),r.state={characterCount:0,value:"",focused:!!e.autoFocus,hasAdminBadge:!1,maxChars:ut.Eu,fileObjURL:"",uploadedFile:null,hasMedia:!1,isGIFOpen:!1,progressBarPercent:0},Tr.DY&&(r.initialGradient=(0,Mr.YQ)()),r}return c()(n,[{key:"componentDidMount",value:function(){this.updateTextareaHeight(this.textareaElem)}},{key:"componentDidUpdate",value:function(e){var t=e.isLoading,n=this.props.isLoading,r=this.state.uploadedFile;t&&!n&&(r&&this.removeUploadedFile(),this.setState({characterCount:0,value:"",hasAdminBadge:!1}))}},{key:"renderUploadedFile",value:function(e,t){return C.createElement(C.Fragment,null,C.createElement(qo.Z,{src:t,isVideo:(0,co.Wv)(e.name),onClose:this.removeUploadedFile,isUpload:!0}),C.createElement(qo.r,null))}},{key:"getCommentMedia",value:function(){var e=this.state,t=e.value,n=e.uploadedFile,r=e.fileObjURL;return n?this.renderUploadedFile(n,r):this.getReactionPreview(t)}},{key:"render",value:function(){var e=this.state,t=e.value,n=e.characterCount,r=e.focused,o=e.maxChars,i=e.hasMedia,a=e.isGIFOpen,s=e.progressBarPercent,c=o-n,l=c<0,m=this.props,d=m.placeholder,u=m.isCommunityTeam,p=m.autoFocus,f=m.onClose,g=m.transformationCreateStyles,y=m.isLoading,h=m.shouldShowCommentUploadTooltip,v=m.commentPromptType,b=m.shouldShowSuggestedComments,E=m.opUsername,P=!1;0!==n&&!l||i||(P=!0);var k=Ce()({"Comment-create-textarea":!0,over:l}),I=Ce()({"Comment-create-charCount":!0,over:l}),N=Ce()({"Create-submitBtn":!0,disabled:P}),q=Ce()({"Comment-create-bar":!0,focused:r}),S={};return S=i?{commentUpload:(0,U.Z)("commentPreviewAlreadyExists"),reactionGIF:(0,U.Z)("commentPreviewAlreadyExists")}:{commentUpload:(0,U.Z)("commentUploadButton"),reactionGIF:(0,U.Z)("gifOnHover")},C.createElement("div",{className:"Comment-create",style:g},v!==ut.H&&C.createElement(yo,{className:"Comment-create-titleMessage",copyName:v,op:E}),C.createElement("form",{className:"Comment-create-form",onSubmit:this.handleSubmit},C.createElement("div",{className:q,onClick:this.focusOnTextArea},f&&C.createElement(Se.ZP,{name:Se.dq,onClick:this.handleClose,width:"25",height:"25",viewBox:"0 0 32 32",className:"Comment-create-close"}),C.createElement("textarea",{ref:this.setTextareaElem,autoFocus:p,className:k,value:t,onChange:this.onChange,onKeyDown:this.handleKeyDown,onFocus:this.setFocusIn,onBlur:this.setFocusOut,placeholder:d}),Tr.DY&&C.createElement("div",{className:"april-fools-form",style:{width:"".concat(s,"%"),background:(0,Mr.Gj)(s,this.initialGradient)}}),this.getCommentMedia(),b&&""===t&&C.createElement(No,{suggestionGroup:v,openReactionGifs:this.openReactionGifs,setCommentValue:this.setCommentValue})),C.createElement("div",{className:"Comment-create-summary"},C.createElement("a",{className:"Comment-create-rules",target:"_blank",href:"/rules"},(0,U.Z)("readCommunityRules")),C.createElement("div",{className:"Comment-create-actions"},C.createElement(fo,{disabled:i,startCommentUpload:this.startCommentUpload,title:S.commentUpload,onLoad:h(this.showUploadPopOver)}),C.createElement(mo.Z,{disabled:i,onSelect:this.onGIFSelect,title:S.reactionGIF,setReactionGifPopupVisibility:this.setReactionGifPopupVisibility,isGIFOpen:a}),u&&C.createElement(io.Z,{className:"Comment-create-adminbadge",text:(0,U.Z)("showAdminBadgeCheckbox"),handleOnChange:this.onCheckboxChange,checkmarkPosition:"right"}),C.createElement("div",{className:I},"".concat(c)),C.createElement(je.m6,{onClick:this.handleSubmit,className:N,isLoading:y,label:(0,U.Z)("post")})))))}}]),n}(C.PureComponent);var Do={showPopOver:wr.p3,viewedCommentUploadPopupAction:F.jM,setReactionGifSearchStringAction:So.PK,newOPWelcomeAnalyticsAction:pt.k9};Ro.defaultProps={shouldShowSuggestedComments:!1,shouldShowCommentUploadTooltip:function(){return function(){}},commentPromptType:ut.H},Ro.__docgenInfo={description:"",methods:[{name:"handleSubmit",docblock:null,modifiers:[],params:[{name:"event",type:null}],returns:null},{name:"handleClose",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"handleKeyDown",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"onChange",docblock:null,modifiers:[],params:[{name:"event",type:null}],returns:null},{name:"setFocusIn",docblock:null,modifiers:[],params:[],returns:null},{name:"setFocusOut",docblock:null,modifiers:[],params:[],returns:null},{name:"setTextareaElem",docblock:null,modifiers:[],params:[{name:"domElem",type:null}],returns:null},{name:"onCheckboxChange",docblock:null,modifiers:[],params:[{name:"event",type:null}],returns:null},{name:"updateTextareaHeight",docblock:null,modifiers:[],params:[{name:"textareaElem",type:null}],returns:null},{name:"onGIFSelect",docblock:null,modifiers:[],params:[{name:"GifURL",type:null}],returns:null},{name:"removeUploadedFile",docblock:null,modifiers:[],params:[],returns:null},{name:"renderUploadedFile",docblock:null,modifiers:[],params:[{name:"file",type:null},{name:"fileObjURL",type:null}],returns:null},{name:"getCommentMedia",docblock:null,modifiers:[],params:[],returns:null},{name:"getReactionPreview",docblock:null,modifiers:[],params:[{name:"text",type:null}],returns:null},{name:"removeReactionMedia",docblock:null,modifiers:[],params:[{name:"href",type:null}],returns:null},{name:"focusOnTextArea",docblock:null,modifiers:[],params:[],returns:null},{name:"startCommentUpload",docblock:null,modifiers:[],params:[{name:"files",type:null}],returns:null},{name:"showUploadPopOver",docblock:null,modifiers:[],params:[{name:"wrapperRef",type:null}],returns:null},{name:"openReactionGifs",docblock:null,modifiers:[],params:[{name:"search",type:null},{name:"copyName",type:null}],returns:null},{name:"setCommentValue",docblock:null,modifiers:[],params:[{name:"value",type:null}],returns:null},{name:"setReactionGifPopupVisibility",docblock:null,modifiers:[],params:[{name:"isGIFOpen",type:null}],returns:null}],displayName:"CommentForm",props:{shouldShowSuggestedComments:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},shouldShowCommentUploadTooltip:{defaultValue:{value:"() => () => {}",computed:!1},type:{name:"func"},required:!1,description:""},commentPromptType:{defaultValue:{value:"COMMENT_PROMPT_NONE",computed:!0},type:{name:"enum",value:[{value:"import {\n    MAX_CHARS_IN_COMMENT,\n    COMMENT_PROMPT_NEW_OP,\n    COMMENT_PROMPT_FIRST_POST,\n    COMMENT_PROMPT_CAKE_DAY,\n    COMMENT_PROMPT_NONE,\n} from 'constants/comments';",computed:!0},{value:"import {\n    MAX_CHARS_IN_COMMENT,\n    COMMENT_PROMPT_NEW_OP,\n    COMMENT_PROMPT_FIRST_POST,\n    COMMENT_PROMPT_CAKE_DAY,\n    COMMENT_PROMPT_NONE,\n} from 'constants/comments';",computed:!0},{value:"import {\n    MAX_CHARS_IN_COMMENT,\n    COMMENT_PROMPT_NEW_OP,\n    COMMENT_PROMPT_FIRST_POST,\n    COMMENT_PROMPT_CAKE_DAY,\n    COMMENT_PROMPT_NONE,\n} from 'constants/comments';",computed:!0},{value:"import {\n    MAX_CHARS_IN_COMMENT,\n    COMMENT_PROMPT_NEW_OP,\n    COMMENT_PROMPT_FIRST_POST,\n    COMMENT_PROMPT_CAKE_DAY,\n    COMMENT_PROMPT_NONE,\n} from 'constants/comments';",computed:!0}]},required:!1,description:""},onCreate:{type:{name:"func"},required:!0,description:""},onClose:{type:{name:"func"},required:!1,description:""},placeholder:{type:{name:"string"},required:!1,description:""},isCommunityTeam:{type:{name:"bool"},required:!1,description:""},autoFocus:{type:{name:"bool"},required:!1,description:""},transformationCreateStyles:{type:{name:"object"},required:!1,description:""},isLoading:{type:{name:"bool"},required:!1,description:""},showPopOver:{type:{name:"func"},required:!1,description:""},viewedCommentUploadPopupAction:{type:{name:"func"},required:!1,description:""},setReactionGifSearchStringAction:{type:{name:"func"},required:!0,description:""},newOPWelcomeAnalyticsAction:{type:{name:"func"},required:!0,description:""},level:{type:{name:"number"},required:!0,description:""},opUsername:{type:{name:"string"},required:!1,description:""}}};const wo=(0,D.$j)((function(e,t){var n=e.ui,r=e.user,o=e.ad,i=e.postsData,a={};o.getIn(["transformation","enabled"])&&(a={borderColor:"rgb(".concat(o.getIn(["transformation","primaryColor"]),")"),boxShadow:"0 0 8px rgba(".concat(o.getIn(["transformation","primaryColor"]),", 0.32)")});var s=(0,lo.E9)(r,i,t.level);return{shouldShowCommentUploadTooltip:function(e){return n.emeraldFeature.get("viewedCommentUploadTooltip")?function(){}:e},isCommunityTeam:-1!==r.get("roles").indexOf(ao.Be),isLoading:n.spinner.get("createPostComment")&&n.spinner.get("createPostComment").loading,transformationCreateStyles:a,commentPromptType:(0,lo.E9)(r,i,t.level),shouldShowSuggestedComments:s!==ut.H&&(0,lo._X)(i),opUsername:i.getIn(["currentPost","account","username"]),placeholder:(0,U.Z)("commentWrite")}}),Do)(Ro);var To=n("jyQV");function Mo(e){var t=e.postId,n=e.commentId,r=e.parentId,o=e.username,i=e.currentUsername,a=e.muteUserData,s=e.setDeleteCommentData,c=e.openDeleteCommentDialog,l=e.isLoggedIn,m=e.history,d=i&&o.toLowerCase()===i.toLowerCase(),u=l&&!d&&C.createElement("button",{type:"button",onClick:function(e){e.stopPropagation(),a(o,He.Pb,n)}},C.createElement(Se.ZP,{className:"icon",name:Se.M6,width:"32",height:"32",fillColor:"#B4B9C2"}),C.createElement("span",{className:"label"},(0,U.Z)("commentMuteUser"))),p=l&&d&&C.createElement("button",{type:"button",onClick:function(e){e.stopPropagation(),s(n),c()}},C.createElement(Se.ZP,{className:"icon",name:Se.xj,width:"32",height:"32",fillColor:"#B4B9C2"}),C.createElement("span",{className:"label"},(0,U.Z)("commentDelete"))),f=C.createElement("button",{type:"button",onClick:function(e){e.stopPropagation(),m.push((0,we.SY)(t,n))}},C.createElement(Se.ZP,{className:"icon stroke",name:Se.Mi,width:"32",height:"32",fillColor:"#B4B9C2"}),C.createElement("span",{className:"label"},(0,U.Z)("commentPermalink"))),g=!!r&&C.createElement("button",{type:"button",onClick:function(e){e.stopPropagation(),m.push((0,we.S0)(t,n))}},C.createElement(Se.ZP,{className:"icon stroke",name:Se.Mi,width:"32",height:"32",fillColor:"#B4B9C2"}),C.createElement("span",{className:"label"},(0,U.Z)("commentContext")));return C.createElement(jt.fD,{className:"CommentDropdown-menu Dropdown--btn",dropdownIcon:C.createElement(Se.ZP,{name:Se.D1,width:"24",height:"24"})},f,g,u,p,C.createElement(Kt,{reportType:zt.H6,id:n,isMature:!1}))}Mo.defaultProps={currentUsername:""};Mo.__docgenInfo={description:"",methods:[],displayName:"CommentDropDownMenu",props:{currentUsername:{defaultValue:{value:"''",computed:!1},type:{name:"string"},required:!1,description:""},postId:{type:{name:"string"},required:!0,description:""},commentId:{type:{name:"number"},required:!0,description:""},username:{type:{name:"string"},required:!0,description:""},muteUserData:{type:{name:"func"},required:!0,description:""},openDeleteCommentDialog:{type:{name:"func"},required:!0,description:""},setDeleteCommentData:{type:{name:"func"},required:!0,description:""},history:{type:{name:"object"},required:!0,description:""},isLoggedIn:{type:{name:"bool"},required:!1,description:""},parentId:{type:{name:"number"},required:!1,description:""}}};const xo=(0,Ne.qC)((0,D.$j)((function(e){var t=e.user;return{isLoggedIn:!!t.get("isLoggedIn"),currentUsername:t.get("username","")}}),{muteUserData:ke.Y5,openDeleteCommentDialog:pt.E0,setDeleteCommentData:pt.x9}),P.Z)(Mo);function Zo(e){var t=e.avatar,n=e.username,r=e.isSubComment,o=e.onUserProfileClick;return C.createElement("div",{className:"GalleryComment-avatar-bar"},C.createElement("div",{className:"avatar"},C.createElement(Le,{username:n,onClick:o,useButton:!0},C.createElement("span",{style:{backgroundImage:"url(".concat(t,")")},title:n}))),r&&C.createElement("div",{className:"verticalLine"}))}function Oo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}Zo.__docgenInfo={description:"",methods:[],displayName:"CommentAvatarBar",props:{avatar:{type:{name:"string"},required:!0,description:""},username:{type:{name:"string"},required:!0,description:""},isSubComment:{type:{name:"bool"},required:!1,description:""},onUserProfileClick:{type:{name:"func"},required:!0,description:""}}};var Uo=function(e){u()(n,e);var t=Oo(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(m()(r),"randomVector",(function(){return 2*Math.random()-1})),v()(m()(r),"createParticles",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!r.shouldCreateParticles)return e;for(var t=it()(e),n=0;n<6;n++)t.push({x:r.canvas.width/2+100*r.randomVector(),y:r.canvas.height/2,size:Math.floor(Math.random()*Math.floor(8)),opacity:1,vectorX:r.randomVector(),vectorY:r.randomVector()});return t})),v()(m()(r),"drawParticles",(function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=r.context,n=it()(e),o=0;o<n.length;o++){t.beginPath(),t.arc(n[o].x,n[o].y,.5*n[o].size,0,2*Math.PI);var i=t.createRadialGradient(n[o].x,n[o].y,.5*n[o].size,n[o].x+.1,n[o].y,.1);i.addColorStop(.2143,"rgba(45, 217, 244, ".concat(n[o].opacity,")")),i.addColorStop(1,"rgba(22, 191, 118, ".concat(n[o].opacity,")")),t.fillStyle=i,t.filter="none",t.closePath(),t.fill(),t.beginPath(),t.arc(n[o].x,n[o].y,.5*n[o].size+2,0,2*Math.PI),t.fillStyle="rgba(67, 208, 189, ".concat(n[o].opacity,")"),t.filter="blur(".concat(8,"px)"),t.closePath(),t.fill()}return n})),v()(m()(r),"moveParticles",(function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=it()(e),n=0;n<t.length;n++)t[n].x+=.8*t[n].vectorX,t[n].y+=.8*t[n].vectorY,t[n].size=Math.max(0,t[n].size-.005),t[n].opacity=Math.max(0,t[n].opacity-.012),t[n].opacity<=0&&t.splice(n,1);return t})),v()(m()(r),"clearFrame",(function(){var e=r.context;e&&e.clearRect&&e.clearRect(0,0,r.canvas.width,r.canvas.height)})),v()(m()(r),"draw",(function(){if(r.counter++,r.shouldAnimate){if(r.clearFrame(),!r.particles.length&&!r.shouldCreateParticles)return r.stopAnimation(!0);r.particles=r.moveParticles(r.particles),r.drawParticles(r.particles),r.lastFrameId=(0,N.U7)((function(){return r.draw()}))}})),v()(m()(r),"startAnimation",(function(e){if(r.counter=0,!r.canvas)return e;r.stopAnimation(!0),r.shouldAnimate=!0,r.shouldCreateParticles=!0,r.particles=[],r.particles=r.createParticles(r.particles),r.animationTimer=(0,N.Zi)((function(){r.particles=r.createParticles(r.particles)}),250),r.draw(r.particles)})),v()(m()(r),"stopAnimation",(function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return(0,N.Wx)(r.lastFrameId),r.clearFrame(),r.particles=[],r.shouldAnimate=!1,void(0,N.cv)(r.animationTimer);r.shouldCreateParticles=!1})),r.canvas=(0,C.createRef)(),r.context=null,r.particles=[],r.animationTimer=null,r.lastFrameId=null,r.shouldAnimate=!1,r.shouldCreateParticles=!0,r}return c()(n,[{key:"componentDidMount",value:function(){this.context=this.canvas.getContext("2d")}},{key:"componentWillUnmount",value:function(){this.stopAnimation(!0)}},{key:"render",value:function(){var e=this,t=this.props.rank;return C.createElement("div",{className:"badge-best-wrapper"},C.createElement("canvas",{className:"badge-best-animation",ref:function(t){e.canvas=t}}),C.createElement(De.Z,{to:"/leaderboard",className:"badge-best",onMouseEnter:this.startAnimation,onMouseLeave:function(){return e.stopAnimation()}},C.createElement("span",null,(0,U.Z)("bestComment",t))))}}]),n}(C.PureComponent);function Lo(e){var t=e.postId,n=e.username,r=e.commentId,o=e.parentId,i=e.hasOpBadge,a=e.hasAdminBadge,s=e.avatar,c=e.onAvatarProfileClick,l=e.onUserProfileClick,m=e.createdAtDate,d=e.platform,u=e.isSubComment,p=e.rank,f=e.onGiveEmerald,g=e.isUserLoggedIn,y=e.currentUsername,h=e.isPromotedPost,v=Ce()({"byline-badge":!0,"byline-badge-admin":a,"byline-badge-op":i&&!a}),b=new Date(m),E=(0,et.y8)(d);return C.createElement("div",{className:"GalleryComment-byLine"},C.createElement("div",{className:"Meta"},C.createElement(Zo,{username:n,avatar:s,isSubComment:u,onUserProfileClick:c}),C.createElement(Le,{className:"author-name",username:n,onClick:l}),(i||a)&&C.createElement("div",{className:v},a&&C.createElement("a",{className:"admin-badge-link",href:To.bW,target:"_blank",rel:"noopener noreferrer"},C.createElement(Se.ZP,{name:Se.Wp,width:"16",height:"16"}),C.createElement("span",{className:"byline-badge-text"},(0,U.Z)("adminBadge"))),i&&a&&C.createElement("div",{className:"delimiter byline-badge-text"},"|"),i&&C.createElement("span",{className:"byline-badge-text"},"OP")),C.createElement("span",{className:"date",title:b},C.createElement("span",{className:"delimiter"},"•"),(0,tt.VG)(b," ago"),E&&C.createElement(C.Fragment,null," via ",C.createElement("a",{className:"platform bold",href:"/apps"},E))),C.createElement(Lt.Z,{currentUsername:y,itemUsername:n,isUserLoaded:!0,isPromoted:h,isEnabled:ue.nO},C.createElement(Ft.Z,{isUserLoggedIn:g,showTitle:!0,onClick:f,customClasses:"GiveEmeraldButton-secondary"})),p&&C.createElement(Uo,{rank:p}),C.createElement(xo,{postId:t,commentId:r,parentId:o,username:n})))}function Fo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}Uo.__docgenInfo={description:"",methods:[{name:"randomVector",docblock:null,modifiers:[],params:[],returns:null},{name:"createParticles",docblock:null,modifiers:[],params:[{name:"particles",type:null}],returns:null},{name:"drawParticles",docblock:null,modifiers:[],params:[{name:"particles",type:null}],returns:null},{name:"moveParticles",docblock:null,modifiers:[],params:[{name:"particles",type:null}],returns:null},{name:"clearFrame",docblock:null,modifiers:[],params:[],returns:null},{name:"draw",docblock:null,modifiers:[],params:[],returns:null},{name:"startAnimation",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"stopAnimation",docblock:null,modifiers:[],params:[{name:"immediately",type:null}],returns:null}],displayName:"CommentLeaderboardBadge",props:{rank:{type:{name:"number"},required:!0,description:""}}},Lo.__docgenInfo={description:"",methods:[],displayName:"CommentByline",props:{postId:{type:{name:"string"},required:!0,description:""},avatar:{type:{name:"string"},required:!0,description:""},username:{type:{name:"string"},required:!0,description:""},createdAtDate:{type:{name:"string"},required:!0,description:""},platform:{type:{name:"string"},required:!0,description:""},commentId:{type:{name:"number"},required:!0,description:""},hasOpBadge:{type:{name:"bool"},required:!1,description:""},hasAdminBadge:{type:{name:"bool"},required:!1,description:""},onAvatarProfileClick:{type:{name:"func"},required:!0,description:""},onUserProfileClick:{type:{name:"func"},required:!0,description:""},parentId:{type:{name:"number"},required:!1,description:""},rank:{type:{name:"number"},required:!1,description:""},isSubComment:{type:{name:"bool"},required:!1,description:""},onGiveEmerald:{type:{name:"func"},required:!0,description:""},isUserLoggedIn:{type:{name:"bool"},required:!0,description:""},currentUsername:{type:{name:"string"},required:!0,description:""},isPromotedPost:{type:{name:"bool"},required:!0,description:""}}};var _o=function(e){u()(n,e);var t=Fo(n);function n(){var e;a()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),v()(m()(e),"collapseReplies",(function(t){var n=e.props.toggleReplies;t.stopPropagation(),n(!1)})),v()(m()(e),"extendReplies",(function(t){var n=e.props.toggleReplies;t.stopPropagation(),n(!0)})),e}return c()(n,[{key:"render",value:function(){var e=this.props,t=e.replies,n=e.isExpanded,r=e.onReply,o=e.showReply,i=e.vote,a=e.pointCount,s=e.hasMoreComments,c=e.loadMore,l=e.onVote;return C.createElement("div",{className:"GalleryComment-actions"},C.createElement("div",{className:"vote-btn upvote actions-btn",onClick:function(e){return l(e,i===Qe.UP?Qe.gZ:Qe.UP)},title:(0,U.Z)("upvoteHint")},C.createElement(It.NN,{selected:i===Qe.UP,isMini:!0,strokeColor:"#B4B9C2"})),C.createElement("div",{className:"points ".concat(i)},"".concat((0,et.$N)(a))),C.createElement("div",{className:"vote-btn down actions-btn",onClick:function(e){return l(e,i===Qe.WV?Qe.gZ:Qe.WV)},title:(0,U.Z)("downvoteHint")},C.createElement(It.AI,{selected:i===Qe.WV,isMini:!0,strokeColor:"#B4B9C2"})),!s&&C.createElement(C.Fragment,null,C.createElement("button",{type:"button",onClick:this.collapseReplies,className:Ce()({hide:!n,"toggle-replies":!0,"actions-btn":!0})},C.createElement(Se.ZP,{name:Se.Lw,width:"16",height:"16",fillColor:"#B4B9C2",viewBox:"0 1 16 16"}),(0,U.Z)("commentCollapseReplies")),C.createElement("button",{type:"button",onClick:this.extendReplies,className:Ce()({hide:n||!t.size,"toggle-replies":!0,"actions-btn":!0})},C.createElement(Se.ZP,{name:Se.pe,width:"16",height:"16",fillColor:"#B4B9C2",viewBox:"0 1 16 16"}),(0,U.Z)("commentRepliesCount",t.size))),s&&C.createElement("button",{type:"button",className:"load-more actions-btn",onClick:c},(0,U.Z)("loadMore")),o&&C.createElement("button",{type:"button",className:"reply actions-btn",onClick:r},C.createElement(Se.ZP,{name:Se.AY,width:"16",height:"16",strokeColor:"#FFFFFF"}),(0,U.Z)("commentReply")))}}]),n}(C.PureComponent);function Bo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}_o.__docgenInfo={description:"",methods:[{name:"collapseReplies",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"extendReplies",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null}],displayName:"CommentActions",props:{toggleReplies:{type:{name:"func"},required:!0,description:""},replies:{type:{name:"object"},required:!0,description:""},isExpanded:{type:{name:"bool"},required:!1,description:""},onReply:{type:{name:"func"},required:!0,description:""},showReply:{type:{name:"bool"},required:!0,description:""},onVote:{type:{name:"func"},required:!0,description:""},vote:{type:{name:"string"},required:!1,description:""},pointCount:{type:{name:"number"},required:!1,description:""},loadMore:{type:{name:"func"},required:!1,description:""},hasMoreComments:{type:{name:"bool"},required:!1,description:""}}};var Go=function(e){u()(n,e);var t=Bo(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(m()(r),"toggleBadComments",(function(){r.setState((function(e){return{expandBadComments:!e.expandBadComments}}))})),v()(m()(r),"renderBadComments",(function(){var e=r.props.replies.filter((function(e){return e.get("point_count")<0}));return e.size?C.createElement("div",null,C.createElement("button",{className:"toggle-bad-comments",type:"button",onClick:r.toggleBadComments},C.createElement(Se.ZP,{name:r.state.expandBadComments?Se.Lw:Se.pe,width:"16",height:"16"}),C.createElement("span",null,(0,U.Z)("commentToggleBadReplies",r.state.expandBadComments))),r.state.expandBadComments&&e.map((function(e){return C.createElement(Wo,{key:e.get("id"),comment:e,isSubComment:!0,onCreateComment:r.props.onCreateComment})}))):""})),r.state={expandBadComments:!1},r}return c()(n,[{key:"render",value:function(){var e=this;return C.createElement("div",{className:"GalleryComment-replies"},this.props.replies.filter((function(e){return e.get("point_count")>=0})).map((function(t){return C.createElement(Wo,{key:t.get("id"),comment:t,isSubComment:!0,level:e.props.level,expandMode:e.props.expandMode,onCreateComment:e.props.onCreateComment})})),this.renderBadComments())}}]),n}(C.Component);function Vo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}Go.__docgenInfo={description:"",methods:[{name:"toggleBadComments",docblock:null,modifiers:[],params:[],returns:null},{name:"renderBadComments",docblock:null,modifiers:[],params:[],returns:null}],displayName:"CommentReplies",props:{replies:{type:{name:"object"},required:!0,description:""},isSubComment:{type:{name:"bool"},required:!1,description:""},level:{type:{name:"number"},required:!0,description:""},expandMode:{type:{name:"number"},required:!0,description:""},onCreateComment:{type:{name:"func"},required:!0,description:""}}};var Ho=function(e){u()(n,e);var t=Vo(n);function n(e){var r;a()(this,n),r=t.call(this,e),v()(m()(r),"isCommentExpanded",(function(e){return e.expandMode===ut.rc&&e.level<ut.nF&&e.comment.get("comments").size>0})),v()(m()(r),"hasMoreComments",(function(){var e=r.props,t=e.level,n=e.comment;return t===ut.nF&&(n.get("comments").size>0||n.get("next"))})),v()(m()(r),"toggleReplies",(function(e){r.setState({expanded:e})})),v()(m()(r),"onReply",(function(e){var t=r.props,n=t.isUserLoggedOut,o=t.showPopOver;if(e.stopPropagation(),n)return o(wr.v3,e.currentTarget);r.setState({reply:!0})})),v()(m()(r),"onCloseReply",(function(){r.setState({reply:!1})})),v()(m()(r),"onCreate",(function(e){var t=e.comment,n=e.hasAdminBadge,o=e.file,i=r.props;(0,i.onCreateComment)({comment:t,hasAdminBadge:n,parentId:i.comment.get("id"),file:o}),r.setState({reply:!1,expanded:!0})})),v()(m()(r),"onVote",(function(e,t){var n=r.props,o=n.comment,i=n.onVote,a=n.isUserLoggedOut,s=n.showPopOver,c=n.vote;return e.stopPropagation(),a?s(t===Qe.UP?wr.jD:wr.pl,e.currentTarget):i(o.get("id"),t,c)})),v()(m()(r),"onProfileClick",(function(e){var t=r.props,n=t.comment;return(0,t.onProfileClick)(n.get("account_id"),e)})),v()(m()(r),"onUserProfileClick",(function(){return r.onProfileClick("Username Comment")})),v()(m()(r),"onAvatarProfileClick",(function(){return r.onProfileClick("Avatar Comment")})),v()(m()(r),"onContainerClick",(function(e){var t=r.state.expanded;r.props.comment.get("comments").size>0&&"A"!==e.target.tagName&&r.setState({expanded:!t})})),v()(m()(r),"loadMore",(function(e){var t=r.props,n=t.comment,o=t.history;e.stopPropagation(),o.push((0,we.S0)(n.get("post_id"),n.get("id")))})),v()(m()(r),"onGiveEmerald",(function(){var e=r.props,t=e.giveEmeraldData,n=e.comment,o=n.getIn(["account"]);t({recipientUsername:o.get("username"),recipientId:o.get("id"),source:Xe.BD,sourceURL:ue.FH+(0,we.SY)(n.get("post_id"),n.get("id")),postId:n.get("post_id"),commentId:n.get("id")})})),v()(m()(r),"shouldShowAprilFoolsBorder",(function(){var e=r.props.isTopComment;return Tr.DY&&e}));var o=e.isTopComment;return r.state={expanded:r.isCommentExpanded(r.props),reply:!1},Tr.DY&&o&&(r.initialGradient=(0,Mr.YQ)()),r}return c()(n,[{key:"componentDidUpdate",value:function(e){var t=this.props.expandMode,n=this.state.expanded;e.expandMode!==t&&(n&&t<=ut.WF?this.setState({expanded:!1}):!n&&this.isCommentExpanded(this.props)&&this.setState({expanded:!0}))}},{key:"render",value:function(){var e=this.props,t=e.comment,n=e.isSubComment,r=e.opUsername,o=e.level,i=e.displayUsername,a=e.vote,s=e.expandMode,c=e.onCreateComment,l=e.postMedia,m=e.isUserLoggedOut,d=e.currentUsername,u=e.isPromotedPost,p=this.state,f=p.expanded,g=p.reply,y=t.getIn(["account","username"]),h=t.get("comments"),v=Ce()({"GalleryComment-wrapper":!0,"comment-op":y===r,"comment-admin":t.get("has_admin_badge")}),b=this.hasMoreComments();return C.createElement("div",{className:"GalleryComment"},C.createElement("div",{className:v},this.shouldShowAprilFoolsBorder()&&C.createElement("div",{className:"april-fools-comment",style:{background:"".concat((0,Mr.pT)(a,this.initialGradient)," border-box")}}),C.createElement("div",{className:"hover-background"}),C.createElement("div",{className:"GalleryComment-container",onClick:this.onContainerClick},C.createElement("div",{className:"GalleryComment-content"},C.createElement(Lo,{username:y,hasOpBadge:y===r,hasAdminBadge:t.get("has_admin_badge"),onAvatarProfileClick:this.onAvatarProfileClick,onUserProfileClick:this.onUserProfileClick,isSubComment:n,commentId:t.get("id"),parentId:t.get("parent_id"),postId:t.get("post_id"),platform:t.get("platform"),createdAtDate:t.get("created_at"),avatar:t.getIn(["account","avatar"]),rank:t.get("rank"),onGiveEmerald:this.onGiveEmerald,isUserLoggedIn:!m,currentUsername:d,isPromotedPost:u}),C.createElement("div",{className:"GalleryComment-body"},C.createElement(fn.C,{expandlink:"true",opUsername:r,isLinkifyTargetMedia:!0,postMedia:l},t.get("comment"))),C.createElement(_o,{replies:h,toggleReplies:this.toggleReplies,isExpanded:f,onReply:this.onReply,showReply:!g&&!b,vote:a,onVote:this.onVote,pointCount:t.get("point_count"),hasMoreComments:b,loadMore:this.loadMore})))),g&&C.createElement("div",{className:"GalleryComment-reply"},C.createElement("div",{className:"avatar"},C.createElement(Ut.Z,{displayUsername:i}),C.createElement("div",{className:"verticalLine"})),C.createElement(wo,{onCreate:this.onCreate,onClose:this.onCloseReply,placeholder:(0,U.Z)("commentWriteReply"),level:o,autoFocus:!0})),f&&!b&&C.createElement(Go,{replies:h,level:o+1,expandMode:s,onCreateComment:c}))}}]),n}(C.Component);Ho.defaultProps={level:1},Ho.__docgenInfo={description:"",methods:[{name:"isCommentExpanded",docblock:null,modifiers:[],params:[{name:"props",type:null}],returns:null},{name:"hasMoreComments",docblock:null,modifiers:[],params:[],returns:null},{name:"toggleReplies",docblock:null,modifiers:[],params:[{name:"expand",type:null}],returns:null},{name:"onReply",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"onCloseReply",docblock:null,modifiers:[],params:[],returns:null},{name:"onCreate",docblock:null,modifiers:[],params:[{name:"{\n    comment: commentString,\n    hasAdminBadge,\n    file,\n}",type:null}],returns:null},{name:"onVote",docblock:null,modifiers:[],params:[{name:"e",type:null},{name:"vote",type:null}],returns:null},{name:"onProfileClick",docblock:null,modifiers:[],params:[{name:"location",type:null}],returns:null},{name:"onUserProfileClick",docblock:null,modifiers:[],params:[],returns:null},{name:"onAvatarProfileClick",docblock:null,modifiers:[],params:[],returns:null},{name:"onContainerClick",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"loadMore",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"onGiveEmerald",docblock:null,modifiers:[],params:[],returns:null},{name:"shouldShowAprilFoolsBorder",docblock:null,modifiers:[],params:[],returns:null}],displayName:"Comment",props:{level:{defaultValue:{value:"1",computed:!1},type:{name:"number"},required:!1,description:""},comment:{type:{name:"object"},required:!0,description:""},isSubComment:{type:{name:"bool"},required:!1,description:""},isTopComment:{type:{name:"bool"},required:!1,description:""},onVote:{type:{name:"func"},required:!0,description:""},showPopOver:{type:{name:"func"},required:!0,description:""},opUsername:{type:{name:"string"},required:!1,description:""},isUserLoggedOut:{type:{name:"bool"},required:!1,description:""},expandMode:{type:{name:"number"},required:!0,description:""},onCreateComment:{type:{name:"func"},required:!0,description:""},displayUsername:{type:{name:"string"},required:!0,description:""},currentUsername:{type:{name:"string"},required:!0,description:""},vote:{type:{name:"string"},required:!1,description:""},onProfileClick:{type:{name:"func"},required:!0,description:""},history:{type:{name:"object"},required:!0,description:""},postMedia:{type:{name:"object"},required:!0,description:""},giveEmeraldData:{type:{name:"func"},required:!0,description:""},isPromotedPost:{type:{name:"bool"},required:!0,description:""}}};const Wo=(0,Ne.qC)((0,D.$j)((function(e,t){var n=e.postsData,r=e.user,o=t.comment;return{opUsername:n.getIn(["currentPost","account","username"]),postMedia:n.getIn(["currentPost","media"]),isPromotedPost:n.getIn(["currentPost","isAd"]),vote:n.getIn(["currentPostMeta","user","comment_votes","".concat(o.get("id"))]),isUserLoggedOut:!r.get("isLoggedIn"),displayUsername:r.get("displayUsername")||"",currentUsername:r.get("username")||""}}),{onVote:pt.bj,showPopOver:wr.p3,onProfileClick:ke._K,giveEmeraldData:mt.Sv}),P.Z)(Ho);function jo(e){var t=e.count,n=void 0===t?1:t;return C.createElement("div",{className:"CommentsList-Placeholder-wrapper"},function(){for(var e=[],t=0;t<n;t++)e.push(C.createElement("div",{key:t,className:"CommentsList-Placeholder"},C.createElement("div",{className:"CommentsList-Placeholder-avatar-wrapper"},C.createElement("div",{className:"CommentsList-Placeholder-avatar"})),C.createElement("div",{className:"CommentsList-Placeholder-line-wrapper"},C.createElement("div",{className:"CommentsList-Placeholder-line"}),C.createElement("div",{className:"CommentsList-Placeholder-line"}),C.createElement("div",{className:"CommentsList-Placeholder-line"}),C.createElement("div",{className:"CommentsList-Placeholder-line"}))));return e}())}function zo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}jo.__docgenInfo={description:"",methods:[],displayName:"CommentsPlaceholder",props:{count:{defaultValue:{value:"1",computed:!1},type:{name:"number"},required:!1,description:""}}};var Yo=function(e){u()(n,e);var t=zo(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(m()(r),"toggleBadComments",(function(){r.setState((function(e){return{expandBadComments:!e.expandBadComments}}))})),v()(m()(r),"shouldRefetchComments",(function(e){var t=r.props,n=t.postId,o=t.commentId,i=t.parentContext,a=t.isUserLoaded;return e.postId!==n||e.commentId!==o||e.parentContext!==i||e.isUserLoaded!==a})),v()(m()(r),"loadMoreHandler",(function(){var e=r.props,t=e.commentsSort,n=e.postCommentsNextPageLink;(0,e.fetchComments)(t,n)})),v()(m()(r),"renderEmptyState",(function(){return C.createElement("div",{className:"CommentsList-comments--empty"},C.createElement(ze.ZP,{name:ze.nl,width:92}),C.createElement("span",null,(0,U.Z)("beTheFirstToComment")))})),v()(m()(r),"renderBadComments",(function(e){var t=r.props,n=t.expandMode,o=t.onCreateComment,i=r.state.expandBadComments,a=e.filter((function(e){return e.get("point_count")<0}));return a.size?C.createElement("div",null,C.createElement("button",{className:"toggle-bad-comments",type:"button",onClick:r.toggleBadComments},C.createElement(Se.ZP,{name:i?Se.Lw:Se.pe,width:"16",height:"16"}),C.createElement("span",null,(0,U.Z)("commentToggleBadComments",i))),i&&a.entrySeq().map((function(e){var t=Ot()(e,2),r=t[0],i=t[1];return C.createElement(Wo,{key:r,comment:i,expandMode:n,onCreateComment:o})}))):""})),v()(m()(r),"renderLoadingComponent",(function(){var e=r.props,t=e.isMainContentReady,n=e.isLoading,o=e.isAllCommentsLoaded,i=e.parentContext;return t&&!n?!o&&!i&&C.createElement(An,{message:(0,U.Z)("loadMoreComments"),onClick:r.loadMoreHandler}):C.createElement(jo,{count:3})})),r.commentsListContainer=(0,C.createRef)(),r.state={expandBadComments:!1,commentsListContainerStyles:{}},r}return c()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.comments,n=e.fetchComments;t.size||n()}},{key:"componentWillUnmount",value:function(){(0,this.props.resetPostCommentsAction)()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.resetPostCommentsAction,r=t.fetchComments;this.shouldRefetchComments(e)&&(n(),r())}},{key:"render",value:function(){var e=this,t=this.props,n=t.comments,r=t.postId,o=t.isMainContentReady,i=t.isLoading,a=t.commentId,s=t.expandMode,c=t.onCreateComment,l=this.state.commentsListContainerStyles;return C.createElement("div",{className:"CommentsList-comments",ref:function(t){e.commentsListContainer=t},style:l},a&&C.createElement("div",{className:"single-comment-thread"},C.createElement("span",null,(0,U.Z)("viewingSingleComment")),C.createElement("p",null,C.createElement(De.Z,{to:"/".concat(W.yg,"/").concat(r),className:"load-more"},(0,U.Z)("seeRestComments")))),C.createElement("div",{className:"CommentsList-comments--container"},o&&n.size>0&&n.filter((function(e){return e.get("point_count")>=0})).entrySeq().map((function(e,t){var n=Ot()(e,2),r=n[0],o=n[1];return C.createElement(Wo,{key:r,comment:o,expandMode:s,isTopComment:t<Tr.IQ,onCreateComment:c})})),o&&this.renderBadComments(n),!n.size&&!i&&this.renderEmptyState()),C.createElement("div",{className:"CommentsList-comments--loading"},this.renderLoadingComponent()))}}]),n}(C.Component);Yo.__docgenInfo={description:"",methods:[{name:"toggleBadComments",docblock:null,modifiers:[],params:[],returns:null},{name:"shouldRefetchComments",docblock:null,modifiers:[],params:[{name:"prevProps",type:null}],returns:null},{name:"loadMoreHandler",docblock:null,modifiers:[],params:[],returns:null},{name:"renderEmptyState",docblock:null,modifiers:[],params:[],returns:null},{name:"renderBadComments",docblock:null,modifiers:[],params:[{name:"comments",type:null}],returns:null},{name:"renderLoadingComponent",docblock:null,modifiers:[],params:[],returns:null}],displayName:"CommentsList",props:{postId:{type:{name:"string"},required:!0,description:""},comments:{type:{name:"object"},required:!0,description:""},resetPostCommentsAction:{type:{name:"func"},required:!0,description:""},commentsSort:{type:{name:"string"},required:!0,description:""},commentSortSelectedAction:{type:{name:"func"},required:!0,description:""},postCommentsNextPageLink:{type:{name:"string"},required:!1,description:""},id:{type:{name:"string"},required:!0,description:""},isLoading:{type:{name:"bool"},required:!1,description:""},isAllCommentsLoaded:{type:{name:"bool"},required:!1,description:""},isMainContentReady:{type:{name:"bool"},required:!1,description:""},isUserLoggedIn:{type:{name:"bool"},required:!0,description:""},isUserLoaded:{type:{name:"bool"},required:!0,description:""},commentId:{type:{name:"string"},required:!1,description:""},parentContext:{type:{name:"number"},required:!1,description:""},expandMode:{type:{name:"number"},required:!0,description:""},onCreateComment:{type:{name:"func"},required:!0,description:""},fetchComments:{type:{name:"func"},required:!0,description:""}}};const Ko=(0,D.$j)((function(e){var t=e.postsData,n=e.comments,r=e.ui,o=e.user;return{postId:t.get("currentPost").get("id"),comments:n.get("postComments"),commentsSort:n.get("postCommentsSort"),postCommentsNextPageLink:n.get("postCommentsNextPageLink"),isLoading:r.spinner.get("postComments",{}).loading||!1,isAllCommentsLoaded:n.get("isAllPostCommentsLoaded"),isMainContentReady:t.get("isMainContentReady"),isUserLoggedIn:o.get("isLoggedIn"),isUserLoaded:o.get("isLoaded")}}),{resetPostCommentsAction:pt.yq,commentSortSelectedAction:pt._N})(Yo);var $o=n("9E9V");function Jo(){return C.createElement("div",{className:"Comment-create"},C.createElement("div",{className:"Comment-create-guest"},C.createElement("span",{className:"placeholder"},(0,U.Z)("signInToLeaveComment")),C.createElement("div",null,C.createElement(je.ZP,{className:"Button signin",label:(0,U.Z)("signIn"),title:(0,U.Z)("signIn"),href:(0,$o.UD)()}),C.createElement(je.ZP,{className:"Button signup",label:(0,U.Z)("signUp"),title:(0,U.Z)("signUp"),href:(0,$o.e5)()}))))}function Xo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}Jo.__docgenInfo={description:"",methods:[],displayName:"SignInToLeaveComment"};var Qo=function(e){u()(n,e);var t=Xo(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(m()(r),"expandAll",(function(){r.setState({expandMode:ut.rc})})),v()(m()(r),"collapseAll",(function(){r.setState((function(e){return{expandMode:ut.WF-Math.abs(e.expandMode)}}))})),v()(m()(r),"handleClickToggleForceExpanded",(function(){r.state.expandMode!==ut.rc?r.expandAll():r.collapseAll()})),v()(m()(r),"onKeyboardInteraction",(function(e){if(e.target&&["INPUT","TEXTAREA"].includes(e.target.tagName))return e;switch(e.key){case"[":r.handleClickToggleForceExpanded(e);break;case"]":r.collapseAll()}return e})),v()(m()(r),"createComment",(function(e){var t=e.comment,n=e.hasAdminBadge,o=void 0!==n&&n,i=e.parentId,a=void 0===i?null:i,s=e.file,c=void 0===s?null:s,l=r.props,m=l.postId;(0,l.createPostCommentAction)({imageId:m,comment:t,parentId:a,hasAdminBadge:o,file:c})})),v()(m()(r),"fetchComments",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=r.props,o=n.id,i=n.fetchPostCommentsAction,a=n.commentId,s=n.parentContext,c=n.scrollToComments,l=n.contentOffset,m=n.galleryId,d=n.isUserLoggedIn;if(n.isUserLoaded){var u=d?ut.cZ:ut.hv;t&&(u=ut.IC),i(m,e,t,a,0!==s,u),a&&c(o,l)}})),v()(m()(r),"setPlaceholderHeight",(function(){r.setState({commentsListContainerStyles:{minHeight:"".concat(r.commentsListContainer.current.getBoundingClientRect().height,"px")}})})),v()(m()(r),"sortHandler",(function(e){var t=r.props,n=t.commentSortSelectedAction,o=t.resetPostCommentsAction;r.setPlaceholderHeight(),o(),r.fetchComments(e),n(e)})),r.commentsListContainer=C.createRef(),r.state={expandMode:e.commentId?ut.rc:ut.PM,commentsListContainerStyles:{}},r}return c()(n,[{key:"componentDidMount",value:function(){(0,N.kZ)("keydown",this.onKeyboardInteraction)}},{key:"componentWillUnmount",value:function(){(0,N.KZ)("keydown",this.onKeyboardInteraction)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.postId,r=t.commentId,o=t.comments;!e.commentId&&r&&this.expandAll(),e.commentId&&!r&&e.postId===n&&this.setState({expandMode:ut.WF}),o.size&&!(0,oo.is)(e.comments,o)&&this.setState({commentsListContainerStyles:{}})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.lazyLoad,r=e.postId,o=e.isUserLoggedIn,i=e.commentsSortList,a=e.commentsSort,s=e.commentCount,c=e.parentContext,l=e.commentId,m=this.state,d=m.expandMode,u=m.commentsListContainerStyles,p=d===ut.rc,f=C.createElement(Ko,{id:t,expandMode:d,onCreateComment:this.createComment,fetchComments:this.fetchComments,parentContext:c,commentId:l});return C.createElement("div",{id:t,className:"CommentsList",ref:this.commentsListContainer,style:u},o?C.createElement(wo,{key:"commentForm-".concat(r),onCreate:this.createComment}):C.createElement(Jo,null),C.createElement("div",{id:"".concat(t,"-headline"),className:"CommentsList-headline"},C.createElement("div",{className:"CommentsList-headline--counter"},C.createElement("span",null,(0,U.Z)("postCommentsCounter",(0,et.$N)(s)))),C.createElement("div",{className:"CommentsList-headline--expand",onClick:this.handleClickToggleForceExpanded},C.createElement("span",null,(0,U.Z)("expandAll",p))," ",C.createElement(Se.ZP,{name:p?Se.qZ:Se.ZU,width:"15",height:"15",fillColor:"#DADCE2"})),C.createElement(jt.fD,{className:"CommentsList-headline--sort",dropdownIcon:C.createElement(ze.ZP,{name:ze.cw,width:15}),options:i,value:a,onChange:this.sortHandler})),n?C.createElement(ne,{lazyLoadBuffer:400},(function(){return f})):f)}}]),n}(C.Component);function ei(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showContext,n=e.commentId;return t||(n?1:0)}Qo.__docgenInfo={description:"",methods:[{name:"expandAll",docblock:null,modifiers:[],params:[],returns:null},{name:"collapseAll",docblock:null,modifiers:[],params:[],returns:null},{name:"handleClickToggleForceExpanded",docblock:null,modifiers:[],params:[],returns:null},{name:"onKeyboardInteraction",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"createComment",docblock:null,modifiers:[],params:[{name:"{\n    comment,\n    hasAdminBadge = false,\n    parentId = null,\n    file = null,\n}",type:null}],returns:null},{name:"fetchComments",docblock:null,modifiers:[],params:[{name:"sort",type:null},{name:"postCommentsNextPageLink",type:null}],returns:null},{name:"setPlaceholderHeight",docblock:null,modifiers:[],params:[],returns:null},{name:"sortHandler",docblock:null,modifiers:[],params:[{name:"sort",type:null}],returns:null}],displayName:"CommentsListWrapper",props:{id:{type:{name:"string"},required:!0,description:""},lazyLoad:{type:{name:"bool"},required:!0,description:""},postId:{type:{name:"string"},required:!0,description:""},isUserLoggedIn:{type:{name:"bool"},required:!1,description:""},comments:{type:{name:"object"},required:!0,description:""},commentsSortList:{type:{name:"array"},required:!0,description:""},commentsSort:{type:{name:"string"},required:!0,description:""},commentCount:{type:{name:"number"},required:!0,description:""},commentId:{type:{name:"string"},required:!1,description:""},isUserLoaded:{type:{name:"bool"},required:!1,description:""},parentContext:{type:{name:"number"},required:!1,description:""},contentOffset:{type:{name:"number"},required:!0,description:""},galleryId:{type:{name:"string"},required:!1,description:""},createPostCommentAction:{type:{name:"func"},required:!0,description:""},commentSortSelectedAction:{type:{name:"func"},required:!0,description:""},fetchPostCommentsAction:{type:{name:"func"},required:!0,description:""},resetPostCommentsAction:{type:{name:"func"},required:!0,description:""},scrollToComments:{type:{name:"func"},required:!0,description:""}}};const ti=(0,P.Z)((0,D.$j)((function(e,t){var n=e.postsData,r=e.comments,o=e.user,i=e.ui,a=t.match;return{postId:n.get("currentPost").get("id"),commentCount:n.getIn(["currentPostMeta","post","comment_count"],0),commentId:(a.params||{}).commentId||null,comments:r.get("postComments"),commentsSort:r.get("postCommentsSort"),commentsSortList:r.get("postCommentsSortList"),isUserLoggedIn:o.get("isLoggedIn"),isUserLoaded:o.get("isLoaded"),parentContext:ei(a.params),contentOffset:i.cover.get("collapsed",0),galleryId:(a.params||{}).galleryId}}),{createPostCommentAction:pt.QP,commentSortSelectedAction:pt._N,fetchPostCommentsAction:pt.BC,resetPostCommentsAction:pt.yq,scrollToComments:Dr.KY})(Qo));function ni(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var ri=function(e){u()(n,e);var t=ni(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(m()(r),"onResize",(function(e){r.updateContentWrapperWidth(e)})),v()(m()(r),"updateContentWrapperWidth",(function(){(0,r.props.updateGalleryContentWrapperWidth)(r.getMaxWidth())})),v()(m()(r),"getMaxWidth",(function(){var e=r.contentWrapper.current;return e&&e.getBoundingClientRect().width||O.fm})),r.contentWrapper=C.createRef(),r}return c()(n,[{key:"componentDidMount",value:function(){(0,N.kZ)("resize",this.onResize),this.updateContentWrapperWidth(this.getMaxWidth())}},{key:"render",value:function(){var e=this.props,t=e.post,n=e.transformationAnimating,r=e.transformationTitleStyle,o=e.isFadeOut,i=e.style,a=e.commentsListId,s=e.isContentWrapperMount,c=e.commentPermalinkId,l=e.isOwner,m=e.showsTransformationButton;return C.createElement(xt.Zh,{isLoading:!t},t?C.createElement("div",{className:"Gallery".concat(n?" Gallery--transformation":""),style:i},C.createElement("div",{className:"Gallery-MainContainer".concat(o?" fadeOut":"")},C.createElement(ro,{post:t,commentsListId:a,showsTransformationButton:m}),C.createElement("div",{className:"Gallery-contentWrapper"},C.createElement("div",{className:"Gallery-insideContentWrapper",ref:this.contentWrapper},s&&C.createElement(Kn,{post:t,transformationTitleStyle:r,isOwner:l}),s&&!t.get("commentsDisabled")&&C.createElement(ti,{id:a,lazyLoad:!L.yh&&!c})))),C.createElement("div",{className:"Gallery-Sidebar"},C.createElement(Ar,null))):C.createElement("div",{className:"placeholder"}))}}]),n}(C.Component);function oi(e){var t=e.style,n=e.children,r=e.showGate,o=(0,U.Z)("desktopAgeGate"),i=(0,C.useState)(!1),a=Ot()(i,2),s=a[0],c=a[1];return r&&!s?C.createElement("div",{className:"WallPage"},C.createElement("div",{className:"WallPage-background"}),C.createElement(be.o,{minHeight:0,className:"GalleryCover",backgroundType:S.Ur,hideNewPostNotification:!0}),C.createElement("div",{className:"Wall",style:t},C.createElement("img",{src:ze.UZ[ze.VJ]}),o.text,C.createElement("div",{className:"Wall-choices"},C.createElement("a",{className:"Wall-Button Button btn-wall--no",href:"/"},o.backButton),C.createElement("div",{className:"Wall-Button Button btn-wall--yes",onClick:function(){return c(!0)}},o.continueButton)),C.createElement("div",{className:"Wall-footer"},o.terms))):n}function ii(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}ri.__docgenInfo={description:"",methods:[{name:"onResize",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"updateContentWrapperWidth",docblock:null,modifiers:[],params:[],returns:null},{name:"getMaxWidth",docblock:null,modifiers:[],params:[],returns:null}],displayName:"PostContentWrapper",props:{post:{type:{name:"object"},required:!1,description:""},transformationAnimating:{type:{name:"bool"},required:!1,description:""},transformationTitleStyle:{type:{name:"object"},required:!1,description:""},isFadeOut:{type:{name:"bool"},required:!1,description:""},style:{type:{name:"object"},required:!1,description:""},commentsListId:{type:{name:"string"},required:!1,description:""},isContentWrapperMount:{type:{name:"bool"},required:!1,description:""},updateGalleryContentWrapperWidth:{type:{name:"func"},required:!1,description:""},commentPermalinkId:{type:{name:"string"},required:!1,description:""},isOwner:{type:{name:"bool"},required:!1,description:""},showsTransformationButton:{type:{name:"bool"},required:!0,description:""}}},oi.__docgenInfo={description:"",methods:[],displayName:"Wall",props:{style:{type:{name:"object"},required:!1,description:""},children:{type:{name:"element"},required:!1,description:""},showGate:{type:{name:"bool"},required:!1,description:""}}};var ai=function(e){u()(n,e);var t=ii(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(m()(r),"loadPrimis",(function(){var e=r.props,t=e.post,n=e.adsEnabled,o=e.isLoggedIn,i=e.userIsLoaded,a=r.state.primisLoaded;if(a&&i&&!o&&t&&n&&(0,_.FD)(t.get("adConfig"))&&!t.get("is_ad"))if(a){var s=document.getElementById("primisPlayerContainerDiv");s&&s.classList.remove("hide!")}else{var c,l,m=(l={s:c=108937,playerApiId:c},(0,ue.BB)()||(l.pubUrl="www.primis.tech"),(0,N.vy)("script",{src:"https://live.primis.tech/live/liveView.php?".concat(new URLSearchParams(l)),async:!0}));document.body.appendChild(m),r.setState({primisLoaded:!0})}})),v()(m()(r),"hidePrimis",(function(){if(r.state.primisLoaded){var e=document.getElementById("primisPlayerContainerDiv");if(e){e.classList.add("hide!");var t=e.querySelector("video");t&&(t.muted=!0)}}})),v()(m()(r),"onResize",(function(e){(0,r.props.updateViewportHeightAction)(e)})),v()(m()(r),"scrollToFirstMedia",(function(){var e=(0,N.X_)(),t=r.props.byLinePosition;(e>=r.state.previousByLinePosition-26||e>t-25)&&(0,N.X5)(0,t-25)})),v()(m()(r),"onKeyboardInteraction",(function(e){var t=r.props,n=t.history,o=t.newPostAction,i=t.goToPreviousPostAction,a=t.goToNextPostAction,s=t.params,c=t.toggleAudioState;if(e.target&&["INPUT","TEXTAREA"].includes(e.target.tagName))return e;switch(e.key){case q.r9:case q.oq:r.lastNavArrow=!0,i(A.RR.HOTKEY,s);break;case q.cb:case q.pe:r.lastNavArrow=!0,a(A.RR.HOTKEY,s);break;case"`":o(),n.push("/".concat(W.uk));break;case"m":case"M":c()}return e})),v()(m()(r),"retrievePost",(function(e){var t=r.props,n=t.params,o=t.post,i=t.retrievePostAction,a=t.retrievePostMetaAction,s=t.retrievePromotedPostAction,c=t.failedFetchAttempts,l=t.toastError,m=t.incomingPost,d=r.state.setToast;3!==c?L.yh&&o&&o.get("id")===e||o&&!m&&o.get("id")===e||(m&&m.get("isAdInserted")?s(e):m&&m.get("inGallery")&&m.get("media")&&m.get("media").size>0?a(e,m):i(e)):d||(r.setState({setToast:!0}),l({id:"post-".concat(n.galleryId),description:(0,U.Z)("errorLoadingPost")}))})),v()(m()(r),"calculateTopOffset",(function(e){return Math.max(0,e-2*S.Um)})),v()(m()(r),"onScroll",(function(){var e=r.props,t=e.reachedBottom,n=e.post,o=e.isLoading,i=e.isCommentsLoading,a=(0,N.XO)(),s=(0,N.Be)(),c=(0,N.$$)();a+s>=c-A.BQ&&n&&!r.reachedBottomSent&&!o&&!i&&(t(n,c),r.reachedBottomSent=!0)})),r.state={isFadeOut:!1,isContentWrapperMount:!1,setToast:!1,prevPostId:null,previousByLinePosition:e.byLinePosition,primisLoaded:!1},r.reachedBottomSent=!1,r.lastNavArrow=!1,r}return c()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.params,n=e.retrievePostAction,r=t.galleryId;n&&this.retrievePost(r);var o=this.props.history;o&&"PUSH"===o.action&&(0,N.X5)(0,0),(0,N.kZ)("keydown",this.onKeyboardInteraction),this.loadPrimis()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.adsEnabled,r=t.params,o=t.post,i=t.isLoading,a=t.isLoggedIn,s=t.promotedPostViewAction,c=t.setTransformationAction,l=t.isPromotedTransformation,m=t.transformationEnabled,d=t.transformationEnabledByDefault,u=t.transformationEnabledByUser,p=t.updateAdConfigAction,f=t.sendToTop,g=t.retrievePostAction,y=t.showsTransformationButton,h=this.state.isFadeOut,v=r.galleryId;if((!e.retrievePostAction&&g||o&&v!==o.get("id")&&!i)&&(this.retrievePost(v),this.reachedBottomSent=!1),h&&(f?(0,N.VY)((function(){return(0,N.X5)(0,0)})):(0,N.VY)(this.scrollToFirstMedia),this.lastNavArrow=!1),o&&!e.post&&(0,N.VY)((function(){return(0,N.qe)("resize")})),o){var C=!e.post||o.get("id")!==e.post.get("id"),b=!(0,_.FD)(o.get("adConfig"))&&e.post&&(0,_.FD)(e.post.get("adConfig"));o.get("isAd")&&C?(s(o.get("id")),!l&&m&&c(!1,!1,!1)):b&&!l&&!o.get("inGallery")&&m?c(!1,!1,!1):!m&&(u||null===u&&d)&&y&&c(!0,!1,!1),!C||o.get("inGallery")||(0,_.FD)(o.get("adConfig"))||p({enabled:!1}),!n||o.get("is_ad")||a?this.hidePrimis():this.loadPrimis()}}},{key:"componentWillUnmount",value:function(){var e=this.props.resetPostDataAction;(0,N.KZ)("resize",this.onResize),(0,N.KZ)("keydown",this.onKeyboardInteraction),e(),this.hidePrimis()}},{key:"shouldShowGate",value:function(){var e=this.props,t=e.isLoggedIn,n=e.post;if(t||!n||n.get("inGallery")||L.yh)return!1;var r=n.getIn(["adConfig","wallFlags"]);return r&&r.includes(j.MJ)}},{key:"render",value:function(){var e=this.props,t=e.post,n=e.topOffset,r=e.isLoggedIn,o=e.isOwner,i=e.transformationEnabled,a=e.transformationAnimating,s=e.transformationCoverStyle,c=e.transformationBackgroundStyle,l=e.transformationTitleStyle,m=e.postWidth,d=e.adsEnabled,u=e.updateGalleryContentWrapperWidth,p=e.params,f=e.isMainContentReady,g=e.isInRecircExperimentWithTreatment,y=e.treatment,h=e.isLoading,v=e.showsTransformationButton,b=this.state,E=b.isFadeOut,P=b.isContentWrapperMount,k={marginTop:this.calculateTopOffset(n)},I="CommentsList-".concat(t&&t.get("id"));return C.createElement(oi,{showGate:this.shouldShowGate()},C.createElement("div",{className:"GalleryPage",style:c},i&&C.createElement(pe.yM,{width:m,height:"1000"}),C.createElement(he,{post:t}),C.createElement(me.h7,null),C.createElement(Q.ZP,null),C.createElement(Rt,null),r&&C.createElement(C.Fragment,null,C.createElement(Ke,null),t&&C.createElement($e.Z,{postId:t.get("id"),isAlbum:t.get("isAlbum")}),C.createElement(gt,null),C.createElement(kt,null)),C.createElement(dt,null),C.createElement(re.Z,null),C.createElement(oe.Z,null),C.createElement(ie.Z,null),C.createElement(ae.ZP,null),C.createElement("div",{className:"GalleryPage-background",style:s}),C.createElement(Ve,null),C.createElement(ri,{style:k,post:t,transformationAnimating:a,transformationTitleStyle:l,isFadeOut:E,commentsListId:I,isContentWrapperMount:P,updateGalleryContentWrapperWidth:u,commentPermalinkId:p.commentId,isOwner:o,showsTransformationButton:v}),C.createElement("div",{className:"badges-wrapper"},C.createElement(J.Z,null)),t&&d&&C.createElement(wt,{post:t}),t&&f&&!h&&C.createElement(ne,{lazyLoadBuffer:800},(function(){return C.createElement(le,{experimentName:R.gR},g&&!t.get("isAd")?C.createElement(V,{op:t.getIn(["account","username"],""),postHash:t.get("id"),treatment:y}):C.createElement(H,{adsEnabled:d,adConfig:t.get("ad_config")}))})),t&&t.get("hasPicsart")&&C.createElement(Tt.Z,null),C.createElement(X.ZP,null),C.createElement($,{onScroll:this.onScroll})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.failedFetchAttempts,r=e.isLoading,o=e.isLoadingMeta,i=e.post,a=e.byLinePosition,s=t.setToast,c=t.prevPostId,l=t.isFadeOut;if(i&&i.get("id")!==c)return L.yh||(0,fe.S4)(i),{prevPostId:i.get("id"),isContentWrapperMount:!0,setToast:!1};if(0===n&&s)return{setToast:!1};if(i&&(r||o)){if(!l)return{previousByLinePosition:a,isFadeOut:!0}}else if(l)return{isFadeOut:!1};return null}}]),n}(C.Component);ai.defaultProps={failedFetchAttempts:0};var si=function(e,t){var n=e.experiments,r=e.postsData,o=e.display,i=e.posts,a=e.ui,s=e.user,c=e.ad,l=n.get(R.gR),m=l&&l.get("isActive")&&!l.get("isControl"),d=l?l.get("activeTreatment"):"",u=c.getIn(["transformation","enabled"]),p=c.getIn(["transformation","enabledByDefault"]),f=c.getIn(["transformation","enabledByUser"]),g={},y={},h={};if(c.getIn(["transformation","animatingIn"])&&(g={opacity:0}),u){var v=c.getIn(["transformation","backgroundColor"]);g={background:"linear-gradient(rgba(".concat(v,", 0.4) 0%, rgba(").concat(v,", 1) 100%), url(").concat(c.getIn(["transformation","backgroundImage"]),")"),opacity:c.getIn(["transformation","animatingOut"])?0:1},y={background:"rgb(".concat(c.getIn(["transformation","backgroundColor"]),")")},h={fontFamily:c.getIn(["transformation","fontFamily"]),fontSize:c.getIn(["transformation","titleFontSize"])}}var C=r.get("currentPost")&&(0,Mt.Dd)(r.get("currentPost")),b=(0,de.M4)(c,s,null==r?void 0:r.get("currentPost")),E=c.getIn(["transformation","promotedPostIds"]).includes(r.getIn(["currentPost","id"])),P=(new Date).getTime(),k=!!C&&(b&&((0,_.FD)(C.get("adConfig"))||C.get("inGallery")&&!C.get("isAd")||E)&&P>c.getIn(["transformation","startTime"])&&(P<c.getIn(["transformation","endTime"])||u));return{isInRecircExperimentWithTreatment:m,treatment:d,post:C,incomingPost:i.getIn(["posts",I()(t,"match.params.galleryId")]),isMainContentReady:r.get("isMainContentReady"),topOffset:a.cover.get("height"),userIsLoaded:s.get("isLoaded"),isLoggedIn:!!s.get("isLoggedIn"),isOwner:s.get("isLoggedIn")&&s.get("id")===r.getIn(["currentPost","account","id"]),isLoading:a.spinner.get("retrievePost",{}).loading,isLoadingMeta:a.spinner.get("retrievePostMeta",{}).loading,isCommentsLoading:a.spinner.get("postComments",{}).loading||!1,byLinePosition:r.get("byLinePosition"),adsEnabled:b,isPromotedTransformation:E,transformationAnimating:c.getIn(["transformation","animatingIn"])||c.getIn(["transformation","animatingOut"]),transformationCoverStyle:g,transformationBackgroundStyle:y,transformationTitleStyle:h,transformationEnabled:u,transformationEnabledByDefault:p,transformationEnabledByUser:f,failedFetchAttempts:r.get("error").failedFetchAttempts,sendToTop:I()(t,"location.state.sendToTop",!1),postWidth:o.getIn(["viewPort","width"]),showsTransformationButton:k}},ci=function(e){u()(n,e);var t=ii(n);function n(){return a()(this,n),t.apply(this,arguments)}return c()(n,[{key:"render",value:function(){var e=this.props.match;return C.createElement(ai,o()({params:e.params},this.props))}}]),n}(C.Component);ci.__docgenInfo={description:"",methods:[],displayName:"PostDetailWithParams",props:{match:{type:{name:"object"},required:!1,description:""}}};const li=(0,P.Z)(ci);ai.__docgenInfo={description:"",methods:[{name:"loadPrimis",docblock:null,modifiers:[],params:[],returns:null},{name:"hidePrimis",docblock:null,modifiers:[],params:[],returns:null},{name:"onResize",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"scrollToFirstMedia",docblock:null,modifiers:[],params:[],returns:null},{name:"onKeyboardInteraction",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"retrievePost",docblock:null,modifiers:[],params:[{name:"galleryId",type:null}],returns:null},{name:"calculateTopOffset",docblock:null,modifiers:[],params:[{name:"coverHeight",type:null}],returns:null},{name:"onScroll",docblock:null,modifiers:[],params:[],returns:null},{name:"shouldShowGate",docblock:null,modifiers:[],params:[],returns:null}],displayName:"PostDetail",props:{failedFetchAttempts:{defaultValue:{value:"0",computed:!1},type:{name:"number"},required:!1,description:""},params:{type:{name:"object"},required:!1,description:""},history:{type:{name:"object"},required:!1,description:""},post:{type:{name:"object"},required:!1,description:""},incomingPost:{type:{name:"object"},required:!1,description:""},topOffset:{type:{name:"number"},required:!0,description:""},isLoggedIn:{type:{name:"bool"},required:!1,description:""},userIsLoaded:{type:{name:"bool"},required:!1,description:""},isOwner:{type:{name:"bool"},required:!1,description:""},isLoading:{type:{name:"bool"},required:!1,description:""},isLoadingMeta:{type:{name:"bool"},required:!1,description:""},byLinePosition:{type:{name:"number"},required:!1,description:""},isCommentsLoading:{type:{name:"bool"},required:!1,description:""},transformationAnimating:{type:{name:"bool"},required:!1,description:""},transformationCoverStyle:{type:{name:"object"},required:!1,description:""},transformationBackgroundStyle:{type:{name:"object"},required:!1,description:""},transformationTitleStyle:{type:{name:"object"},required:!1,description:""},transformationEnabled:{type:{name:"bool"},required:!1,description:""},transformationEnabledByDefault:{type:{name:"bool"},required:!1,description:""},transformationEnabledByUser:{type:{name:"bool"},required:!1,description:""},postWidth:{type:{name:"number"},required:!1,description:""},adsEnabled:{type:{name:"bool"},required:!0,description:""},setTransformationAction:{type:{name:"func"},required:!1,description:""},toggleAudioState:{type:{name:"func"},required:!1,description:""},isPromotedTransformation:{type:{name:"bool"},required:!1,description:""},promotedPostViewAction:{type:{name:"func"},required:!0,description:""},reachedBottom:{type:{name:"func"},required:!0,description:""},updateViewportHeightAction:{type:{name:"func"},required:!0,description:""},updateGalleryContentWrapperWidth:{type:{name:"func"},required:!0,description:""},goToNextPostAction:{type:{name:"func"},required:!0,description:""},goToPreviousPostAction:{type:{name:"func"},required:!0,description:""},newPostAction:{type:{name:"func"},required:!0,description:""},retrievePostAction:{type:{name:"func"},required:!0,description:""},retrievePromotedPostAction:{type:{name:"func"},required:!0,description:""},retrievePostMetaAction:{type:{name:"func"},required:!0,description:""},resetPostDataAction:{type:{name:"func"},required:!0,description:""},toastError:{type:{name:"func"},required:!0,description:""},isMainContentReady:{type:{name:"bool"},required:!0,description:""},updateAdConfigAction:{type:{name:"func"},required:!0,description:""},sendToTop:{type:{name:"bool"},required:!1,description:""},isInRecircExperimentWithTreatment:{type:{name:"bool"},required:!1,description:""},treatment:{type:{name:"string"},required:!1,description:""},showsTransformationButton:{type:{name:"bool"},required:!0,description:""}}}},"9Cp0":(e,t,n)=>{n.d(t,{Z:()=>C});var r=n("/MKj"),o=n("pVnL"),i=n.n(o),a=n("J4zp"),s=n.n(a),c=n("q1tI"),l=(n("17x9"),n("DHkX")),m=n("qIoc"),d=n("ucDD"),u=n("mOu4"),p=n("VGss"),f=n("5bgp"),g=n("79fG");n("/FT0");var y=n("4ELA"),h=n("+qrI"),v=n("QlXF");const C=(0,r.$j)((function(e){var t=e.emerald,n=e.user;return{giftData:t.get("giveEmeraldData").toJS(),isSubscribed:n.getIn(["subscription","isSubscribed"])}}),(function(e){return{close:function(){e((0,h.gk)(m.vE)),e((0,v.XW)())}}}))(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};function n(n){var r=n.giftData,o=n.close,a=n.onDialogOpen,y=n.isSubscribed;if(!r.recipientUsername)return null;var h=(0,c.useState)(0),v=s()(h,2),C=v[0],b=v[1];return c.createElement(e,i()({className:"GiveGiftDialog GiveGiftDialog-ty",isModal:!1,onClose:o,name:m.vE,onOpen:a},t),c.createElement("div",{className:"GiveGiftDialog-head"},c.createElement(u.ZP,{name:u.bx}),c.createElement(f.ZP,{className:"GiveGiftDialog-head--close",image:c.createElement(p.ZP,{name:p.dq,width:"32",height:"32"}),onClick:o})),c.createElement("div",{className:"GiveGiftDialog-ty-content"},c.createElement(g.Z,{className:"GiveGiftDialog-ty-confetti",run:C,viewWidth:540,viewHeight:500,loadSpeed:1}),c.createElement("span",{onClick:function(){b(C+1)}},c.createElement(u.ZP,{className:"GiveGiftDialog-ty-heart",name:u.k5})),c.createElement("div",{className:"GiveGiftDialog-ty-title"},(0,l.Z)("giveGiftTyGem")),c.createElement("div",{className:"GiveGiftDialog-ty-description"},(0,l.Z)("giveGiftTyDescription",r.recipientUsername)),!y&&c.createElement(f.ZP,{className:"GiveGiftDialog-ty-button Button",label:(0,l.Z)("emeraldJoin"),title:(0,l.Z)("emeraldJoin"),href:"/".concat(d.EL,"?source=").concat(m.lG)})))}return n.defaultProps={onDialogOpen:function(){}},n}(y.U))},wxt4:(e,t,n)=>{n.d(t,{Z:()=>u});var r=n("lSNA"),o=n.n(r),i=n("q1tI"),a=(n("17x9"),n("TSYQ")),s=n.n(a),c=n("DHkX"),l=n("oIX6"),m=n("MHWf"),d=n("VGss");function u(e){var t=e.customClasses,n=e.isUserLoggedIn,r=e.showTitle,a=e.showSmallVersion,u=e.onClick,p=s()(o()({GiveEmeraldButton:!0,"GiveEmeraldButton-title":r,"GiveEmeraldButton-small":a},t,t)),f=(0,c.Z)("giveEmerald");return i.createElement("a",{className:p,title:f,href:"".concat(l.$j,"?redirect=").concat(encodeURIComponent((0,m.Jz)())),onClick:function(e){n&&(e.preventDefault(),e.stopPropagation(),u())}},i.createElement(d.ZP,{name:d.Ch,width:"14",height:"14",viewBox:"0 0 20 20"}),r&&i.createElement("span",null,f))}u.defaultProps={showTitle:!1,showSmallVersion:!1,onClick:function(){},customClasses:""},u.__docgenInfo={description:"",methods:[],displayName:"GiveEmeraldButton",props:{showTitle:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},showSmallVersion:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},onClick:{defaultValue:{value:"() => {}",computed:!1},type:{name:"func"},required:!1,description:""},customClasses:{defaultValue:{value:"''",computed:!1},type:{name:"string"},required:!1,description:""},isUserLoggedIn:{type:{name:"bool"},required:!0,description:""}}}},XJLh:(e,t,n)=>{function r(e,t,n,r){if(n.location.pathname.startsWith("/account/favorites/"))return e.get("username");var o,i=r.params,a=i.username?i.username.toLowerCase():null;return(o=a?t.getIn(["accounts",a]):t.get("accounts").first())?o.get("username"):a}n.d(t,{j:()=>r})},tbwY:(e,t,n)=>{n.d(t,{h:()=>s,k:()=>c});var r=n("RIqP"),o=n.n(r),i=n("JPcv"),a=n("puhG");function s(e){if(!e)return(0,a.Z)("postMetaDescription");var t=e.get("tags",(0,i.List)()).reduce((function(e,t){return[].concat(o()(e),[t.get("display")])}),[]),n=e.getIn(["account","username"],"");return(0,a.Z)("postMetaDescription",t,n)}function c(e){var t=(0,a.Z)("defaultTitle");return e&&e!==t?"".concat(e," - Imgur"):t}}}]);