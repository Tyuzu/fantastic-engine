!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var i in n)("object"==typeof exports?exports:e)[i]=n[i]}}(self,(()=>(()=>{"use strict";var e,t,n,i={r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},o={};i.r(o),function(e){e.HORIZONTAL="HORIZONTAL",e.RECTANGLE="RECTANGLE",e.VERTICAL="VERTICAL",e.MOBILE="MOBILE",e.MOBILE_BIG="MOBILE_BIG",e.MOBILE_HORIZONTAL="MOBILE_HORIZONTAL",e.PORTRAIT="PORTRAIT",e.BILLBOARD="BILLBOARD"}(e||(e={})),function(e){e[e.Unknown=0]="Unknown",e[e.Ethernet=1]="Ethernet",e[e.WIFI=2]="WIFI",e[e.CellularNetworkUnknownGeneration=3]="CellularNetworkUnknownGeneration",e[e.CellularNetwork2G=4]="CellularNetwork2G",e[e.CellularNetwork3G=5]="CellularNetwork3G",e[e.CellularNetwork4G=6]="CellularNetwork4G",e[e.CellularNetwork5G=7]="CellularNetwork5G"}(t||(t={}));var r,a=((n={})[e.HORIZONTAL]=[[970,90],[728,90],[468,60],[234,60]],n[e.RECTANGLE]=[[336,280],[300,250],[250,250],[200,200],[180,150],[125,125]],n[e.VERTICAL]=[[300,600],[160,600],[120,600],[120,240]],n[e.MOBILE]=[[320,50]],n[e.MOBILE_BIG]=[[320,100],[320,50]],n[e.MOBILE_HORIZONTAL]=[[970,90],[728,90],[468,60],[320,100],[320,50],[234,60]],n[e.PORTRAIT]=[[300,1050]],n[e.BILLBOARD]=[[970,250]],n["300x600"]=[[300,600],[160,600]],n["336x280"]=[[336,280],[300,250]],n["728x90"]=[[728,90],[468,60]],n["970x90"]=[[970,90],[728,90],[468,60]],n),s="ana-api-key",d="056363cfdcfcf7de5cea11820138b4d2daf3ca",c="https://ads.assemblyexchange.com",l="lib_version",u="web_".concat("3.0.1"),h="publisher_version",p="web_0.0.1",g="ana_client_uid",f="ana_client_session_id",m="ana_vast",y="ana_staging",v="https://securepubads.g.doubleclick.net/tag/js/gpt.js",b="//c.amazon-adsystem.com/aax2/apstag.js",w=[new RegExp("^https://js.media-lab.ai$"),new RegExp("^https://apps.media-lab.ai$"),new RegExp("^https://ads.assemblyexchange.com$"),new RegExp("^https://staging.apps.media-lab.ai$"),new RegExp("^https://tpc.googlesyndication.com$"),new RegExp("^https?://ana-sdk-creative.s3-website-us-west-2.amazonaws.com$"),new RegExp("^https://\\w+.safeframe.googlesyndication.com$"),new RegExp("^https?://localhost:9000$"),new RegExp("^https?://127.0.0.1:9000$")],A=[new RegExp("^https://js.media-lab.ai$"),new RegExp("^https://apps.media-lab.ai$"),new RegExp("^https://ads.assemblyexchange.com$"),new RegExp("^https://staging.apps.media-lab.ai$"),new RegExp("^https?://localhost:2279$"),new RegExp("^https?://127.0.0.1:2279$")],E=417,T="frequency_cap",I="cs_",S="AssemblyBidderSyncState",D=2500,_=500,R=4,O="_lr_env",C="rtisCalled",k=function(){var e=null;if(window.XMLHttpRequest?e=new XMLHttpRequest:window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLHTTP")),!e)throw Error("Cannot create an XMLHttpRequest instance");return e},P=function(e){e.withCredentials=!0,e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader(s,d),e.setRequestHeader(l,u),e.setRequestHeader(h,p)},M=function(e,t){void 0===t&&(t={});var n,i,o=new URL(e);return t&&"{}"!==JSON.stringify(t)?(void 0!==o.searchParams?Object.keys(t).forEach((function(e){return o.searchParams.append(e,String(t[e]))})):o.href+="?"+(n=t,i=[],Object.keys(n).forEach((function(e){i.push(encodeURIComponent(e)+"="+encodeURIComponent(n[e]))})),i.join("&")),o):o};function B(e){return function(){this.readyState===XMLHttpRequest.DONE&&e&&e(this)}}function L(e){return function(){0!==this.status&&console.error("Error occurred while HTTP request"),e&&e(this)}}var N=function(e,t,n,i,o){void 0===t&&(t={}),void 0===n&&(n=null);var r=k();r.onreadystatechange=B(i),r.onerror=L(o);var a=M(e,t);r.open("POST",a.toString()),P(r),r.send(n?JSON.stringify(n):null)},U=function(e,t,n,i){void 0===t&&(t={});var o=k();o.onreadystatechange=B(n),o.onerror=L(i);var r=M(e,t);o.open("GET",r.toString()),P(o),o.send()},x=((r={"Content-Type":"application/json"})["ana-api-key"]=d,r.lib_version=u,r.publisher_version=p,function(e,t,n){if(n||2===arguments.length)for(var i,o=0,r=t.length;o<r;o++)!i&&o in t||(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))});function V(){return window.ANAWebSDKInstance}function j(){var e=V();if(e)return e.propertyId;var t=window.ANAWebPropertyId;return t||window.location.hostname}function q(e){try{var t=e(),n="__random_key__",i="__random_val__";return t.setItem(n,i),t.getItem(n)!==i?!1:(t.removeItem(n),!0)}catch(e){return!1}}function F(){return!!window.ana_debug||-1!==window.location.href.indexOf("ana_debug=1")}function G(){var e,n=window.navigator;if(!n.connection)return t.Unknown;switch(n.connection.effectiveType){case"slow-2g":case"2g":e=t.CellularNetwork2G;break;case"3g":e=t.CellularNetwork3G;break;case"4g":e=t.CellularNetwork4G;break;default:e=t.Unknown}return e}function W(){var e,n=window.navigator;if(!n.connection)return t.Unknown;if(n.connection)switch(n.connection.type){case"cellular":e=G();break;case"ethernet":e=t.Ethernet;break;case"wifi":e=t.WIFI;break;case"unknown":e=t.Unknown;break;case void 0:e=G();break;default:e=t.Unknown}return e}function H(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];F()&&console.log.apply(console,x(["%cðŸš¨ANA: ","background: #222; color: #33c65a"],e,!1))}function J(e,t,n){var i="";if(n){var o=new Date;o.setTime(o.getTime()+60*n*1e3),i="; expires="+o.toUTCString()}document.cookie=e+"="+(t||"")+i+"; path=/"}function z(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){var o=n[i].trim();if(0===o.indexOf(t))return o.substring(t.length,o.length)}return null}function K(e){return new URLSearchParams(window.location.search).get(e)}function $(e){var t=!1;return Array.from(document.getElementsByTagName("script")).forEach((function(n){n.getAttribute("src")===e&&(t=!0)})),t}function X(e,t,n){if(t.addEventListener)t.addEventListener(e,n,!1);else{if(!t.attachEvent)throw Error("No event listener found!");t.attachEvent("on".concat(e),n)}}function Z(e){var t,n=document.getElementById(e),i=!!(null===(t=window.googletag)||void 0===t?void 0:t.pubads);return!!n&&!(i&&googletag.pubads&&googletag.pubads().getSlots().find((function(t){return t.getSlotElementId()===e})))}var Q=function(e,t){if(t){var n=t.options.dimensions.filter((function(e){return 300===e[0]&&600===e[1]})).length>0,i=t.options.dimensions.filter((function(e){return 300===e[0]&&(300===e[1]||250===e[1])})).length>0;if(n&&i){var o=document.getElementById(t.elementID);if(!t.isSemiStickyUnit||300!==e.Width||300!==e.Height&&250!==e.Height)t.isSemiStickyUnit&&e.Height>300&&"assembly-semi-sticky-container"===o.parentElement.getAttribute("class")&&(o.style.position="relative",o.style.marginTop="0px");else{var r=null;"assembly-semi-sticky-container"!==o.parentElement.getAttribute("class")&&((r=document.createElement("div")).setAttribute("class","assembly-semi-sticky-container"),r.style.display="block",r.style.width="300px",r.style.height="600px",r.style.marginLeft="auto",r.style.marginRight="auto",r.style.borderTop="1px solid transparent",r.style.borderBottom="1px solid transparent",o.parentNode.insertBefore(r,o),r.appendChild(o))}}}else H("slot is not defined")},Y=0,ee=K("aversion");if(ee){var te="use_local_bundle"===ee?"http://localhost:9000/wana.js":"https://js.media-lab.ai/wana."+ee+".js";if(!$(te))throw function e(t){if(!document.body)return console.error("ana-web is triying to load another version before there is a body to append to. Retry [".concat(ee,"][").concat(Y,"]")),(Y+=1)<10?void setTimeout((function(){e(t)}),50):void console.error("Ana Web exhausted retries while waiting for document.body . Retry [".concat(ee,"][").concat(Y,"]"));$(t)||function(e,t){if(!$(e)){var n=document.createElement("script");n.async=t,n.src=e,document.body.appendChild(n)}}(t,!0)}(te),Error("Ana Version parameter found, stoping current script to load requested version [".concat(ee,"]"))}var ne,ie,oe,re=function(){function e(){}return e.prototype.setItem=function(e,t){this[e]=t},e.prototype.getItem=function(e){var t=this[e];return t||(t=null),t},e.prototype.removeItem=function(e){delete this[e]},e.prototype.clear=function(){var e=this;Object.keys(this).forEach((function(t){delete e[t]}))},e.prototype.key=function(e){throw Error("not implemented (index = ".concat(e))},Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this).length},enumerable:!1,configurable:!0}),e}();window.anaStorage=q((function(){return window.localStorage}))?window.localStorage:new re,window.anaSessionStorage=q((function(){return window.sessionStorage}))?window.sessionStorage:new re,function(e){e[e.GOOGLE=0]="GOOGLE",e[e.ANA=1]="ANA",e[e.SAS=2]="SAS"}(ne||(ne={})),function(e){e[e.VIDEO_JS=0]="VIDEO_JS",e[e.HTML5=1]="HTML5"}(ie||(ie={}));var ae=null,se=function(e){var t,n=document.activeElement;if(n&&"IFRAME"===n.tagName&&ae!==n&&(ae=n,document.activeElement.parentNode&&"DIV"===document.activeElement.parentNode.nodeName)){var i=document.activeElement.parentNode,o="";i.parentNode&&"DIV"===i.parentNode.nodeName&&i.parentNode.getAttribute("id")?o=i.parentNode.getAttribute("id"):(i,o=i.getAttribute("id")),H("ANA Ad Click detected on adUnit",o);var r=null===(t=e.getBannerSlot(o))||void 0===t?void 0:t.currentBid;r?(H("Rendering ClickPixels for adUnit",o),r.renderClickPixels()):H("Failed Rendering ClickPixels for adUnit",o,"because bid is missing")}},de=function(){function e(e){var t=this;Object.keys(e).forEach((function(n){var i=function(e,t){void 0===t&&(t=!1);var n=e.replace(/([-_]id$)|([-_][a-z])/gi,(function(e){return e.toUpperCase().replace("-","").replace("_","")}));return"id"===n&&(n="ID"),n&&t&&(n=n[0].toUpperCase()+n.slice(1)),n}(n,!0);t[i]=e[n]})),this.LastNomination=0}return e.prototype.toCustomJSON=function(){var e=this,t={};return Object.keys(this).forEach((function(n){var i=n.replace(/\.?([A-Z]+)/g,(function(e,t){return"_"+t.toLowerCase()})).replace(/^_/,"");t[i]=e[n]})),t},e.prototype.renderPixels=function(e){var t=this.BidID;e.forEach((function(e){var n=document.createElement("img");n.setAttribute("data-bid-id",t),n.setAttribute("src",e),n.setAttribute("width","1"),n.setAttribute("height","1"),document.body.appendChild(n)}))},e.prototype.renderImpressionPixels=function(){this.ImpressionPixels&&this.renderPixels(this.ImpressionPixels)},e.prototype.renderViewPixels=function(){this.ViewPixels&&this.renderPixels(this.ViewPixels)},e.prototype.renderClickPixels=function(){this.ClickPixels&&this.renderPixels(this.ClickPixels)},e.prototype.removeImpressionPixels=function(){for(var e=[],t=document.getElementsByTagName("img"),n=0;n<t.length;n++){var i=t[n];i.getAttribute("data-bid-id")===String(this.BidID)&&e.push(i)}e.forEach((function(e){return document.body.removeChild(e)}))},e.prototype.isExpired=function(){if(void 0===this.Expires)return!1;var e=this.Expires-this.Received,t=new Date(this.Expires);this.ClientReceived&&(t=new Date(this.ClientReceived+e));var n=new Date;return t.getTime()<n.getTime()},e}(),ce=function(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&+e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")},le=function(){return"y"===new URLSearchParams(window.location.search).get("tracing")},ue=function(){var e=anaStorage.getItem(g);return e||(e=ce(),anaStorage.setItem(g,e)),le()?"tr"+e:e},he=function(e,t){anaStorage.setItem(I+e,t)};var pe=function(e){var t=anaStorage.getItem(S),n=null;try{if(t){n=JSON.parse(t);var i=!0;if(e&&Object.keys(e).forEach((function(e){Object.keys(n.bidders).find((function(t){return e===t}))||(i=!1)})),i)return Object.keys(n.bidders).forEach((function(e){n.bidders[e].sync_date<Date.now()-864e5&&(n.bidders[e].sync_date=Date.now(),n.bidders[e].sync_counter=0)})),n}}catch(e){}var o={group:-1,bidders:{}};return e?(Object.keys(e).forEach((function(e){o.bidders[e]={sync_counter:-1,sync_date:Date.now()}})),o):o},ge=function(e,t){var n,i,o=Object.keys(e).length,r=Math.ceil(o/6);-1===t.group?t.group=(n=0,i=r-1,Math.floor(Math.random()*(i-n+1)+n)):(t.group++,t.group>r-1&&(t.group=0));var a=6*t.group,s=a+6;s>o&&(s=o);var d=Object.keys(e).slice(a,s);d.forEach((function(e){void 0!==t.bidders[e]&&(t.bidders[e].sync_counter++,t.bidders[e].sync_counter>3&&(t.bidders[e].sync_counter=3))})),d=d.filter((function(e){return void 0!==t.bidders[e]&&t.bidders[e].sync_counter<3}));var c={};return d.forEach((function(t){c[t]=e[t]})),[c,t]},fe=function(e,t,n){if(!t)throw Error("propertyId is required");var i,o;(i=pe(null),0===Object.keys(i.bidders).length||0!==Object.keys(i.bidders).filter((function(e){return i.bidders[e].sync_counter<3})).length)?(H("Not all bidders synced, continuing"),void 0===window.syncRequestLastTime&&(window.syncRequestLastTime={}),void 0===window.syncRequestLastTime[window.location.href]&&(window.syncRequestLastTime[window.location.href]=0),(new Date).getTime()-window.syncRequestLastTime[window.location.href]<2500?H("We have already called resync before 2.5 seconds, rejecting the call until later"):(window.syncRequestLastTime[window.location.href]=(new Date).getTime(),H("Updating last resync timer"),o=t,window.ANAWebPropertyId=o,function(e){anaStorage.setItem(g,e)}(n),H("sending a syncing cookie request to doh"),Pe.UserSync.getUrls([],(function(e){if(200===e.status){if(""!==e.responseType&&"text"!==e.responseType)throw Error('incorrect response type "'.concat(e.responseType,'" from ').concat(e.responseURL));var t=JSON.parse(e.responseText),n=t.sync_urls,i=pe(n),o=ge(n,i),r=o[0];!function(e){try{anaStorage.setItem(S,JSON.stringify(e))}catch(e){}}(o[1]);var a=t.cookie_ids,s=a?Object.keys(a):null;H("got response from /doh/sync:",r,a),Object.keys(r).forEach((function(e){s&&-1!==s.indexOf(e)||De(e,r[e])})),a&&Object.keys(a).forEach((function(e){var t=a[e];t&&he(e,t)}))}})))):H("Already all synced, no need to resync cookies across bidders")};function me(e){this.callCounter++,document.body?document.body.appendChild(e):this.callCounter<200&&setTimeout(me.bind(this,e),50)}var ye,ve,be,we,Ae,Ee,Te,Ie,Se,De=function(e,t){var n=j(),i=document.createElement("iframe");i.setAttribute("src",t),i.setAttribute("frameborder","0"),i.setAttribute("scrolling","no"),i.setAttribute("marginheight","0"),i.setAttribute("marginwidth","0"),i.setAttribute("TOPMARGIN","0"),i.setAttribute("LEFTMARGIN","0"),i.setAttribute("allowtransparency","true"),i.setAttribute("width","0"),i.setAttribute("height","0"),i.setAttribute("data-property-id",n),H("creating cookie syncing iframe for "+e,t),setTimeout(me.bind({callCounter:0},i),0)};!function(e){e[e.PageLoadSoundOn=1]="PageLoadSoundOn",e[e.PageLoadSoundOff=2]="PageLoadSoundOff",e[e.ClickSoundOn=3]="ClickSoundOn",e[e.MouseOverSoundOn=4]="MouseOverSoundOn",e[e.EnterViewpointSoundOn=5]="EnterViewpointSoundOn",e[e.EnterViewpointSoundOff=6]="EnterViewpointSoundOff"}(ye||(ye={})),function(e){e[e.GenericPostRoll=-2]="GenericPostRoll",e[e.GenericMidRoll=-1]="GenericMidRoll",e[e.PreRoll=0]="PreRoll",e[e.MidRoll3Sec=3]="MidRoll3Sec",e[e.MidRoll5Sec=5]="MidRoll5Sec",e[e.MidRoll10Sec=10]="MidRoll10Sec",e[e.MidRoll15Sec=15]="MidRoll15Sec",e[e.MidRoll30Sec=30]="MidRoll30Sec",e[e.MidRoll60Sec=60]="MidRoll60Sec"}(ve||(ve={})),function(e){e[e.InStream=1]="InStream",e[e.InBanner=2]="InBanner",e[e.InArticle=3]="InArticle",e[e.InFeed=4]="InFeed",e[e.Interstitial=5]="Interstitial"}(be||(be={})),function(e){e[e.InStream=1]="InStream",e[e.Overlay=2]="Overlay"}(we||(we={})),function(e){e[e.OnVideoCompletion=1]="OnVideoCompletion",e[e.OnLeavingViewport=2]="OnLeavingViewport",e[e.OnLeavingViewportContinues=3]="OnLeavingViewportContinues"}(Ae||(Ae={})),function(e){e[e.Unknown=0]="Unknown",e[e.AboveTheFold=1]="AboveTheFold",e[e.Deprecated=2]="Deprecated",e[e.BelowTheFold=3]="BelowTheFold",e[e.Header=4]="Header",e[e.Footer=5]="Footer",e[e.Sidebar=6]="Sidebar",e[e.FullScreen=7]="FullScreen"}(Ee||(Ee={})),function(e){e[e.Vast10=1]="Vast10",e[e.Vast20=2]="Vast20",e[e.Vast30=3]="Vast30",e[e.Vast10Wrapper=4]="Vast10Wrapper",e[e.Vast20Wrapper=5]="Vast20Wrapper",e[e.Vast30Wrapper=6]="Vast30Wrapper",e[e.Vast40=7]="Vast40",e[e.Vast40Wrapper=8]="Vast40Wrapper",e[e.Daast10=9]="Daast10",e[e.Daast10Wrapper=10]="Daast10Wrapper"}(Te||(Te={})),function(e){e[e.Vpaid10=1]="Vpaid10",e[e.Vpaid20=2]="Vpaid20",e[e.Mraid1=3]="Mraid1",e[e.Ormma=4]="Ormma",e[e.Mraid2=5]="Mraid2",e[e.Mraid3=6]="Mraid3"}(Ie||(Ie={})),function(e){e[e.Streaming=1]="Streaming",e[e.Progressive=2]="Progressive",e[e.Download=3]="Download"}(Se||(Se={}));var _e=function(){var e=z(f);return e||(e=ce()),Re(e),le()?"tr"+e:e},Re=function(e){J(f,e,30)},Oe=function(e){var t={};return Object.keys(e).forEach((function(n){var i=e[n];Array.isArray(i)?t[n]=i.join(","):t[n]=i})),t},Ce=function(e,t,n){var i,o=V().consentManager,r={ad_unit:e,auction_timeout:n,inventory_type:"web",additional_targeting:Oe(t),property_id:j(),opportunity_data:{platform:"web",connection_type:W()},site:{page:document.location.href,referer:document.referrer},matched_ids:{ids:(i={},Object.keys(anaStorage).forEach((function(e){0===e.indexOf(I)&&(i[e.slice(I.length)]=anaStorage.getItem(e))})),i)},consent:{tcfV2:o.tcfV2String,usPrivacyString:o.usPrivacyString},session_id:_e()},a=V().getUserIdentity();return a.email?r.opportunity_data.lr_envelope={identifier:a.email,identifier_type:R}:a.envelope&&"noEnvelope"!==a.envelope&&(r.opportunity_data.liveramp_envelope=a.envelope),r},ke=function(e,t,n,i,o,r,a,s,d){var c=Ce(e,t,d);return c.video_delivery=Se.Progressive,c.video_placement=n,c.video_playback_method=i,c.video_position=o,c.video_start_delay=r,c.video_width=a,c.video_height=s,c},Pe={BannerBids:{get:function(e,t,n,i,o){N("".concat(Le(),"/wana/bids/request"),{uid:ue(),ad_unit:e},Ce(e,t,n),(function(e){switch(e.status){case 200:var t=JSON.parse(e.responseText).bids||[];i({code:200,bids:t.map((function(e){return new de(e)}))});break;case E:var n=void 0;n=JSON.parse(e.responseText).message===T?T:e.status.toString(),i({code:E,bids:[],err_msg:n});break;default:0!==e.status&&console.error("HTTP error "+e.status),i({code:e.status,bids:[],err_msg:e.status.toString()})}}),o)},invalidate:function(e,t,n,i){H("invalidating bids for adUnitID ".concat(e,":"),t);var o=t.map((function(e){var t=e.toCustomJSON();return t.creative="",t.impression_pixels=[],t.view_pixels=[],t.click_pixels=[],t}));N("".concat(Le(),"/wana/bids/invalidate"),{uid:ue(),ad_unit:e},{bids:o},n,i)}},VideoBids:{get:function(e,t,n,i,o,r,a,s,d,c,l){var u=ke(e,t,n,o,i,r,a,s,d);N("".concat(Le(),"/wana/bids/request"),{uid:ue(),ad_unit:e},u,(function(t){switch(t.status){case 200:var n=JSON.parse(t.responseText);H("".concat(e," got video bid response from ANA"),n);var i=n.bids||[];c({code:200,fallback_vast_url:n.fallback_vast_url,bids:i.map((function(e){return new de(e)}))});break;case E:var o=void 0;o=(n=JSON.parse(t.responseText)).message===T?T:t.status.toString(),c({code:E,bids:[],fallback_vast_url:null,err_msg:o});break;default:0!==t.status&&console.error("HTTP error "+t.status),c({code:t.status,bids:[],fallback_vast_url:null,err_msg:t.status.toString()})}}),l)},vicEvent:function(e,t,n){var i=function(e){return e.split("").map((function(e){return e.charCodeAt(0).toString(16).padStart(2,"0")})).join("")}(ue()+":"+t);U("".concat(Le(),"/ana/vics/video"),{event:e,bk:i,bid_id:n},null,console.warn)}},VMAP:{get:function(e,t,n,i,o,r,a,s,d,c,l){var u=ke(e,t,n,o,i,r,a,s,d);N("".concat(Le(),"/vmap/request"),{uid:ue()},u,(function(t){switch(t.status){case 200:var n=JSON.parse(t.responseText);H("".concat(e," got video bid response from ANA"),n),c({code:200,tag_url:n.tag_url});break;case E:var i=void 0;i=(n=JSON.parse(t.responseText)).message===T?T:t.status.toString(),c({code:E,tag_url:null,err_msg:i});break;default:0!==t.status&&console.error("HTTP error "+t.status),c({code:t.status,tag_url:null,err_msg:t.status.toString()})}}),l)}},UserSync:{getUrls:function(e,t){var n=j();N("".concat(Le(),"/doh/sync"),{uid:ue(),property_id:n},{synced_ids:e},t)},doSync:function(e,t,n){U(t,null,n)}},Hertz:{impression:function(e,t){void 0===t&&(t="adserver"),H("reporting on bid ".concat(t," impression to hertz for ").concat(e));var n=j(),i=ue(),o=_e();U("".concat(Le(),"/hertz/impression"),{uid:i,ad_unit_id:e,session_id:o,bid_id:t,property_id:n},null)}}},Me={rtis:function(e){window.fetch&&fetch("https://api.rlcdn.com/api/identity/envelope?pid=13731",{credentials:"include"}).then((function(e){return e.json()})).then((function(t){t.envelope&&e(t.envelope)})).catch((function(){e("noEnvelope")}))}},Be=function(e,t){t&&(Pe.BannerBids.invalidate(e,[t],null,console.warn),t.renderImpressionPixels())},Le=function(){return window.ana_staging||-1!==window.location.href.indexOf(y)?c.replace("https://","https://staging."):c},Ne=function(e){var t=e.getBoundingClientRect(),n=t.width*t.height,i=window.innerWidth||document.documentElement.clientWidth,o=window.innerHeight||document.documentElement.clientHeight;return Ue(t,i,o)/n>=.5},Ue=function(e,t,n){return(Math.min(t,e.right)-Math.max(0,e.left))*(Math.min(n,e.bottom)-Math.max(0,e.top))},xe=function(){return xe=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},xe.apply(this,arguments)},Ve={adUnitID:"",format:e.HORIZONTAL,elementID:"",collapseBeforeFill:!1,collapseIfNoFill:!1,dimensions:null,baseTargeting:{},passThroughANA:!1,apsEnabled:!0,adServerRender:!0,disableViewabilityMonitor:!1},je=function(){function e(e,t){this.options=xe(xe({},Ve),t),this.anaWeb=e,this.adUnitID=this.options.adUnitID,this.elementID=this.options.elementID,this.dimensions=this.options.dimensions,this.baseTargeting=xe({},this.options.baseTargeting),this.passThroughANA=this.options.passThroughANA,this.apsEnabled=e.apsEnabled&&this.options.apsEnabled,this.adServerRender=this.options.adServerRender,this.isSemiStickyUnit=!!this.options.isSemiStickyUnit,this.disableViewabilityMonitor=this.options.disableViewabilityMonitor,this.adLoadCallback=this.options.onAdLoad,this.refreshCount=0,this.currentBid=null,this.hasBeenViewed=!1,this.impCount=0}return e.prototype.updateBaseTargeting=function(e){this.baseTargeting=xe(xe({},this.baseTargeting),e)},e.prototype.fetchANABids=function(e,t){var n=this;if(!this.anaWeb.hasFocus()&&this.refreshCount>0)return H("prevent ad slot refresh - document not in focus"),this.anaWeb.eventsTracker.adAttemptAborted(this.adUnitID,"not-in-focus"),t&&t();if(this.refreshCount++,this.passThroughANA)e&&e([]);else{var i=xe(xe({},this.anaWeb.globalTargeting),this.baseTargeting),o=this.anaWeb,r=this.adUnitID;this.anaWeb.eventsTracker.adAttemptMade(r),Pe.BannerBids.get(this.adUnitID,i,o.auctionTimeout,(function(i){var a=[];switch(setTimeout((function(){n.anaWeb.syncUserCookies()}),1e3),i.code){case 200:a=i.bids,o.eventsTracker.adAttemptSucceded(r,a.length),a.length>0&&o.bidManager.addBids(a,r);break;case E:return i.err_msg===T&&(console.warn("#".concat(n.elementID," ").concat(r," ANA user reached fcap")),o.eventsTracker.adAttemptFailed(r,"fcap")),void(t&&t(i.err_msg))}e&&e(a)}),(function(t){0!==t.status&&console.error(t),o.eventsTracker.adAttemptFailed(r,"".concat(t.status)),e&&e([])}))}},e.prototype.fetchAPSBids=function(e,t){throw Error("method `fetchAPSBids` is not implemented")},e.prototype.updateTargeting=function(){},e.prototype.getTopBid=function(e){void 0===e&&(e=!0);var t=this.anaWeb,n=this.adUnitID;return t.bidManager.getBid(n,e)},e.prototype.renderInElement=function(e,t,n){if(document.getElementById(e)){var i=this.adUnitID,o=this.anaWeb;!function(e,t,n){var i=document.getElementById(e);if(!i)throw Error("tried to render ad on missing element "+e);for(;i.firstChild;)i.removeChild(i.firstChild);"none"===i.style.display&&(i.style.display="inline-block",i.style.lineHeight="0px");var o=document.createElement("iframe");o.setAttribute("srcdoc",t.Creative),o.setAttribute("frameborder","0"),o.setAttribute("scrolling","no"),o.setAttribute("marginheight","0"),o.setAttribute("marginwidth","0"),o.setAttribute("TOPMARGIN","0"),o.setAttribute("LEFTMARGIN","0"),o.setAttribute("allowtransparency","true");var r=t.Width,a=t.Height;o.setAttribute("width","".concat(r)),o.setAttribute("height","".concat(a)),i.append(o),oe||(oe=setInterval((function(){return se(n)}),25))}(e,t,o),Be(i,t),o.eventsTracker.slotRendered(this.adUnitID,t),o.bidManager.useBid(i,t.BidID),this.onAdLoad(e,t,n)}else console.error("missing element for direct render")},e.prototype.alreadyRendered=function(){throw Error("unimplemented method: alreadyRendered")},e.prototype.isWaitingForView=function(){return this.impCount>0&&!this.hasBeenViewed},e.prototype.onAdLoad=function(e,t,n){var i=this;this.impCount+=1,this.hasBeenViewed=!1,this.currentBid=t,this.currentOnView=n,this.adLoadCallback&&this.adLoadCallback(),this.currentViewMonitorStop=function(e,t,n,i){var o=!1,r=n||0,a=function(){return o||(clearInterval(s),o=!0),r},s=setInterval((function(){var n=document.getElementById(e);if(!n)return H("viewability monitor: missing element ".concat(e,". stopping monitor")),void a();Ne(n)?r++:r=0,r>=20&&(H("viewability monitor: viewed ".concat(e,". stopping monitor")),t&&t.renderViewPixels(),i&&i(),a())}),50);return a}(e,t,0,(function(){i.hasBeenViewed=!0,n&&n()}))},e}();je.prototype.toString=function(){return"ANASlot('".concat(this.adUnitID,"', '").concat(this.elementID,"')")};var qe,Fe=(qe=function(e,t){return qe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},qe(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}qe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Ge=function(){return Ge=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ge.apply(this,arguments)},We=function(e,t,n){googletag.cmd.push((function(){googletag.pubads().addEventListener(e,(function(e){e.slot.getSlotElementId()===t&&n(e)}))}))},He=function(e){function t(t,n){var i,o,r=e.call(this,t,n)||this;if(r.fetched=function(){H("fetched ".concat(r))},r.rendered=function(){H("rendered ".concat(r))},r.format=r.options.format,r.collapseBeforeFill=r.options.collapseBeforeFill,r.collapseIfNoFill=r.options.collapseIfNoFill,r.slot=null,r.currentBid=null,r.slotType=ne.GOOGLE,r.attemptCount=0,r.pendingRefresh=!1,r.resetRequestMgr(),r.anaWeb.lazyLoad)return r.fetchBids(),F()&&(We("slotRequested",r.elementID,r.fetched),We("slotOnload",r.elementID,r.rendered)),r;if(i=r.adUnitID,o=new RegExp(/\/(\d+)(\/([\.|A-Z|a-z|\d|_|\-|\*|â€œ|\!|\\|\(|\)])+)+\/*/),i.length>100||!o.test(i))throw Error("Invalid AdunitID format, ".concat(r));if(!function(e){if(!Array.isArray(e)||0===e.length)return!1;if(2!==e.length||Array.isArray(e[0])||Array.isArray(e[1])){for(var t=!0,n=0,i=e;n<i.length;n++){var o=i[n];Array.isArray(o)?2!==o.length||"number"!=typeof o[0]||"number"!=typeof o[1]?t=!1:parseInt(o[0].toString())===o[0]&&parseInt(o[1].toString())===o[1]||(t=!1):t=!1}return t}return!(!Number.isInteger(e[0])||!Number.isInteger(e[1]))}(r.dimensions))throw Error("Invalid Adunit size, should be an array of bidimensional integer arrays, or it can be one bidimesional array of integers, ".concat(r));if(!Z(r.elementID))throw Error("Invalid elementID, might not be present of the page or already been used by another adUnit, ".concat(r));return googletag.cmd.push((function(){r.registerSlot()})),r}return Fe(t,e),t.prototype.resetRequestMgr=function(){this.requestMgr={didDirectRender:!1,anaRequestComplete:!1,apsRequestComplete:!1,gptRefreshComplete:!1,requestStarted:!1},this.currentBid=null},t.prototype.fetchAPSBids=function(e){var t=this;this.anaWeb.apsEnabled&&window.apstag.fetchBids({slots:[{slotID:this.elementID,slotName:this.adUnitID,sizes:this.dimensions}]},(function(n){googletag.cmd.push((function(){t.updateApsTargeting(),t.apsRequestCompleted()})),e&&e(n)}))},t.prototype.anaRequestCompleted=function(){this.requestMgr.anaRequestComplete=!0},t.prototype.apsRequestCompleted=function(){this.requestMgr.apsRequestComplete=!0},t.prototype.alreadyRendered=function(){return!!this.requestMgr.didDirectRender&&(this.requestMgr.didDirectRender=!1,!0)},t.prototype.maybeRenderBid=function(e){return!(!e||this.adServerRender&&!e.DirectRender)&&(Q(e,this),this.requestMgr.didDirectRender=!0,this.renderInElement(this.elementID,e),!0)},t.prototype.removeSlot=function(){var e=this;googletag.cmd.push((function(){var t=e.slot;googletag.destroySlots([t]),e.slot=null,document.getElementById(e.elementID).innerHTML=null}));var t=this.anaWeb,n=t.createdSlots.indexOf(this);-1!==n&&t.createdSlots.splice(n,1)},t.prototype.setAdServerRender=function(e){this.adServerRender=e},t.prototype.updateAnaTargeting=function(){var e=this,t=this.getTopBid(!0),n=this.slot,i=this.baseTargeting;if(t){if(this.currentBid=t,this.maybeRenderBid(t))return;null===n?(H("updateTargeting - register slot for ".concat(this)),this.registerSlot(t.Targeting)):Object.keys(Ge(Ge({},i),t.Targeting)).forEach((function(i){H("updateTargeting - set targeting ".concat(i,", ").concat(t.Targeting[i]," for ").concat(e)),n.setTargeting(i,t.Targeting[i])}))}else null===n&&(H("updateTargeting - register slot with no bid for ".concat(this)),this.registerSlot());this.updateRefreshCountTargeting()},t.prototype.updateApsTargeting=function(){window.apstag.setDisplayBids()},t.prototype.bidRequestReturned=function(e){return void 0===e&&(e=!0),!!this.requestMgr.anaRequestComplete&&(this.apsEnabled?!!this.requestMgr.apsRequestComplete&&(e&&this.refreshGPTSlot(),!0):(e&&this.refreshGPTSlot(),!0))},t.prototype.refreshGPTSlot=function(){var e=this;if(this.requestMgr.didDirectRender)return H("refreshGPTSlot, skipping since slot was rendered directly"),console.warn("resync all bidders from direct render"),void setTimeout((function(){e.anaWeb.syncUserCookies()}),1e3);this.requestMgr.gptRefreshComplete?H("refreshGPTSlot, skipping since slot is already refreshed"):(this.requestMgr.gptRefreshComplete=!0,this.requestMgr.requestStarted=!1,this.currentBid&&this.anaWeb.eventsTracker.targetingSent(this.adUnitID),this.adServerRender&&googletag.cmd.push((function(){e.updateRefreshCountTargeting(),H("Calling GAM refresh for ",e),googletag.pubads().refresh([e.slot]),console.warn("resync all bidders from single slot"),setTimeout((function(){e.anaWeb.syncUserCookies()}),1e3)})))},t.prototype.refresh=function(e){var t=this;if(this.anaWeb.shouldUseViewabilityMonitor&&!this.disableViewabilityMonitor){if(this.pendingRefresh)return;if(this.isWaitingForView()||this.requestMgr.requestStarted)return this.pendingRefresh=!0,void(this.pendingRefreshDone=e)}this.pendingRefresh&&(this.pendingRefresh=!1),this.hasBeenViewed=!1,this.slot&&googletag.cmd.push((function(){t.slot.clearTargeting()})),this.resetRequestMgr(),this.requestMgr.requestStarted=!0;if(this.apsEnabled){this.fetchAPSBids((function(e){H("APS responded with bids for ".concat(t),e),googletag.cmd.push((function(){t.requestMgr.gptRefreshComplete||t.updateApsTargeting(),t.apsRequestCompleted(),t.bidRequestReturned()}))}))}this.fetchANABids((function(n){H("ANA responded with bids for ".concat(t),n),e&&e(n),googletag.cmd.push((function(){t.requestMgr.gptRefreshComplete||t.updateAnaTargeting(),t.anaRequestCompleted(),t.bidRequestReturned()}))}),(function(){H("ANA responded with NO bids for ".concat(t)),e&&e([]),googletag.cmd.push((function(){t.requestMgr.gptRefreshComplete||t.updateAnaTargeting(),t.anaRequestCompleted(),t.bidRequestReturned()}))})),setTimeout(this.onRefreshTimeout.bind(this),this.anaWeb.auctionTimeout+_)},t.prototype.onRefreshTimeout=function(){this.requestMgr.gptRefreshComplete||this.refreshGPTSlot()},t.prototype.registerSlot=function(e){var t=this;H("registerSlot - define slot for ".concat(this));var n=this,i=n.dimensions,o=n.format,r=n.collapseBeforeFill,a=n.collapseIfNoFill,s=n.adUnitID,d=n.elementID,c=n.baseTargeting,l=this.prepareDimensions(i,o);this.slot=googletag.defineSlot(s,l,d);var u=this.slot;We("impressionViewable",this.elementID,this.onViewHandler.bind(this)),We("slotRenderEnded",this.elementID,(function(){t.onAdLoad(t.elementID,t.currentBid)})),u.setCollapseEmptyDiv(r,a);var h=Ge(Ge({},c),e);h&&Object.keys(h).length&&Object.keys(h).forEach((function(e){H("registerSlot - set targeting ".concat(e,", ").concat(h[e]," for ").concat(t)),u.setTargeting(e,h[e])})),u.addService(googletag.pubads()),googletag.display(d)},t.prototype.updateRefreshCountTargeting=function(){this.slot.getTargetingKeys&&void 0===this.slot.getTargetingKeys().find((function(e){return"mlrf"===e}))&&(this.attemptCount++,this.slot.setTargeting("mlrf",this.attemptCount.toString()))},t.prototype.onViewHandler=function(e){this.currentBid?(H("Rendering ViewPixels for ".concat(this.adUnitID),e),this.currentBid.renderViewPixels()):H("Ignoring ViewPixels on AdUnit since it does not have a currentBid on ",this.adUnitID),this.hasBeenViewed=!0,this.pendingRefresh&&(this.pendingRefresh=!1,this.refresh(this.pendingRefreshDone))},t.prototype.prepareDimensions=function(e,t){return e&&e.length?e:a[t]||[]},t.prototype.fetchBids=function(){var e=this;this.fetchANABids((function(t){H("fetchBids - ANA responded with bids for ".concat(e),t),googletag.cmd.push((function(){e.updateAnaTargeting(),e.anaRequestCompleted()}))}),(function(t){throw Error("".concat(e.slot," error getting ANA bids: ").concat(t))})),this.apsEnabled&&this.fetchAPSBids((function(t){H("fetchBids - APS responded with bids for ".concat(e),t),googletag.cmd.push((function(){e.apsRequestCompleted()}))}))},t}(je);He.prototype.toString=function(){return"BannerSlot('".concat(this.adUnitID,"', '").concat(this.elementID,"')")};var Je=function(){function e(e,t,n,i,o){this.playerType=e,this.adUnitID=i,this.targeting=o,this.adsManagerLoadedCustomCbk=t,this.videoPlayerID=n,this.html5Player=document.getElementById(n),this.initAds()}return e.prototype.initAds=function(){throw new Error("must be implemented by child class")},e.prototype.anaBidRequest=function(e,t){var n=this;e((function(e){if(e.includes("bids=&")&&!t)throw Error("did not receive ANA bid and ad server render disabled");n.imaInit(e)}),(function(e){console.warn("".concat(n.videoPlayerID," error getting ANA bids: ").concat(e))}))},e.prototype.imaInit=function(e){throw new Error("must be implemented by child class")},e.prototype.vastUrlAndVideoSrc=function(e){H("".concat(this.videoPlayerID," imaInit"));var t,n=(t=window.ana_vast)||(-1!==window.location.href.indexOf("ana_vast=")&&(t=M(window.location.href).searchParams.get(m))?t:"");if(n||(n=e),n){var i=this.html5Player.currentSrc;if(!i&&""!==i)throw Error("".concat(this.videoPlayerID," does not have a valid src"));return H("".concat(this.videoPlayerID," vast used: ").concat(n,", src: ").concat(i)),{videoVastUrl:n,videoSrc:i}}H("".concat(this.videoPlayerID," we don't have an ad to show"))},e.prototype.adsManagerLoadedCallback=function(e){throw new Error("must be implemented by child class")},e.prototype.addDefaultListeners=function(){var e=this,t=window.google;this.adsManagerLoadedCustomCbk&&this.adsManagerLoadedCustomCbk(this.html5Player,this.playerType,this.adsManager);var n=[t.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,t.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,t.ima.AdEvent.Type.CLICK,t.ima.AdEvent.Type.VIDEO_CLICKED,t.ima.AdEvent.Type.VIDEO_ICON_CLICKED,t.ima.AdEvent.Type.STARTED,t.ima.AdEvent.Type.AD_PROGRESS,t.ima.AdEvent.Type.AD_BUFFERING,t.ima.AdEvent.Type.IMPRESSION,t.ima.AdEvent.Type.PAUSED,t.ima.AdEvent.Type.RESUMED,t.ima.AdEvent.Type.FIRST_QUARTILE,t.ima.AdEvent.Type.MIDPOINT,t.ima.AdEvent.Type.THIRD_QUARTILE,t.ima.AdEvent.Type.COMPLETE,t.ima.AdEvent.Type.DURATION_CHANGE,t.ima.AdEvent.Type.USER_CLOSE,t.ima.AdEvent.Type.LOADED,t.ima.AdEvent.Type.ALL_ADS_COMPLETED,t.ima.AdEvent.Type.SKIPPED,t.ima.AdEvent.Type.LINEAR_CHANGED,t.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,t.ima.AdEvent.Type.AD_METADATA,t.ima.AdEvent.Type.AD_BREAK_READY,t.ima.AdEvent.Type.LOG,t.ima.AdEvent.Type.VOLUME_CHANGED,t.ima.AdEvent.Type.VOLUME_MUTED,t.ima.AdEvent.Type.INTERACTION],i=function(){var t;t=e.adUnitID,Pe.Hertz.impression(t)};this.adsManager.addEventListener(t.ima.AdEvent.Type.IMPRESSION,i),this.adsManager.addEventListener(t.ima.AdEvent.Type.IMPRESSION,(function(){return e.adsManager.removeEventListener(t.ima.AdEvent.Type.IMPRESSION,i)}));for(var o=0;o<n.length;o++)this.adsManager.addEventListener(n[o],this.onAdEvent.bind(this)),H("".concat(this.videoPlayerID," bind ").concat(n[o]," ad event"))},e.prototype.onAdEvent=function(e){void 0===e&&(e={});var t=window.google,n=e.type;n!==t.ima.AdEvent.Type.AD_PROGRESS&&H("".concat(this.videoPlayerID," ad event: ").concat(n))},e}(),ze=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ke=function(e){function t(t,n,i,o){var r=e.call(this,ie.VIDEO_JS,t,n,i,o)||this;return r.toggleOverlayedBtnContainer=function(){r.overlayedBtnContainer&&(r.overlayedBtnContainer.hidden=!r.overlayedBtnContainer.hidden)},r.onComplete=function(){r.adPlaying=!1},r.onStarted=function(){r.adPlaying=!0},r.onSkipped=function(){r.adPlaying=!1,r.adDisplayContainer.destroy(),r.html5Player.play()},r.onContentPauseRequested=function(){r.adPlaying=!0,r.html5Player.pause()},r.onContentResumeRequested=function(){r.adPlaying=!1,r.html5Player.play()},r.onAdLoaded=function(e){e.getAd().isLinear()||r.html5Player.play()},H("initializing IMAManagerHTML5 for",n),r.adPlaying=!1,r}return ze(t,e),t.prototype.initAds=function(){var e=this,t=window.google;if(!this.html5Player)throw Error("internal videojs element was not found on the page using id=".concat(this.videoPlayerID,", this is probably because this was initialized before videojs was ready"));if(t){this.overlayedBtnContainer=document.createElement("div"),this.overlayedBtnContainer.classList.add("ana-ad-overlay"),this.overlayedBtnContainer.id=this.videoPlayerID+"_ana_ad_overlay";var n=document.createElement("div");n.classList.add("ana-ad-container"),n.id=this.videoPlayerID+"_ana_ad_container",this.html5Player.after(this.overlayedBtnContainer,n),this.adDisplayContainer=new t.ima.AdDisplayContainer(n,this.html5Player),this.adsLoader=new t.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.addEventListener(t.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.adsManagerLoadedCallback.bind(this),!1),this.adsLoader.addEventListener(t.ima.AdErrorEvent.Type.AD_ERROR,console.error,!1),this.html5Player.onended=this.adsLoader.contentComplete,window.addEventListener("resize",(function(){if(e.adsManager){var n=e.html5Player.clientWidth,i=e.html5Player.clientHeight;e.adsManager.resize(n,i,t.ima.ViewMode.NORMAL)}}))}else console.error("Google SDK not found.")},t.prototype.imaInit=function(e){if(e&&""!==e){var t=window.google,n=this.vastUrlAndVideoSrc(e).videoVastUrl;this.adsManager&&this.adsManager.destroy(),this.adsLoader.contentComplete();var i=new t.ima.AdsRequest;i.adTagUrl=n,i.linearAdSlotWidth=640,i.linearAdSlotHeight=480,i.nonLinearAdSlotWidth=640,i.nonLinearAdSlotHeight=150,i.forceNonLinearFullSlot=!0,i.omidAccessModeRules={},i.omidAccessModeRules[t.ima.OmidVerificationVendor.OTHER]=t.ima.OmidAccessMode.FULL,this.adsLoader.requestAds(i),this.overlayedBtnContainer.addEventListener("click",this.onOverlayedBtnContainerClick.bind(this)),this.overlayedBtnContainer.addEventListener("touchend",this.onOverlayedBtnContainerClick.bind(this))}},t.prototype.onOverlayedBtnContainerClick=function(e){e.cancelable&&e.preventDefault(),this.adPlaying?this.adsManager.resume():this.playAds(),this.toggleOverlayedBtnContainer()},t.prototype.playAds=function(){var e=window.google;this.adDisplayContainer&&this.adDisplayContainer.initialize(),this.html5Player.load();try{var t=this.html5Player.getBoundingClientRect(),n=t.width,i=t.height;this.adsManager.init(n,i,e.ima.ViewMode.NORMAL),this.adsManager.addEventListener(e.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested),this.adsManager.addEventListener(e.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested),this.adsManager.addEventListener(e.ima.AdEvent.Type.LOADED,this.onAdLoaded),this.adsManager.addEventListener(e.ima.AdEvent.Type.STARTED,this.onStarted),this.adsManager.addEventListener(e.ima.AdEvent.Type.SKIPPED,this.onSkipped),this.adsManager.addEventListener(e.ima.AdEvent.Type.COMPLETE,this.onComplete),this.adsManager.addEventListener(e.ima.AdEvent.Type.PAUSED,this.toggleOverlayedBtnContainer),this.adsManager.start()}catch(e){this.html5Player.play()}},t.prototype.adsManagerLoadedCallback=function(e){H("".concat(this.videoPlayerID," AdsManager loaded"));var t=window.google,n=new t.ima.AdsRenderingSettings;n.restoreCustomPlaybackStateOnAdBreakComplete=!0,n.uiElements=[t.ima.UiElements.AD_ATTRIBUTION,t.ima.UiElements.COUNTDOWN],this.adsManager=e.getAdsManager(this.html5Player,n),this.addDefaultListeners()},t}(Je),$e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Xe=function(e){function t(t,n,i,o){var r=e.call(this,ie.VIDEO_JS,t,n,i,o)||this;return H("initializing IMAManagerVideoJS for",n),navigator.userAgent.match(/iPad|Android/i)&&r.html5Player.hasAttribute("controls")&&r.html5Player.removeAttribute("controls"),r.overlayedBtnContainer=document.getElementById(n),r}return $e(t,e),t.prototype.initAds=function(){var e,t=window.videojs,n=window.google;if(!t)throw new Error("VideoJS not detected, dependency was not added correctly");if(n){if(this.html5Player=document.getElementById(this.videoPlayerID+"_html5_api"),!this.html5Player)throw Error("internal videojs element was not found on the page using id=".concat(this.videoPlayerID,", this is probably because this was initialized before videojs was ready"));this.videoJSPlayer=t(this.videoPlayerID);var i={id:this.videoPlayerID,adLabel:"Advertisement",disableAdControls:!1,showControlsForJSAds:!0,adsManagerLoadedCallback:this.adsManagerLoadedCallback.bind(this),omidVendorAccess:(e={},e[n.ima.OmidVerificationVendor.OTHER]=n.ima.OmidAccessMode.FULL,e)};this.videoJSPlayer.ima?this.videoJSPlayer.ima(i):console.error("IMA not found for video JS")}else console.error("Google SDK not found.")},t.prototype.imaInit=function(e){if(e&&""!==e){var t=this.vastUrlAndVideoSrc(e),n=t.videoVastUrl,i=t.videoSrc;this.videoJSPlayer.ima.setContentWithAdTag(i,n,!1),this.videoJSPlayer.ima.requestAds(),this.boundBidRequestClick=this.onOverlayedBtnContainerClick.bind(this),this.boundBidRequestTouch=this.onOverlayedBtnContainerClick.bind(this),this.overlayedBtnContainer.addEventListener("click",this.boundBidRequestClick),this.overlayedBtnContainer.addEventListener("touchend",this.boundBidRequestTouch)}},t.prototype.onOverlayedBtnContainerClick=function(e){e.cancelable&&e.preventDefault(),this.videoJSPlayer.ima.initializeAdDisplayContainer(),this.overlayedBtnContainer.removeEventListener("click",this.boundBidRequestClick),this.overlayedBtnContainer.removeEventListener("touchend",this.boundBidRequestTouch)},t.prototype.adsManagerLoadedCallback=function(){H("".concat(this.videoPlayerID," AdsManager loaded")),this.adsManager=this.videoJSPlayer.ima.getAdsManager(),this.addDefaultListeners()},t}(Je),Ze=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Qe=function(){return Qe=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Qe.apply(this,arguments)},Ye=function(e){function t(t,n,i){var o,r=e.call(this,t,i)||this;if(r.playerType=n,void 0===i.startDelay)throw Error("startDelay must be specified for video ad slots");if(i.startDelay<-2)throw Error("startDelay must be valid");if(void 0===i.adPlacement)throw Error("adPlacement must be specified for video ad slots");if(void 0===i.adPosition)throw Error("adPosition must be specified for video ad slots");if(i.adPosition<1||i.adPosition>7)throw Error("adPosition must be valid not Unknown");if(!i.playbackMethod||i.playbackMethod<1||i.playbackMethod>6)throw Error("playbackMethod must be specified for video ad slots");if(r.startDelay=i.startDelay,r.adPlacement=i.adPlacement,r.adPosition=i.adPosition,r.playbackMethod=i.playbackMethod,r.wrapperDiv=document.getElementById(r.elementID),r.dimensions&&0===r.dimensions.length)throw new Error("".concat(r.elementID," dimensions must be either omitted or have at least one element in the array"));switch(r.playerType){case ie.VIDEO_JS:o=Xe;break;case ie.HTML5:o=Ke;break;default:throw Error("unsupported video player type: ".concat(n))}return r.videoManager=new o(i.adsManagerLoadedCbk,r.elementID,r.adUnitID,r.baseTargeting),r.videoManager.anaBidRequest(r.fetchANAVMAP.bind(r),r.adServerRender),r}return Ze(t,e),t.prototype.fetchANAVMAP=function(e,t){var n=this,i=this.currentDimensions(),o=Qe(Qe({},this.anaWeb.globalTargeting),this.baseTargeting);Pe.VMAP.get(this.adUnitID,o,this.adPlacement,this.adPosition,this.playbackMethod,this.startDelay,i[0][0],i[0][1],this.anaWeb.auctionTimeout,(function(i){var o="";switch(i.code){case 200:o=i.tag_url,n.anaWeb.eventsTracker.adAttemptSucceded(n.adUnitID,0);break;case E:return void(i.err_msg===T?console.warn("#".concat(n.elementID," ").concat(n.adUnitID," ANA user reached fcap")):(n.anaWeb.eventsTracker.adAttemptFailed(n.adUnitID,"fcap"),t&&t(i.err_msg)))}n.adServerRender||(o+="&ad_server_render=0"),e&&e(o)}),(function(e){0!==e.status&&console.error(e),n.anaWeb.eventsTracker.adAttemptFailed(n.adUnitID,e.status.toString()),t(e.status.toString())})),this.anaWeb.eventsTracker.adAttemptMade(this.adUnitID)},t.prototype.fetchAPSBids=function(e,t){},t.prototype.currentDimensions=function(){var e;if(this.dimensions)e=this.dimensions;else{var t=this.playerDimensions();e=[[t.w,t.h]]}if(0===e.length||2!==e[0].length)throw new Error("".concat(this.elementID," final dimensions are not valid: ").concat(e));return e},t.prototype.playerDimensions=function(){var e=this.wrapperDiv.getBoundingClientRect(),t=Math.floor(e.width),n=Math.floor(e.height);if(0===t||0===n)throw Error("".concat(this.elementID," wrong video ad slot dimensions: ").concat(t,"x").concat(n));return{w:t,h:n}},t}(je);Ye.prototype.toString=function(){return"VideoSlot('".concat(this.adUnitID,"', ").concat(this.playerType,", '").concat(this.elementID,"')")};var et,tt=function(){function e(e){if(this.anaWeb=e,window.addEventListener)window.addEventListener("message",this.handleMessage.bind(this),!1),window.addEventListener("unload",(function(){e&&e.eventsTracker&&e.eventsTracker.pageviewExit()}));else{if(!window.attachEvent)throw Error("No event listener found!");window.attachEvent("onmessage",this.handleMessage.bind(this))}}return e.prototype.handleMessage=function(e){if(e&&(a=e.origin,w.some((function(e){return e.test(a)})))&&e.data&&e.data.bidID){var t=e.data,n=t.adUnitID,i=t.bidID,o=this.anaWeb.bidManager.getBidToRender(n,i);if(o){var r=this.anaWeb.createdSlots.find((function(e){return e.adUnitID===n}));Q(o,r),e.source?e.source.postMessage(JSON.stringify(o),e.origin):console.error("e.source is not available in this context"),Be(n,o),this.anaWeb.eventsTracker.slotRendered(n,o)}}var a;e&&function(e){return A.some((function(t){return t.test(e)}))}(e.origin)&&e.data&&e.data.msgType&&"cookieSyncingSuccess"===e.data.msgType&&(H("synced cookie message event for ".concat(e.data.bidderId,", id=").concat(e.data.partnerUid)),he(e.data.bidderId,e.data.partnerUid))},e}(),nt=function(){return nt=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},nt.apply(this,arguments)},it={enableSingleRequest:!1,globalTargeting:{},sandboxIframe:!1,collapseEmptyDivs:!1,preCollapseEmptyDivs:!1,enableLazyLoad:!1,setPPID:!1,lazyLoadOptConfig:{fetchMarginPercent:800,renderMarginPercent:400,mobileScaling:3}},ot=function(e,t){if(void 0===t&&(t=null),window.googletag&&void 0!==window.googletag.pubads)throw new Error("attempting to initialize ANA sdk with pre-initialized gpt integration. aborting");var n;!function(e){document.body||console.error("loadGPTTagJS called before there is a body to append to");var t=document.createElement("script");t.async=!0,t.defer=!0,t.src=v,document.body.appendChild(t),H("added GPT script on the page ".concat(v)),e&&e.eventsTracker&&e.eventsTracker.gptAdded()}(t);var i=(n=e?nt(nt({},it),e):it).enableSingleRequest,o=n.globalTargeting,r=n.sandboxIframe,a=n.collapseEmptyDivs,s=n.enableLazyLoad,d=n.lazyLoadOptConfig,c=n.preCollapseEmptyDivs,l=n.setPPID;window.googletag=window.googletag||{},googletag.cmd=googletag.cmd||[],googletag.cmd.push((function(){t&&t.eventsTracker&&t.eventsTracker.gptLoaded(),i&&googletag.pubads().enableSingleRequest(),r&&googletag.pubads().setSafeFrameConfig({sandbox:!0}),a&&googletag.pubads().collapseEmptyDivs(c),o&&Object.keys(o).length&&Object.keys(o).forEach((function(e){googletag.pubads().setTargeting(e,o[e])})),s?googletag.pubads().enableLazyLoad(d):googletag.pubads().disableInitialLoad(),t&&l&&googletag.pubads().setPublisherProvidedId(t.uid),googletag.enableServices(),window.addEventListener("blur",(function(){"IFRAME"===document.activeElement.nodeName?(at(t),st(t)):rt=null})),window.addEventListener("focus",(function(){rt=null}))}))},rt=null,at=function(e){var t=document.activeElement;if(t&&"IFRAME"===t.tagName&&rt!==t&&(rt=t,document.activeElement.parentNode&&"DIV"===document.activeElement.parentNode.nodeName)){var n=document.activeElement.parentNode,i=null,o="";n.parentNode&&"DIV"===n.parentNode.nodeName&&n.parentNode.getAttribute("id")?(i=n.parentNode,o=i.getAttribute("id")):(i=n,o=n.getAttribute("id")),googletag.pubads().getSlots().forEach((function(t){if(o===t.getSlotElementId()&&e){var n=e.getBannerSlot(o);n&&n.currentBid?(H("Rendering ClickPixels if available for adUnit",o),n.currentBid.renderClickPixels()):H("Ignoring click pixel on add since it does not have a currentBid on",o)}}))}},st=function(e){setInterval((function(){at(e)}),25)};!function(e){e.GOOGLE="googletag"}(et||(et={}));var dt=function(){return dt=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},dt.apply(this,arguments)},ct={pubID:null,adServer:et.GOOGLE},lt=function(e){if(window.apstag)throw new Error("attempting to initialize ANA sdk with pre-initialized apt integration");!function(){function e(e,t){window.apstag._Q.push([e,t])}document.body||console.error("loadAPSTagJS called before there is a body to append to"),window.apstag={init:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e("i",t)},fetchBids:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e("f",t)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]};var t=document.createElement("script");t.async=!0,t.src=b;var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),H("added APS script on the page ".concat(b))}();var t=dt(dt({},ct),e),n=t.pubID,i=t.adServer;if(!n)throw new Error("to fully enable amazon publisher tag integration you need to pass at least `pubID`");window.apstag.init({pubID:n,adServer:i})},ut=new(function(){function e(){this._usPrivacyData=null,this._tcData=null}return Object.defineProperty(e.prototype,"tcData",{get:function(){return this._tcData},set:function(e){this._tcData=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tcfV2String",{get:function(){return this._tcData?this._tcData.tcString:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"usPrivacyData",{get:function(){return this._usPrivacyData},set:function(e){this._usPrivacyData=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"usPrivacyString",{get:function(){return this._usPrivacyData?this._usPrivacyData.uspString:null},enumerable:!1,configurable:!0}),e}()),ht=function(){function e(e,t,n){void 0===e&&(e=0),this.count=e,this.timeoutInt=n,this.doneCallback=t}return e.prototype.add=function(e){void 0===e&&(e=1),this.count+=e},e.prototype.decrement=function(e){void 0===e&&(e=1),this.count=this.count-e,0===this.count&&(this.timeoutInt&&clearTimeout(this.timeoutInt),this.doneCallback())},e}(),pt=function(){function e(){this.bidsByID={},this.bidsByAdUnit={},this.usedBidIDs={}}return e.prototype.addBids=function(e,t){var n=this,i=this,o=i.usedBidIDs,r=i.bidsByID,a=i.bidsByAdUnit,s=(0,i.adUnitKey)(t);e.forEach((function(e){var t=e.BidID;e.ClientReceived=(new Date).getTime(),n.getBidByID(t)||o[t]||(r[t]=e,a[s]?a[s].push(e):a[s]=[e])})),a[s].sort((function(e,t){return e.Value-t.Value}))},e.prototype.getBid=function(e,t){void 0===t&&(t=!1);var n=this.bidsByAdUnit,i=(0,this.adUnitKey)(e);if(n[i]&&n[i].length){n[i]=n[i].filter((function(e){return!e.isExpired()}));var o=n[i];if(!t)return s=o[o.length-1];for(var r=Date.now(),a=o.length-1;a>=0;a--){var s;if((s=o[a]).LastNomination<r-1e3)return s.LastNomination=r,s}}return null},e.prototype.getBidByID=function(e){return this.bidsByID[e]||null},e.prototype.getBidToRender=function(e,t){return this.usedBidIDs[t]?null:(this.useBid(e,t),this.getBidByID(t))},e.prototype.useBid=function(e,t){var n=this,i=n.usedBidIDs,o=n.bidsByAdUnit,r=(0,n.adUnitKey)(e);if(!i[t]&&void 0!==o&&void 0!==o[r]){var a=o[r].map((function(e){return e.BidID})).indexOf(t);-1!==a&&o[r].splice(a,1),i[t]=!0}},e.prototype.reset=function(){this.bidsByID={},this.bidsByAdUnit={},this.usedBidIDs={}},e.prototype.adUnitKey=function(e){var t=window.location.href;return"".concat(e,":").concat(t)},e}(),gt="https://xeno-soswcrde4a-uc.a.run.app/events",ft="ANAEventsCache";function mt(){H("ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚ ANA Web SDK ".concat("3.0.1"," ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚")),H("dispatching anaReadyEvent"),document.dispatchEvent(new CustomEvent("ANAReady"))}var yt=function(e,t,n,i){var o=window.pageviewUID;void 0===window.pageviewUID&&(o=ce(),window.pageviewUID=o);var r={uid:ue(),session_id:_e(),event:n,app_id:e,wid:o,lib_version:t,screen_width:Math.floor(performance.now()),device:"web",extra_json:{time_since_page_load:Math.floor(performance.now())}};return i&&(r.impression_type=i.impression_type,r.impression_sub_type=i.impression_sub_type,r.domain=i.bidder,r.extra_json.reason=i.reason,r.extra_json.totalBids=i.totalBids,i.slot&&(r.cohort=i.slot),i.bid&&(r.object_id=i.bid.BidID,r.sizes="".concat(i.bid.Width,"x").concat(i.bid.Height),r.extra_json.placement_id=i.bid.PlacementID,r.extra_json.bid_id=i.bid.BidID,r.extra_json.bid_type=i.bid.BidType,r.domain=i.bid.BidderName,r.extra_json.bidder_name=i.bid.BidderName,r.extra_json.direct_render=i.bid.DirectRender,r.extra_json.floor=i.bid.Floor,r.extra_json.width=i.bid.Width,r.extra_json.height=i.bid.Height,r.extra_json.impression_type=i.bid.ImpressionType,r.extra_json.targeting=i.bid.Targeting,r.extra_json.value=i.bid.Value,r.cookie_creation_ts=i.bid.Value)),r},vt=function(){function e(e,t){var n=this;this.propertyID=e,this.libVersion=t,this.timeoutId=setInterval((function(){return n.tickTimer()}),1e3,this)}return e.prototype.tickTimer=function(){var e=this;this.timeoutId&&clearInterval(this.timeoutId),this.sendCachedEvents(),this.timeoutId=setInterval((function(){return e.tickTimer()}),1e3,this)},e.prototype.sendCachedEvents=function(){var e=anaStorage.getItem(ft),t=null,n=[];if(e)try{n=JSON.parse(e)}catch(e){n=[]}n&&0!==n.length&&(window.XMLHttpRequest?t=new XMLHttpRequest:window.ActiveXObject&&(t=new ActiveXObject("Microsoft.XMLHTTP")),t&&(t.onerror=console.warn,t.open("POST","https://xeno-soswcrde4a-uc.a.run.app/events"),t.setRequestHeader("Content-Type","application/json"),t.send(JSON.stringify({events:n})),anaStorage.setItem(ft,"[]")))},e.prototype.sendBeaconEvent=function(e,t){void 0===t&&(t={}),navigator.sendBeacon&&navigator.sendBeacon(gt,JSON.stringify({events:[yt(this.propertyID,this.libVersion,e,t)]}))},e.prototype.trackEvent=function(e,t){void 0===t&&(t={});var n=anaStorage.getItem(ft),i=[];if(n)try{i=JSON.parse(n)}catch(e){i=[]}i.push(yt(this.propertyID,this.libVersion,e,t));var o=JSON.stringify(i);try{anaStorage.setItem(ft,o),o.length>2097152&&this.sendCachedEvents()}catch(e){var r=i.pop();console.error("Cant add event: ".concat(r.event," to cache, max quota exceeded"))}this.timeoutId},e.prototype.anaLoaded=function(){this.trackEvent("ana_loaded")},e.prototype.gptAdded=function(){this.trackEvent("gpt_added")},e.prototype.gptLoaded=function(){this.trackEvent("gpt_loaded")},e.prototype.slotCreated=function(e,t){this.trackEvent("slot_created",{slot:e,impressionType:t})},e.prototype.adAttemptMade=function(e){this.trackEvent("ad_attempt_made",{slot:e})},e.prototype.adAttemptAborted=function(e,t){this.trackEvent("ad_attempt_aborted",{slot:e,reason:t})},e.prototype.adAttemptFailed=function(e,t){this.trackEvent("ad_attempt_failed",{slot:e,reason:t})},e.prototype.adAttemptSucceded=function(e,t){this.trackEvent("ad_attempt_succeeded",{slot:e,totalBids:t})},e.prototype.slotRendered=function(e,t){this.trackEvent("ana_bid_render",{slot:e,bid:t})},e.prototype.targetingSent=function(e){this.trackEvent("targeting_sent",{slot:e})},e.prototype.pageviewExit=function(){this.sendBeaconEvent("pageview_text")},e}(),bt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),wt=function(){return wt=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},wt.apply(this,arguments)},At=function(e,t,n){for(var i=wt(wt(wt({},e),t),n),o=Oe(i),r=[],a=0,s=Object.keys(o);a<s.length;a++){var d=s[a];r.push("".concat(d,"=").concat(o[d]))}return r.join(";")},Et=!0,Tt=function(e){function t(t,n){var i=e.call(this,t,n)||this;if(i.slotType=ne.SAS,i.pendingRefresh=!1,i.attemptInFlight=!1,i.anaInFlight=!1,i.lastCallTs=0,i.lastRenderTs=0,i.shouldReset=!1,!Z(i.elementID))throw Error("Invalid elementID, might not be present of the page or already been used by another adUnit, ".concat(i));return i}return bt(t,e),t.prototype.refresh=function(e){var t=this;if(this.anaWeb.shouldUseViewabilityMonitor&&!this.disableViewabilityMonitor&&(this.isWaitingForView()||this.attemptInFlight))return this.pendingRefresh=!0,void(this.pendingRefreshDone=e);this.attemptInFlight=!0,this.currentTagId&&!this.shouldReset||(this.shouldReset=!1,this.impCount=0,this.currentTagId="sas_".concat(this.adUnitID,"_").concat(Math.floor(9999999*Math.random())),this.checkTagElement());this.anaInFlight=!0,this.fetchANABids((function(n){H("ANA responded with bids for ".concat(t),n),e&&e(n),t.anaInFlight&&t.requestSAS()}),(function(){H("ANA responded with NO bids for ".concat(t)),e&&e([]),t.endAttempt()})),setTimeout(this.onRefreshTimeout.bind(this),this.anaWeb.auctionTimeout+_)},t.prototype.onRefreshTimeout=function(){this.anaInFlight&&this.requestSAS()},t.prototype.endAttempt=function(){this.attemptInFlight=!1,this.anaInFlight=!1},t.prototype.requestSAS=function(){var e=this;this.anaInFlight=!1,this.currentBid=this.getTopBid();var t=this.currentBid,n=this.adUnitID,i=this.currentTagId;if(t&&t.DirectRender)return this.endAttempt(),void this.renderBid(i,t);window.sas.cmd.push((function(){if(e.checkTagElement(),t&&window.sas.setHeaderBiddingWinner(i,{cpm:t.Value/100,bidder:"assembly",currency:"USD"}),e.impCount>0)return e.lastCallTs=Date.now(),H("sas.refresh ".concat(e.elementID," ").concat(e.currentTagId)),window.sas.refresh(i,{forceMasterFlag:!1,resetTimestamp:!1,target:At(e.anaWeb.globalTargeting,e.baseTargeting,null==t?void 0:t.Targeting)}),void(t&&e.startSASChecker(i,t));var o=e.anaWeb.sasOptions,r={tagId:i,siteId:o.siteID,pageId:o.pageIDGetter(),formatId:n,target:At(e.anaWeb.globalTargeting,e.baseTargeting,null==t?void 0:t.Targeting)};e.lastCallTs=Date.now();var a=!!Et&&(Et=!1,!0);H("sas.call ".concat(e.elementID," ").concat(e.currentTagId)),window.sas.call("std",r,{forceMasterFlag:a,resetTimestamp:a,onLoad:function(t){var n=t.hasAd;H("sas onLoad ".concat(e.elementID," ").concat(e.currentTagId)),e.endAttempt(),n&&(e.lastRenderTs=Date.now(),e.onAdLoad(e.elementID))},onNoad:function(n){H("sas onNoad ".concat(e.elementID," ").concat(e.currentTagId));var i=e.currentBid;e.endAttempt(),e.lastCallTs<e.lastRenderTs||t&&e.renderBid(n.tagId,i)}}),t&&e.startSASChecker(i,t)}))},t.prototype.startSASChecker=function(e,t){var n=this;setTimeout((function(){n.lastCallTs>n.lastRenderTs&&(n.endAttempt(),t&&n.renderBid(e,t))}),500)},t.prototype.renderBid=function(e,t){var n=this;this.checkTagElement();this.renderInElement(e,t,(function(){n.pendingRefresh&&(n.pendingRefresh=!1,n.refresh(n.pendingRefreshDone))})),this.lastRenderTs=Date.now(),H("refreshSASSlot, resync after render"),setTimeout((function(){n.anaWeb.syncUserCookies()}),1e3)},t.prototype.checkTagElement=function(){var e=document.getElementById(this.elementID);if(e){var t=document.createElement("div");t.id=this.currentTagId,e.appendChild(t)}},t.prototype.resetTagID=function(){this.shouldReset=!0},t}(je);Tt.prototype.toString=function(){return"SASSlot('".concat(this.adUnitID,"', '").concat(this.elementID,"')")};var It,St=function(){return St=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},St.apply(this,arguments)},Dt={networkID:0,inSequence:!0,async:!0,siteID:null,pageIDGetter:null},_t=function(){return _t=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_t.apply(this,arguments)},Rt=function(e,t,n){if(n||2===arguments.length)for(var i,o=0,r=t.length;o<r;o++)!i&&o in t||(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))},Ot={slotEventsHandlers:{},gptOptions:{globalTargeting:{}},apsOptions:null,syncCookies:!0,resyncCookiesAfterTimeout:5e3,propertyId:window.location.hostname,videoOptions:null,lightMode:!1,userEmail:null,shouldUseViewabilityMonitor:!1,auctionTimeout:D},Ct=function(){function e(t){void 0===t&&(t={}),this.createdSlots=[],this.createdGoogleSlots=[],this.createdVideoContainers=[];var n,i=_t(_t({},Ot),t),o=i.slotEventsHandlers,r=i.gptOptions,a=i.apsOptions,s=i.syncCookies,d=i.resyncCookiesAfterTimeout,c=i.propertyId,l=i.lightMode,h=i.auctionTimeout,p=i.userEmail,g=i.shouldUseViewabilityMonitor,f=i.sasOptions;f&&(this.sasMode=!0),this.sasOptions=f,K("auctionTimeout")&&parseInt(K("auctionTimeout"))>0&&(n=parseInt(K("auctionTimeout"))),this.bidManager=new pt,this.consentManager=ut,this.slotEventsHandlers=o,this.syncCookies=s,this.resyncCookiesAfterTimeout=d,this.propertyId=c,this.apsEnabled=!!a,this.refreshedAllSlots=!1,this.globalTargeting=(null==f?void 0:f.globalTargeting)||(null==r?void 0:r.globalTargeting)||{},this.setPPID=r&&!!r.setPPID,this.lazyLoad=r&&r.enableLazyLoad,this.lightMode=!!l,this.auctionTimeout=n||h,this.eventsTracker=new vt(this.propertyId,u),this.msgHandler=new tt(this),this.userEmail=p,this.shouldUseViewabilityMonitor=g,this.eventsTracker.anaLoaded(),window.ANAWebSDKInstance=this,this.setFocusListeners(),t.auctionTimeout||n?(t.auctionTimeout||n)&&H("Setting auctionTimeout to ".concat(this.auctionTimeout)):H("auctionTimeout wasn't provided, using default value: ".concat(D)),(this.auctionTimeout<500||this.auctionTimeout>4e3)&&(this.auctionTimeout=D,console.error("auctionTimeout is out of range (".concat(500," - ").concat(4e3,"), using default value: ").concat(D))),"__tcfapi"in window&&(H("GDPR - consent management framework was found on the page"),window.__tcfapi("getTCData",2,(function(e,t){t?(H("getTCData cbk success",e),ut.tcData=e):H("getTCData cbk fail",e)}))),"__uspapi"in window&&(H("CCPA - consent management framework was found on the page"),window.__uspapi("getUSPData",1,(function(e,t){t?(H("getUSPData cbk success",e),ut.usPrivacyData=e):H("getUSPData cbk fail",e)}))),void 0===this.globalTargeting.SDK&&e.version&&(this.globalTargeting.SDK=e.version),void 0===this.globalTargeting.domain&&"localhost"!==window.location.hostname&&(this.globalTargeting.domain=window.location.hostname),void 0===this.globalTargeting.auctionTimeout&&this.auctionTimeout&&(this.globalTargeting.auctionTimeout=this.auctionTimeout.toString()),this.uid=ue(),this.sessionId=_e(),this.syncCookies&&this.syncUserCookies(),this.lightMode||(a&&lt(a),this.sasMode||ot(r,this),this.sasMode&&function(e){var t;window.sas=window.sas||{cmd:[]},t=e?St(St({},Dt),e):Dt;var n=window.sas;n.cmd.push((function(){n.setup({networkid:t.networkID,domain:"https://www9.smartadserver.com",async:t.async,inSequence:t.inSequence})}))}(f)),window.addEventListener&&window.addEventListener("scroll",this.onScroll.bind(this))}return e.prototype.setFocusListeners=function(){var e=this;this.internalHasFocus=document.hasFocus(),X("focus",window,(function(){e.internalHasFocus=!0})),X("blur",window,(function(){e.internalHasFocus=!1})),X("scroll",window,(function(){e.internalHasFocus=!0})),X("visibilitychange",window,(function(){e.internalHasFocus="visible"===document.visibilityState})),X("touchstart",window,(function(){e.internalHasFocus=!0}))},e.prototype.createSlot=function(e,t){var n=null;switch(e){case ne.GOOGLE:this.lightMode&&H("making google banner slots in light mode seems sketchy"),n=new He(this,t),this.createdGoogleSlots.push(n);break;case ne.ANA:this.lightMode||H("making a lightmode slot without the SDK in lightmode seems sketchy"),n=new je(this,t);break;case ne.SAS:this.lightMode&&H("making sas banner slots in light mode seems sketchy"),n=new Tt(this,t);break;default:throw Error("Specified slot type is not supported: ".concat(e))}return this.eventsTracker.slotCreated(t.adUnitID,"banner"),this.createdSlots.push(n),n},e.prototype.createVideoSlot=function(e,t){var n=new Ye(this,e,t);return this.eventsTracker.slotCreated(t.adUnitID,"video"),this.createdVideoContainers.push(n),n},e.prototype.refreshAllGoogleSlots=function(){var e=this;if(this.lazyLoad)throw new Error("ANA Web SDK does not support refreshAllGoogleSlots when lazy loading is enabled");var t=this.waitGroup;this.refreshedAllSlots=!1;var n=this.createdGoogleSlots;if(null==t){var i=setTimeout(this.onBidsFetchTimeout.bind(this),3e3),o=n.filter((function(e){return e.apsEnabled})).length,r=n.length+o;t=new ht(r,this.onBidsFetchSuccess.bind(this),i),this.waitGroup=t,n.forEach((function(e){e.slot&&googletag.cmd.push((function(){e.slot.clearTargeting()})),e.resetRequestMgr()})),n.forEach((function(n){n&&(n.fetchANABids((function(i){H("refreshAllSlots - ANA responded with bids for ".concat(n),i),googletag.cmd.push((function(){H("ANA BIDS - auction is already completed?",e.refreshedAllSlots),e.refreshedAllSlots||n.updateAnaTargeting(),n.anaRequestCompleted(),t.decrement()}))}),(function(){n.updateRefreshCountTargeting(),e.waitGroup=null})),n.apsEnabled&&n.fetchAPSBids((function(i){H("refreshAllSlots - APS responded with bids for ".concat(n),i),googletag.cmd.push((function(){H("APS BIDS - auction is already completed?",e.refreshedAllSlots),e.refreshedAllSlots||n.updateApsTargeting(),n.apsRequestCompleted(),t.decrement()}))})))})),setTimeout(this.onBidsFetchSuccess.bind(this),this.auctionTimeout+_)}else console.warn("calling refreshAllSlots too fast")},e.prototype.hasFocus=function(){return document.hasFocus()||this.internalHasFocus},e.prototype.refreshSubscribedBannerSlots=function(e,t){if(!this.hasFocus())return H("skipping auto refresh, document not in focus, trying later with slots:",e),void setTimeout(this.refreshSubscribedBannerSlots.bind(this,e,t),300);H("auto refreshing slots:",e),e.forEach((function(e){return e.refresh()})),setTimeout(this.refreshSubscribedBannerSlots.bind(this,e,t),t)},e.prototype.autoRefreshSlots=function(e,t,n){void 0===t&&(t=3e4),void 0===n&&(n=!1),H("subscribed slots for auto refresh:",e,"in",t,"ms, firstInstantRefresh=",n),n?this.refreshSubscribedBannerSlots(e,t):setTimeout(this.refreshSubscribedBannerSlots.bind(this,e,t),t)},Object.defineProperty(e,"version",{get:function(){return"3.0.1"},enumerable:!1,configurable:!0}),e.prototype.onBidsFetchTimeout=function(){H("[WARNING!!!]onBidsFetchTimeout, we got timeout before all bidders where completed"),this.onBidsFetchSuccess()},e.prototype.onBidsFetchSuccess=function(){var e=this;if(H("onBidsFetchSuccess, this.refreshedAllSlots = ",this.refreshedAllSlots),this.refreshedAllSlots)H("onBidsFetchSuccess, skipping since all slots were already refreshed");else{this.refreshedAllSlots=!0;var t=[];this.createdGoogleSlots.forEach((function(e){e.adServerRender&&!e.alreadyRendered()&&t.push(e.slot)})),0!==t.length?googletag.cmd.push((function(){e.waitGroup=null,H("Calling GAM refresh for all the slots"),googletag.pubads().refresh(t),H("resync all bidders from all slots"),setTimeout((function(){e.syncUserCookies()}),1e3)})):this.waitGroup=null}},e.prototype.updateGlobalTargeting=function(e){var t;this.globalTargeting=_t(_t({},this.globalTargeting),e),this.sasMode||(t=this.globalTargeting)&&Object.keys(t).length&&googletag.cmd.push((function(){Object.keys(t).forEach((function(e){googletag.pubads().setTargeting(e,t[e])}))}))},e.prototype.syncUserCookies=function(){if(this.syncCookies){if(!this.propertyId)throw Error("propertyId is needed to initialize SDK");var e=j();fe(this.eventsTracker,e,this.uid)}},e.prototype.getBannerSlot=function(e){var t=null;return this.createdSlots.forEach((function(n){n.elementID!==e&&0!==e.indexOf(n.elementID)||(t=n)})),t},e.prototype.onScroll=function(){Rt([],document.querySelectorAll("div.assembly-semi-sticky-container"),!0).forEach((function(e){try{var t=e.children[0],n=e.getBoundingClientRect(),i=t.getBoundingClientRect().height;if(i>304)return t.style.position="relative",void(t.style.marginTop="0px");n.top<=0&&n.top>i-n.height?(t.style.position="fixed",t.style.top=0,t.style.bottom="auto",t.style.marginTop="0px"):n.top<0&&n.top<i-n.height?(t.style.position="relative",t.style.marginTop=n.height-i+"px"):(t.style.position="relative",t.style.marginTop="0px")}catch(e){console.error(e)}}))},e.prototype.setUserEmail=function(e){this.userEmail=e},e.prototype.getUserIdentity=function(){var e=z("ml_em");if(e)return H("IDENTITY: medialabcookie found ".concat(e)),{email:e,envelope:null};if(this.userEmail)return H("IDENTITY: userEmail found ".concat(e)),{email:this.userEmail,envelope:null};var t=z("lr_env");if(t)return H("IDENTITY: liveramp envelope found', ".concat(t)),{email:null,envelope:t};var n=z(O);if(n)return H("IDENTITY: rtis envelope found ".concat(n)),{email:null,envelope:n};var i=z(C);return H("IDENTITY:rtis envelope not found"),i||(J(C,1,.5),Me.rtis((function(e){H("IDENTITY: rtis envelope response, ".concat(e)),J(O,e,21600)}))),H("IDENTITY: no envelope found"),{email:null,envelope:null}},e}();return function(e){e.VideoMp4="video/mp4",e.VideoOgg="video/ogg"}(It||(It={})),"loading"!==document.readyState?setTimeout(mt,0):document.addEventListener("DOMContentLoaded",mt),window.ANAWeb=Ct,window.SlotTypeEnum=ne,Ct.SlotTypeEnum=ne,Object.defineProperty(Ct,"uid",{get:function(){return ue()}}),Object.defineProperty(Ct,"sessionId",{get:function(){return _e()}}),Ct.AdPosition=Ee,Ct.ContentDeliveryMethod=Se,Ct.PlaybackCessationMode=Ae,Ct.PlaybackMethod=ye,Ct.StartDelay=ve,Ct.VideoApiFramework=Ie,Ct.VideoLinearity=we,Ct.VideoPlacementType=be,Ct.VideoPlayerType=ie,Ct.VideoProtocol=Te,Ct.Mime=It,o})()));
// MediaLab Inc.