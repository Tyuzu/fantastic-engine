"use strict";(self.webpackChunkimgur_web=self.webpackChunkimgur_web||[]).push([[6786],{S1wb:(e,t,r)=>{r.d(t,{Z:()=>re});var n=r("lwsE"),a=r.n(n),o=r("W8MJ"),i=r.n(o),s=r("PJYZ"),c=r.n(s),l=r("7W2i"),d=r.n(l),u=r("a1gu"),p=r.n(u),f=r("Nsbk"),m=r.n(f),g=r("lSNA"),h=r.n(g),v=r("q1tI"),y=(r("17x9"),r("sEfC")),b=r.n(y),O=r("/MKj"),F=r("ANjH"),w=r("28IT"),P=r("kzpL"),j=r("d8/m"),D=r("KMJ1"),N=r("JCOJ"),q=r("q2T8"),E=r("TSYQ"),T=r.n(E),I=r("vSIG");function k(e){var t,r=e.children,n=e.data,a=e.handleDragItem,o=e.dragEnd,i=e.className,s=T()(h()({Draggable:!0},i,!!i));return v.createElement("div",{ref:function(e){t=e},className:s,draggable:"true","data-transfer":JSON.stringify(n),onDragStart:function(e){e.stopPropagation();try{e.dataTransfer.setDragImage(t,-20,-20)}catch(e){}e.dataTransfer.setData("text","{}"),a()},onDragEnd:o},r)}k.defaultProps={className:""};const S=(0,O.$j)(null,(function(e,t){var r=t.name,n=t.data;return{handleDragItem:function(){return e((0,I.Q9)({name:r,data:n}))},dragEnd:function(){return e((0,I.Ku)({name:r}))}}}))(k);k.__docgenInfo={description:"",methods:[],displayName:"Draggable",props:{className:{defaultValue:{value:"''",computed:!1},type:{name:"string"},required:!1,description:""},children:{type:{name:"object"},required:!0,description:""},data:{type:{name:"object"},required:!1,description:""},src:{type:{name:"string"},required:!1,description:""},name:{type:{name:"string"},required:!1,description:""},handleDragItem:{type:{name:"func"},required:!1,description:""},dropItem:{type:{name:"func"},required:!1,description:""},dragEnd:{type:{name:"func"},required:!1,description:""}}};var Z=r("WYic");function C(e){var t=e.selected,r=e.children,n=e.className,a=e.handleToggle,o=["Selectable"];return n&&o.push(n),t&&o.push("Selectable-selected"),v.createElement("div",{className:o.join(" "),onClick:function(e){e.shiftKey&&(e.preventDefault(),e.stopPropagation(),a())}},r)}const R=(0,O.$j)((function(e,t){var r=t.name,n=t.data,a=e.selectables.get(r);return{selected:a&&a.has(n)}}),(function(e,t){var r=t.name,n=t.data;return{handleToggle:function(){return e((0,Z.ZN)({name:r,data:n}))}}}))(C);C.__docgenInfo={description:"",methods:[],displayName:"Selectable",props:{data:{type:{name:"string"},required:!1,description:""},children:{type:{name:"object"},required:!0,description:""},name:{type:{name:"string"},required:!1,description:""},className:{type:{name:"string"},required:!1,description:""},selected:{type:{name:"bool"},required:!1,description:""},handleToggle:{type:{name:"func"},required:!1,description:""}}};var M=r("puhG"),_=r("xySZ"),x=r("c8NV");function A(e){var t=e.checked,r=e.onToggle,n=e.withTooltip,a=v.createElement(_.Z,{handleOnChange:r,selected:t});return v.createElement("div",{className:"FavoritesPostCheckbox"},n&&v.createElement(x.Z,{text:(0,M.Z)("dragDropTooltip")},a),!n&&a)}function z(e){var t=e.onClick,r=e.withTooltip,n=v.createElement("span",{className:"icon-trash"});return v.createElement("div",{className:"FavoritesPostDelete",onClick:t},r&&v.createElement(x.Z,{text:(0,M.Z)("deleteFavFromAll")},n),!r&&n)}A.defaultProps={checked:!1,withTooltip:!1},A.__docgenInfo={description:"",methods:[],displayName:"FavoritesPostCheckbox",props:{checked:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},withTooltip:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},onToggle:{type:{name:"func"},required:!0,description:""}}},z.defaultProps={withTooltip:!1},z.__docgenInfo={description:"",methods:[],displayName:"FavoritesPostDelete",props:{withTooltip:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},onClick:{type:{name:"func"},required:!0,description:""}}};var G=r("KWHV"),J=r("vTdI"),V=r("xygN");const B=r.p+"desktop-assets/drag.cc50f561cf814485e0c0.png",K=r.p+"desktop-assets/multi-drag.9173fce8fc731c00856d.png";function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach((function(t){h()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m()(e);if(t){var a=m()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return p()(this,r)}}var U="selectedFavorites",Y=function(e){d()(r,e);var t=L(r);function r(){var e;a()(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),h()(c()(e),"handlerRemoveFromFavorite",(function(){var t=e.props,r=t.folderInfo,n=t.post;(0,t.removeFromFavorite)(n.id,n.isAlbum,(0,J.DJ)(n),r&&r.get("id"))})),h()(c()(e),"handlerToggle",(function(){var t=e.props,r=t.firstTime,n=t.post;(0,t.handleToggle)((0,J.DJ)(n),r)})),e}return i()(r,[{key:"render",value:function(){var e=this.props,t=e.post,r=e.folderInfo,n=e.firstTime,a=e.selectables,o=e.isOwner,i=e.username;if(!r)return null;var s=(0,J.DJ)(t),c=r&&r.get("id"),l="".concat((0,J.EA)(r.toJS(),o,i),"/").concat(t.id),d=a&&a.size>1,u=a&&a.has(s),p=n&&c===P.BZ,f=W(W({},this.props),{},{post:Object.assign(t,{href:l})});if(!o)return v.createElement(G.s$,f);var m=T()({FavoritesPost:!0,isSelected:u}),g=W(W({},f),{},{usePrivacy:!t.inGallery,imageDraggable:"false"});return v.createElement("div",{className:m},v.createElement(S,{className:"FavoritesPost-draggable",name:"favorites",src:d?K:B,data:{selectableName:U,id:s}},v.createElement(R,{name:U,className:"FavoritesPost-selectable",data:s},v.createElement(G.s$,g))),v.createElement(z,{withTooltip:p,onClick:this.handlerRemoveFromFavorite}),v.createElement(A,{onToggle:this.handlerToggle,checked:u,withTooltip:p}))}}]),r}(v.Component);Y.defaultProps={className:""},Y.__docgenInfo={description:"",methods:[{name:"handlerRemoveFromFavorite",docblock:null,modifiers:[],params:[],returns:null},{name:"handlerToggle",docblock:null,modifiers:[],params:[],returns:null}],displayName:"FavoritesPost",props:{className:{defaultValue:{value:"''",computed:!1},type:{name:"string"},required:!1,description:""},post:{type:{name:"object"},required:!0,description:""},isOwner:{type:{name:"bool"},required:!1,description:""},folderInfo:{type:{name:"object"},required:!1,description:""},firstTime:{type:{name:"bool"},required:!0,description:""},username:{type:{name:"string"},required:!1,description:""},selectables:{type:{name:"object"},required:!1,description:""},removeFromFavorite:{type:{name:"func"},required:!0,description:""},handleToggle:{type:{name:"func"},required:!0,description:""}}};const H=(0,V.l1)((0,F.qC)(w.Z,(0,O.$j)((function(e,t){var r=e.user,n=e.account,a=e.favorites,o=e.selectables,i=t.match,s=(i.params.username||"").toLowerCase(),c=parseInt(i.params.id||P.BZ,10),l=n.getIn(["accounts",s]),d=l?l.get("username"):null;return{isOwner:r.get("username")===d,folderInfo:a.getIn(["folders",c]),firstTime:!a.get("hasUsedFavoriteFolders"),username:s,selectables:o.get(U)}}),(function(e,t){var r=t.link;return{removeFromFavorite:function(t,n,a,o){var i={id:t,isAlbum:n};o===P.BZ?e((0,D.zm)(i)):e((0,D.d8)({id:o,link:r,faves:[a]})),e((0,j.Cx)([i]))},handleToggle:function(t,r){e((0,Z.ZN)({name:U,data:t})),r&&e((0,D.Fx)())}}})))(Y));function Q(e){var t=e.id,r=e.isOwner,n=(0,M.Z)("noFavoritesToShow");return r&&(n=(0,M.Z)("noFavoritesOfMine"),t!==P.BZ&&(n=(0,M.Z)("noFavoritesInFolderOfMine"))),v.createElement("div",{className:"ProfileFavoritesEmpty"},n)}function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){h()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m()(e);if(t){var a=m()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return p()(this,r)}}function re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!q.yh;return function(t){var r,n=function(r){d()(o,r);var n=te(o);function o(){var e;a()(this,o);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e=n.call.apply(n,[this].concat(r)),h()(c()(e),"moreDataFetch",b()((function(){e.props.hasMore&&e.fetchGallery(ee(ee({},e.props),{},{insertionModifier:j.I0}))}),N.U1,{leading:!0,trailing:!1})),h()(c()(e),"dataFetch",(function(t){e.props.cleanupGallery(),e.fetchGallery(ee(ee({},t),{},{insertionModifier:j.mm,streamPage:0}))})),h()(c()(e),"fetchGallery",(function(t){if(!e.props.isFetching){var r=t||e.props;e.props.fetchGallery(r.folderId,r.streamPage,r.streamSort,r.streamOrganized,r.insertionModifier)}})),h()(c()(e),"getEmptyRow",(function(){return v.createElement(Q,{isOwner:e.props.isOwner})})),e}return i()(o,[{key:"componentDidMount",value:function(){e&&this.props.isFoldersFetched&&this.dataFetch(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.folderId,n=t.streamOrganized,a=t.streamSort,o=t.isFoldersFetched;return r&&r!==e.folderId||o&&!e.isFoldersFetched||n&&n!==e.streamOrganized||a&&a!==e.streamSort?this.dataFetch(this.props):void 0}},{key:"render",value:function(){return v.createElement(t,{Child:H,moreDataFetch:this.moreDataFetch,emptyRow:this.getEmptyRow})}}]),o}(v.Component);return n.defaultProps={folderId:P.BZ},n.displayName="WithFavoritesData(".concat((r=t).displayName||r.name||"Component",")"),(0,F.qC)(w.Z,(0,O.$j)((function(e,t){var r=e.favorites,n=e.gallery,a=t.match,o=Number.parseInt(a.params.id||P.BZ,10);return{streamSort:r.get("sort"),streamPage:Number.parseInt(r.get("page")||0,10),streamOrganized:r.get("organized"),isFoldersFetched:r.get("isFoldersFetched"),isFetching:n.get("isFetching"),hasMore:n.get("hasMore"),folderId:o}}),(function(e,t){var r=t.username,n=t.isOwner,a=t.isLoggedIn;return{fetchGallery:function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:P.dn,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:P.Pz,c=arguments.length>4?arguments[4]:void 0;return e(t>=0?(0,D.RV)({username:r,id:t,isOwner:n,page:o,sort:i,insertionModifier:c,isAuthed:a}):n?(0,D.OT)({username:r,page:o,sort:i,organized:s,insertionModifier:c,isAuthed:a}):(0,D.VK)({username:r,page:o,sort:i,insertionModifier:c,isAuthed:a}))},cleanupGallery:function(){return e((0,j.gj)())}}})))(n)}}Q.defaultProps={isOwner:!1},Q.__docgenInfo={description:"",methods:[],displayName:"ProfileFavoritesEmpty",props:{isOwner:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},id:{type:{name:"number"},required:!1,description:""}}}}}]);