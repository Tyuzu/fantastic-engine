"use strict";(self.webpackChunkimgur_web=self.webpackChunkimgur_web||[]).push([[809],{"1hNa":(e,t,n)=>{n.d(t,{C:()=>B});var r=n("pVnL"),i=n.n(r),o=n("QILm"),a=n.n(o),c=n("lwsE"),l=n.n(c),s=n("W8MJ"),u=n.n(s),p=n("PJYZ"),d=n.n(p),m=n("7W2i"),f=n.n(m),h=n("a1gu"),g=n.n(h),y=n("Nsbk"),v=n.n(y),k=n("lSNA"),b=n.n(k),C=n("q1tI"),S=n("/MKj"),R=(n("17x9"),n("kXiY")),E=n("g1ek"),G=n("Z18p"),N=n("VQbN"),w=n("Qii0"),P=n("P5Jw"),x=n("puhG"),q=n("oIX6"),D=n("tKQO"),I=n("1q3c"),M=n("Txp7"),Z=n("sCW7"),O=n("mOu4");function F(e){var t=e.id,n=e.downloadImageAction,r=e.isLoggedIn,i=e.onFavorite,o=C.createElement(P.CopyToClipboard,{text:q.GT+t},C.createElement("button",{type:"button"},C.createElement("span",{className:"label"},(0,x.Z)("imageCopy")))),a=C.createElement("button",{type:"button",onClick:function(){return n(t,t)}},C.createElement("span",{className:"label"},(0,x.Z)("download"))),c=C.createElement("button",{type:"button",onClick:function(){return i(t,null,!1,null,D.TN)}},C.createElement("span",{className:"label"},(0,x.Z)("favoriteLabel")));return C.createElement(Z.fD,{className:"mediaDropdown-menu",dropdownIcon:C.createElement(O.ZP,{name:O.vO,width:21})},o,a,r&&c)}F.__docgenInfo={description:"",methods:[],displayName:"MediaItemDropDownMenu",props:{id:{type:{name:"string"},required:!0,description:""},isLoggedIn:{type:{name:"bool"},required:!1,description:""},onFavorite:{type:{name:"func"},required:!0,description:""},downloadImageAction:{type:{name:"func"},required:!0,description:""}}};const H=(0,S.$j)((function(e){return{isLoggedIn:!!e.user.get("isLoggedIn")}}),{downloadImageAction:I.GN,onFavorite:M.xZ})(F);var _=n("c8NV");function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g()(this,n)}}var j=function(e){f()(n,e);var t=L(n);function n(){var e;l()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),b()(d()(e),"getReactionPreview",(function(t){var n=e.props.onClick;if(t){var r=t.match(E.XO);return C.createElement("div",{className:"MediaPreview-wrapper",onClick:n},C.createElement("div",{className:"MediaMenuContainer"},(0,w.pk)(t),C.createElement(H,{id:r[1]})))}})),b()(d()(e),"getLinkRel",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return E.jo.test(e)?t:"".concat(t," nofollow").trim()})),e}return u()(n,[{key:"expandLink",value:function(){return"true"===this.props.expandlink&&this.props.children!==E.TE&&new RegExp(E.XO).test(this.props.href)}},{key:"renderTargetMedia",value:function(){var e=this.props,t=(e.children,e.href),n=e.rel,r=e.postMedia,o=e.onClick,c=a()(e,["children","href","rel","postMedia","onClick"]),l=r.get(parseInt(t,10)-1),s=l.getIn(["src",l.get("isVideo")?"video":"image"]),u=this.getLinkRel(s,n),p=C.createElement("a",i()({href:s,rel:u},c),"#".concat(t));return C.createElement(_.Z,{className:"Tooltip-targetMedia",onClick:o,inline:!0,src:s},p)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.href,r=e.rel,o=(e.postMedia,e.isPostDescription),c=a()(e,["children","href","rel","postMedia","isPostDescription"]),l=this.getLinkRel(n,r);if(o)return C.createElement("a",i()({href:n,rel:l},c),t);if(this.expandLink())return this.getReactionPreview(n);if(t===E.lt)return this.renderTargetMedia();var s=t===E.TE?n:t,u=C.createElement("a",i()({href:n,rel:l},c),s);return(0,N.c2)(n)?C.createElement(_.Z,{className:"Tooltip-media",inline:!0,src:n},u):u}}]),n}(C.Component);j.defaultProps={rel:"",expandlink:"false",isPostDescription:!1};const B=(0,S.$j)((function(){return{component:j}}),(function(e){return{onClick:function(t){var n=t.target.src||t.target.href;return!(0,N.c2)(n)||(t.preventDefault(),t.stopPropagation(),e((0,G.b)({show:!0,src:n})),!1)}}}))(R.Z);j.__docgenInfo={description:"",methods:[{name:"expandLink",docblock:null,modifiers:[],params:[],returns:null},{name:"getReactionPreview",docblock:null,modifiers:[],params:[{name:"href",type:null}],returns:null},{name:"getLinkRel",docblock:null,modifiers:[],params:[{name:"href",type:null},{name:"rel",type:null}],returns:null},{name:"renderTargetMedia",docblock:null,modifiers:[],params:[],returns:null}],displayName:"LinkifyDecorator",props:{rel:{defaultValue:{value:"''",computed:!1},type:{name:"string"},required:!1,description:""},expandlink:{defaultValue:{value:"'false'",computed:!1},type:{name:"enum",value:[{value:"'true'",computed:!1},{value:"'false'",computed:!1}]},required:!1,description:""},isPostDescription:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},children:{type:{name:"string"},required:!0,description:""},href:{type:{name:"union",value:[{name:"string"},{name:"number"}]},required:!0,description:""},onClick:{type:{name:"func"},required:!1,description:""},postMedia:{type:{name:"object"},required:!1,description:""}}}},JMKP:(e,t,n)=>{n.d(t,{C8:()=>x,H6:()=>S.H6,YP:()=>S.YP,ZP:()=>D});var r=n("lwsE"),i=n.n(r),o=n("W8MJ"),a=n.n(o),c=n("PJYZ"),l=n.n(c),s=n("7W2i"),u=n.n(s),p=n("a1gu"),d=n.n(p),m=n("Nsbk"),f=n.n(m),h=n("lSNA"),g=n.n(h),y=n("q1tI"),v=(n("17x9"),n("/MKj")),k=n("4ELA"),b=n("5bgp"),C=n("+qrI"),S=n("nrQ4"),R=n("puhG"),E=n("VDU/"),G=n("TSYQ"),N=n.n(G),w=n("mOu4");function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var x="report",q=function(e){u()(n,e);var t=P(n);function n(e){var r;return i()(this,n),r=t.call(this,e),g()(l()(r),"handleClose",(function(){r.setState({reason:null,reasonDetail:null},(function(){return r.props.close()}))})),g()(l()(r),"handleReport",(function(){var e=r.props,t=e.type,n=e.submit,i=e.id,o=e.reportedComments,a=e.reportedPosts;if(null!==r.state.reason){var c=t===S.H6?o:a;n(t,i,r.state.reason,r.state.reasonDetail,c),r.setState({reason:null,reasonDetail:null})}})),g()(l()(r),"handleChoose",(function(e){r.setState({reason:e})})),g()(l()(r),"handleDescription",(function(e){var t=e;r.state.showDescription===e&&(t=null),r.setState({showDescription:t})})),g()(l()(r),"onChange",(function(e){var t=r.state.value,n=e?e.target.value:t,i=(0,E.IP)(n);r.setState({characterCount:i,reasonDetail:n})})),r.state={reason:e.isMature?-1:null,reasonDetail:null,showDescription:e.isMature?-1:null,value:"",characterCount:0,maxChars:140},r}return a()(n,[{key:"componentDidUpdate",value:function(e){e.isMature!==this.props.isMature&&this.setState({reason:this.props.isMature?-1:null,showDescription:this.props.isMature?-1:null})}},{key:"render",value:function(){var e=this,t=this.props,n=t.type,r=t.isMature,i=this.state,o=i.characterCount,a=i.maxChars-o<0,c=N()({"ReportDialog-Detail-Text":!0,over:a});if(n===S.g4)return null;var l=[r?{label:(0,R.Z)("precheckedMatureLabel",n),explanation:(0,R.Z)("precheckedMatureExplanation"),value:-1,name:"reportpost-disabled",onClick:function(e){e.preventDefault()},extraClass:" disabled",defaultChecked:!0}:{label:(0,R.Z)("matureLabel"),explanation:(0,R.Z)("matureExplanation",n),value:4},{label:(0,R.Z)("sexuallyLabel"),explanation:(0,R.Z)("sexuallyExplanation",n),value:5},{label:(0,R.Z)("spamLabel"),explanation:(0,R.Z)("spamExplanation",n),value:2},{label:(0,R.Z)("abusiveLabel"),explanation:(0,R.Z)("abusiveExplanation",n),value:3},{label:(0,R.Z)("dnboiLabel"),explanation:(0,R.Z)("dnboiExplanation",n),value:1}],s=!(this.state.reason>0&&this.state.characterCount<141);return y.createElement(k.U,{className:"ReportDialog",isModal:!1,onClose:this.handleClose,name:x},y.createElement("div",{className:"ReportDialog-head"},y.createElement("span",null,(0,R.Z)("reportTitle",n)),y.createElement(b.zx,{className:"ReportDialog-head--close",imageSrc:w.UZ[w.oV],onClick:this.handleClose})),y.createElement("div",{className:"ReportDialog-content"},l.map((function(t){return e.renderOption(t)})),this.state.reason&&y.createElement("div",{className:"ReportDialog-Detail"},y.createElement("form",{className:"ReportDialog-Detail-Form"},y.createElement("textarea",{className:c,onChange:this.onChange,placeholder:(0,R.Z)("describeReportReason",n)})),this.state.characterCount>140&&y.createElement("p",{className:"ReportDialog-Detail-Text-Exceeded"},(0,R.Z)("charactersExceeded",140)))),y.createElement("div",{className:"ReportDialog-footer"},y.createElement("p",{className:"ReportDialog-CommunityRules"},(0,R.Z)("reportRules")),y.createElement("button",{type:"button",disabled:s,className:"ReportDialog-button--do",onClick:this.handleReport},(0,R.Z)("report"))))}},{key:"renderOption",value:function(e){var t=this,n=this.state.showDescription===e.value?" active":"";return y.createElement("label",{className:"ReportDialog-RadioBox-item".concat(e.extraClass||"").concat(n),key:e.value},y.createElement("div",{className:"ReportDialog-RadioBox-content-wrapper"},y.createElement("input",{className:"ReportDialog-RadioBox-radio",type:"radio",onClick:e.onClick||function(){return t.handleChoose(e.value)},name:e.name||"reportpost"}),y.createElement("div",{className:"ReportDialog-RadioBox-checkbox"},"Â "),y.createElement("div",{className:"ReportDialog-RadioBox-title"},e.label),y.createElement("div",{className:"ReportDialog-RadioBox-chevron",onClick:function(){return t.handleDescription(e.value)}},y.createElement("i",{className:"ReportDialog-RadioBox-chevron-icon"}))),y.createElement("div",{className:"ReportDialog-RadioBox-description"},e.explanation))}}]),n}(y.Component);q.defaultProps={isMature:!1},q.__docgenInfo={description:"",methods:[{name:"handleClose",docblock:null,modifiers:[],params:[],returns:null},{name:"handleReport",docblock:null,modifiers:[],params:[],returns:null},{name:"handleChoose",docblock:null,modifiers:[],params:[{name:"reason",type:null}],returns:null},{name:"handleDescription",docblock:null,modifiers:[],params:[{name:"reason",type:null}],returns:null},{name:"onChange",docblock:null,modifiers:[],params:[{name:"event",type:null}],returns:null},{name:"renderOption",docblock:null,modifiers:[],params:[{name:"option",type:null}],returns:null}],displayName:"Report",props:{isMature:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},id:{type:{name:"union",value:[{name:"number"},{name:"string"}]},required:!1,description:""},close:{type:{name:"func"},required:!0,description:""},submit:{type:{name:"func"},required:!0,description:""},type:{type:{name:"string"},required:!0,description:""},reportedComments:{type:{name:"object"},required:!1,description:""},reportedPosts:{type:{name:"object"},required:!1,description:""}}};const D=(0,v.$j)((function(e,t){var n=e.report,r=t.type;return{id:n.get("id"),reportedComments:n.get("reportedComments"),reportedPosts:n.get("reportedPosts"),isMature:!!n.get("isMature"),type:n.get("type")||r}}),(function(e){return{close:function(){e((0,C.gk)(x))},submit:function(t,n,r,i,o){t===S.H6?e((0,S.cC)(n,r,i,o)):e((0,S.mK)(n,r,i,o)),e((0,C.gk)(x))}}}))(q)},xySZ:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n("lSNA"),i=n.n(r),o=n("q1tI"),a=n("TSYQ"),c=n.n(a),l=(n("17x9"),{default:"",left:"Checkmark--left",right:"Checkmark--right"});function s(e){var t=e.selected,n=e.text,r=void 0===n?"":n,a=e.handleOnChange,s=void 0===a?function(){}:a,u=e.checkmarkPosition,p=void 0===u?"default":u,d=e.name,m=void 0===d?"":d,f=e.value,h=void 0===f?"":f,g=c()(i()({Checkmark:!0},l[p],!0));return o.createElement("label",{className:"Checkbox-wrapper"},r,o.createElement("input",{onChange:s,type:"checkbox",defaultChecked:t,name:m,value:h}),o.createElement("div",{className:g}))}s.__docgenInfo={description:"",methods:[],displayName:"Checkbox",props:{text:{defaultValue:{value:"''",computed:!1},type:{name:"string"},required:!1,description:""},handleOnChange:{defaultValue:{value:"() => {}",computed:!1},type:{name:"func"},required:!1,description:""},checkmarkPosition:{defaultValue:{value:"'default'",computed:!1},type:{name:"enum",value:[{value:"'default'",computed:!1},{value:"'left'",computed:!1},{value:"'right'",computed:!1}]},required:!1,description:""},name:{defaultValue:{value:"''",computed:!1},type:{name:"string"},required:!1,description:""},value:{defaultValue:{value:"''",computed:!1},type:{name:"union",value:[{name:"string"},{name:"number"}]},required:!1,description:""},selected:{type:{name:"bool"},required:!1,description:""},reference:{type:{name:"func"},required:!1,description:""}}}},J5Wp:(e,t,n)=>{n.d(t,{Z:()=>z});var r=n("lwsE"),i=n.n(r),o=n("W8MJ"),a=n.n(o),c=n("PJYZ"),l=n.n(c),s=n("7W2i"),u=n.n(s),p=n("a1gu"),d=n.n(p),m=n("Nsbk"),f=n.n(m),h=n("lSNA"),g=n.n(h),y=n("q1tI"),v=(n("17x9"),n("puhG")),k=n("/MKj"),b=n("VGss"),C=n("hOZj"),S=n("hSrQ"),R=n("MHWf"),E=n("qV9W"),G=n("pVnL"),N=n.n(G),w=n("QILm"),P=n.n(w);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var q=function(e){u()(n,e);var t=x(n);function n(e){var r;return i()(this,n),r=t.call(this,e),g()(l()(r),"getContainer",(function(e){r.container=e})),g()(l()(r),"handle",(function(e){if("touchend"===e.type&&(r.isTouch=!0),"click"!==e.type||!r.isTouch){var t=r.props.onClickOutside,n=r.container;n&&!n.contains(e.target)&&t(e)}})),r.isTouch=!1,r}return a()(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=(e.onClickOutside,P()(e,["children","onClickOutside"]));return y.createElement("div",N()({},n,{ref:this.getContainer}),t)}},{key:"componentDidMount",value:function(){(0,R._E)("touchend",this.handle,!0),(0,R._E)("click",this.handle,!0)}},{key:"componentWillUnmount",value:function(){(0,R.II)("touchend",this.handle,!0),(0,R.II)("click",this.handle,!0)}}]),n}(y.Component);q.__docgenInfo={description:"",methods:[{name:"getContainer",docblock:null,modifiers:[],params:[{name:"ref",type:null}],returns:null},{name:"handle",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null}],displayName:"ClickOutside",props:{onClickOutside:{type:{name:"func"},required:!0,description:""},children:{type:{name:"node"},required:!1,description:""}}};var D=n("TSYQ"),I=n.n(D),M=n("JPcv"),Z=n("sEfC"),O=n.n(Z),F=n("oIX6");function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var _=function(e){u()(n,e);var t=H(n);function n(){var e;i()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),g()(l()(e),"onSelect",(function(t){(0,e.props.onCategorySelection)(t)})),g()(l()(e),"renderReactionGifCategories",(function(t,n){var r=e.props.getColorByPostIndex,i=t.preview,o={backgroundImage:"linear-gradient(".concat(r(n),", #2e3035)")},a=t.shortname,c="gifpicker-collectionBackground".concat(t.is_promoted?" promotedCollection":"");return y.createElement("div",{key:"".concat(n).concat(i).concat(a),className:"gifpicker-collection",onClick:function(){e.onSelect(a),e.resetCollection()}},y.createElement("video",{style:o,className:c,autoPlay:!0,preload:"none",loop:!0,playsInline:!0},y.createElement("source",{type:"video/mp4",src:"".concat(F.LS,"/").concat(i,"_lq.mp4")})),y.createElement("div",null,y.createElement("h2",{className:"gifpicker-collectionName"},t.name,t.is_promoted&&t.subtitle&&y.createElement("span",{className:"gifpicker-collectionSubtitle"},t.subtitle))))})),e}return a()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchReactionCollections,n=e.resetReactionGifSearchCollections;t(),n()}},{key:"resetCollection",value:function(){this.props.reactionGifCollections}},{key:"render",value:function(){var e=this.props.reactionGifCollections;return y.createElement(y.Fragment,null,y.createElement("div",{className:"gifpicker-body-container"},y.createElement("div",{className:"gifpicker-body Scrollbar--gray"},e.map(this.renderReactionGifCategories))))}}]),n}(y.Component);_.__docgenInfo={description:"",methods:[{name:"onSelect",docblock:null,modifiers:[],params:[{name:"queryString",type:null}],returns:null},{name:"renderReactionGifCategories",docblock:null,modifiers:[],params:[{name:"reactionGifObject",type:null},{name:"index",type:null}],returns:null},{name:"resetCollection",docblock:null,modifiers:[],params:[],returns:null}],displayName:"ReactionGIFCategories",props:{fetchReactionCollections:{type:{name:"func"},required:!0,description:""},reactionGifCollections:{type:{name:"object"},required:!0,description:""},getColorByPostIndex:{type:{name:"func"},required:!0,description:""},renderReactionGifCategories:{type:{name:"func"},required:!1,description:""},reactionGifObject:{type:{name:"object"},required:!1,description:""},position:{type:{name:"string"},required:!1,description:""},resetCollection:{type:{name:"func"},required:!1,description:""},onCategorySelection:{type:{name:"func"},required:!0,description:""},resetReactionGifSearchCollections:{type:{name:"func"},required:!1,description:""}}};const L=(0,k.$j)((function(e){return{reactionGifCollections:e.comments.get("reactionGifCollections")}}),{fetchReactionCollections:C.jY,resetReactionGifSearchCollections:C.Hi})(_);var j=n("DzJC"),B=n.n(j);const T=n.p+"desktop-assets/ReactionGifEmptySearch.42dcfa579303aa44a96f.svg";function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var K=function(e){u()(n,e);var t=W(n);function n(e){var r;return i()(this,n),r=t.call(this,e),g()(l()(r),"showCategoryCollection",(function(){var e=r.props,t=e.fetchReactionGifSearchFull,n=e.currentlyShowing,i=e.reactionGifSearchFullpageNum;!0===r.state.isFullyLoaded&&null!=n?(r.setState({showingCategory:!1}),t(n,i)):r.setState({showingCategory:!0})})),g()(l()(r),"handleScrollCollection",(function(){var e=r.state.showingCategory,t=r.props,n=t.currentlyShowing,i=t.reactionGifRequestPending,o=t.reactionGifSearchFullpageNum;if(""!==n&&!1===e){var a=r.GifPickerBodyCollection.current,c=a.scrollTop,l=a.scrollHeight,s=l-c;r.setState({scrollDistance:c}),s<1e3&&l>=1e3&&!1===i&&r.showCategoryCollection(n,o)}})),g()(l()(r),"selectGif",(function(e){(0,r.props.handleGifSelection)(e)})),g()(l()(r),"renderSelectableGifs",(function(e,t){var n=r.state.scrollDistance,i=r.props,o=i.reactionGifSearchFullpageNum,a=i.getColorByPostIndex,c=e.id,l=e.height,s=e.runningGifHeight,u={height:"".concat(l,"px")},p={backgroundImage:"linear-gradient(".concat(a(t),", #2e3035)"),height:"".concat(l,"px")},d="".concat(F.LS,"/").concat(c,"_lq.mp4"),m="".concat(F.LS,"/").concat(c,".gif");return s>=(n<450?0:n-450)&&s<n+343+450?y.createElement("div",{key:"".concat(t+c+o+!0),className:"gifpicker-image",style:u,onClick:function(){r.selectGif(m)}},y.createElement("video",{style:p,className:"gifpicker-collectionBackground",autoPlay:!0,preload:"none",loop:!0,playsInline:!0},y.createElement("source",{type:"video/mp4",src:d}))):y.createElement("div",{key:"".concat(t+c+o+!1," "),className:"gifpicker-image",style:u},y.createElement("video",{style:p,className:"gifpicker-collectionBackground",preload:"none",loop:!0,playsInline:!0},y.createElement("source",{type:"video/mp4"})))})),g()(l()(r),"resetCollection",(function(){var e=r.props,t=e.handleReset,n=e.resetReactionGifSearchCollections;t(),n(),r.setState({column1:[],column2:[],column1Height:0,column2Height:0})})),r.handleScrollCollection=B()(r.handleScrollCollection.bind(l()(r)),35),r.GifPickerBodyCollection=y.createRef(),r.state={showingCategory:!1,scrollDistance:0,isFullyLoaded:!0,column1:[],column2:[],column1Height:0,column2Height:0},r}return a()(n,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.fetchReactionGifSearchFull)(e.currentlyShowing,e.reactionGifSearchFullpageNum)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.gifsFromCategory,r=t.currentlyShowing,i=t.reactionGifSearchFullpageNum,o=t.fetchReactionGifSearchFull,a=this.state,c=a.column1Height,l=a.column2Height,s=this.state,u=s.column1,p=s.column2;if(n.size!==e.gifsFromCategory.size){for(var d=u.slice(0),m=p.slice(0),f=d.length+m.length!==0?d.length+m.length:0;f<n.size;f++){var h=U({},n.get(f)),g=141.5/h.width;h.height*=g,c<=l?(h.runningGifHeight=c+h.height+7,c=h.runningGifHeight,d.push(h)):(h.runningGifHeight=l+h.height+7,l=h.runningGifHeight,m.push(h))}this.setState({column1:d,column2:m,column1Height:c,column2Height:l})}r!==e.currentlyShowing&&(this.setState({column1:[],column2:[],column1Height:0,column2Height:0}),o(r,i))}},{key:"render",value:function(){var e=this,t=this.props,n=t.currentlyShowing,r=t.reactionGifRequestPending,i=this.state,o=i.column1,a=i.column2;return o.length||a.length||r?y.createElement("div",{className:"gifpicker-body-container"},y.createElement("div",{className:"gifpicker-collectionHeader"},y.createElement("div",{className:"gifpicker-backButton",onClick:function(){e.resetCollection()},"aria-label":"Go back to categories"},y.createElement(b.ZP,{className:"icon fill",name:b.Yd,width:"21",height:"15",viewBox:"0 0 21 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"})),y.createElement("h1",{className:"gifpicker-collectionHeaderText"},n)),y.createElement("div",{className:"gifpicker-body gifpicker-body-collection Scrollbar--gray",ref:this.GifPickerBodyCollection,onScroll:this.handleScrollCollection},y.createElement("div",null,o.map(this.renderSelectableGifs)),y.createElement("div",null,a.map(this.renderSelectableGifs)))):y.createElement("div",{className:"gifpicker-error"},y.createElement("div",{className:"gifpicker-error-image"},y.createElement("img",{src:T})),y.createElement("div",{className:"gifpicker-error-message"},y.createElement("h2",null,(0,v.Z)("reactionGifEmptySearch1")),y.createElement("br",null),y.createElement("h3",null,(0,v.Z)("reactionGifEmptySearch2"))))}}]),n}(y.Component);K.__docgenInfo={description:"",methods:[{name:"showCategoryCollection",docblock:null,modifiers:[],params:[],returns:null},{name:"handleScrollCollection",docblock:null,modifiers:[],params:[],returns:null},{name:"selectGif",docblock:null,modifiers:[],params:[{name:"videoShareURL",type:null}],returns:null},{name:"renderSelectableGifs",docblock:null,modifiers:[],params:[{name:"column",type:null},{name:"index",type:null}],returns:null},{name:"resetCollection",docblock:null,modifiers:[],params:[],returns:null}],displayName:"ReactionGIFCollections",props:{handleReset:{type:{name:"func"},required:!0,description:""},handleGifSelection:{type:{name:"func"},required:!0,description:""},getColorByPostIndex:{type:{name:"func"},required:!0,description:""},fetchReactionGifSearchFull:{type:{name:"func"},required:!0,description:""},currentlyShowing:{type:{name:"string"},required:!1,description:""},resetReactionGifSearchCollections:{type:{name:"func"},required:!1,description:""},reactionGifSearchFull:{type:{name:"object"},required:!1,description:""},reactionGifRequestPending:{type:{name:"bool"},required:!1,description:""},reactionGifSearchFullpageNum:{type:{name:"number"},required:!1,description:""},gifsFromCategory:{type:{name:"object"},required:!0,description:""}}};const A=(0,k.$j)((function(e){return{reactionGifCollections:e.comments.get("reactionGifCollections"),reactionGifRequestPending:e.comments.get("reactionGifRequestPending"),reactionGifSearchFullpageNum:e.comments.get("reactionGifSearchFullpageNum"),gifsFromCategory:e.comments.get("gifsFromCategory")}}),{fetchReactionGifSearchFull:C.N$,resetReactionGifSearchCollections:C.Hi})(K);function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var Y=function(e){u()(n,e);var t=J(n);function n(e){var r;return i()(this,n),r=t.call(this,e),g()(l()(r),"preventPost",(function(e){e.stopPropagation(),e.preventDefault()})),g()(l()(r),"submitHandler",(function(){r.debounceSubmitHandler.cancel();var e=r.props,t=e.resetReactionGifSearchCollections,n=e.searchString;t(),r.setState({currentlyShowing:n})})),g()(l()(r),"inputChangeHandler",(function(e){(0,r.props.setReactionGifSearchString)(e.target.value),r.preventPost(e),r.debounceSubmitHandler()})),g()(l()(r),"onCategorySelection",(function(e){r.setState({currentlyShowing:e})})),g()(l()(r),"handleReset",(function(){var e=r.props,t=e.fetchReactionCollections,n=e.resetReactionGifSearchCollections,i=e.setReactionGifSearchString,o=r.state.currentlyShowing;n(),t(),o&&(r.setState({currentlyShowing:""}),i(""))})),g()(l()(r),"handleGifSelection",(function(e){(0,r.props.selectGIF)(e,r.state.currentlyShowing)})),g()(l()(r),"handleKeyDown",(function(e){[S.NW].includes(e.key)&&(r.preventPost(e),r.submitHandler())})),r.debounceSubmitHandler=O()(r.submitHandler,1e3),r.state={currentlyShowing:""},r}return a()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchReactionCollections,n=e.searchString;t(),""!==n&&this.submitHandler()}},{key:"componentWillUnmount",value:function(){(0,this.props.setReactionGifSearchString)("")}},{key:"getColorByPostIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=["#ffdd00","#1bb76e","#227efa","#4a58fb","#6432f9","#ec4081","#4366d0","#7b85f7","#fc6369","#f14768","#ff51ba","#2ccaff","#43d0bd","#20bee8","#ffd300","#ff7d00"];return isNaN(e)&&(e=0),t[e%t.length]}},{key:"render",value:function(){var e,t,n=this,r=this.props,i=r.position,o=r.placeholder,a=r.searchString,c=r.isPromoted,l=r.promotedConfig,s=this.state.currentlyShowing,u=I()(["gifpicker",{"gifpicker--down":"bottom"===i,"gifpicker--promoted":c}]),p="gifpicker-nano".concat(s&&"-collection");if(c){var d="#".concat(l.get("header_text_color","ffffff"));e={"--gifpicker-triangle-color":"#".concat(l.get("header_gradiant_top","353aab"))},t={background:"linear-gradient(to bottom, #".concat(l.get("header_gradiant_top","474a51"),", #").concat(l.get("header_gradiant_bottom","1f2b59"),")"),color:d,fill:d}}return y.createElement("div",{className:u,style:e},y.createElement("div",{className:"gifpicker-header",style:t},y.createElement("div",{className:"gifpicker-header-content"},c?y.createElement(y.Fragment,null,y.createElement("p",{className:"gifpicker-header-content-title"},l.get("header_title")),y.createElement("p",{className:"gifpicker-header-content-subtitle"},l.get("header_subtitle"))):y.createElement("p",{className:"gifpicker-header-content-title"},(0,v.Z)("reactionGIF")),y.createElement("div",{className:"gifpicker-searchbar"},y.createElement("input",{placeholder:o,className:"gifpicker-searchbar-textInput",type:"text",value:a,onChange:this.inputChangeHandler,onSubmit:this.submitHandler,onKeyDown:this.handleKeyDown}),y.createElement("div",{className:"ReactionGIFSearch-Icon"},y.createElement(b.ZP,{name:b.NU,width:"21",height:"20",viewBox:"0 0 21 20",onClick:function(e){n.preventPost(e),n.submitHandler()}})))),c&&y.createElement("img",{className:"gifpicker-header-asset",src:"//".concat(F.H,".").concat(F.VB,"/").concat(l.get("header_image"),".png")})),s?y.createElement(A,{currentlyShowing:s,getColorByPostIndex:this.getColorByPostIndex,handleReset:this.handleReset,handleGifSelection:this.handleGifSelection}):y.createElement(L,{onCategorySelection:this.onCategorySelection,getColorByPostIndex:this.getColorByPostIndex}),y.createElement("div",{className:p}))}}]),n}(y.Component);Y.defaultProps={placeholder:(0,v.Z)("reactionGifSearchPlaceholder")};Y.__docgenInfo={description:"",methods:[{name:"getColorByPostIndex",docblock:null,modifiers:[],params:[{name:"itemIndex",type:null}],returns:null},{name:"preventPost",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"submitHandler",docblock:null,modifiers:[],params:[],returns:null},{name:"inputChangeHandler",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"onCategorySelection",docblock:null,modifiers:[],params:[{name:"queryString",type:null}],returns:null},{name:"handleReset",docblock:null,modifiers:[],params:[],returns:null},{name:"handleGifSelection",docblock:null,modifiers:[],params:[{name:"GifURL",type:null}],returns:null},{name:"handleKeyDown",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null}],displayName:"ReactionGIF",props:{placeholder:{defaultValue:{value:"copy('reactionGifSearchPlaceholder')",computed:!0},type:{name:"string"},required:!1,description:""},fetchReactionCollections:{type:{name:"func"},required:!0,description:""},position:{type:{name:"string"},required:!1,description:""},currentlyShowing:{type:{name:"string"},required:!1,description:""},searchString:{type:{name:"string"},required:!1,description:""},value:{type:{name:"string"},required:!1,description:""},resetReactionGifSearchCollections:{type:{name:"func"},required:!1,description:""},onCategorySelection:{type:{name:"func"},required:!1,description:""},selectGIF:{type:{name:"func"},required:!0,description:""},setReactionGifSearchString:{type:{name:"func"},required:!0,description:""},promotedConfig:{type:{name:"object"},required:!1,description:""},isPromoted:{type:{name:"bool"},required:!1,description:""}}};const Q=(0,k.$j)((function(e){var t=e.comments,n=e.config;return{reactionGifCollections:t.get("reactionGifCollections"),promotedConfig:n.get("sponsoredReactionGifsDefinition",new M.Map),isPromoted:!!n.getIn(["sponsoredReactionGifsDefinition","is_active"]),searchString:t.get("reactionGifSearchString")}}),{fetchReactionCollections:C.jY,resetReactionGifSearchCollections:C.Hi,setReactionGifSearchString:C.PK})(Y);function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var X=function(e){u()(n,e);var t=$(n);function n(e){var r;return i()(this,n),r=t.call(this,e),g()(l()(r),"handleKeyDown",(function(e){var t=r.props.setReactionGifPopupVisibility;[S.nQ,S.$1].includes(e.key)&&t(!1)})),g()(l()(r),"gifToggle",(function(){var e=r.ReactionGIF.current.getBoundingClientRect().top,t=r.state.gifSaved,n=r.props,i=n.reactionGifSelectedAnalytics,o=n.isPromoted,a=n.disabled,c=n.setReactionGifPopupVisibility,l=n.isGIFOpen;if(!a){var s=!0;if(e<500&&(s=!1),l||r.setState({gifSaved:!1}),l&&!t){i(null,"Cancelled",o)}r.setState({gifOpenUp:s}),c(!l)}})),g()(l()(r),"onSelect",(function(e,t){var n=r.props,i=n.onSelect,o=n.reactionGifSelectedAnalytics,a=n.isPromoted,c=n.setReactionGifPopupVisibility;r.setState({gifSaved:!0}),c(!1);o(t,"Saved",a,(0,E.UO)(e)),i(e)})),r.ReactionGIF=y.createRef(),r.state={gifOpenUp:!0,gifSaved:!1},r}return a()(n,[{key:"componentDidMount",value:function(){(0,R.kZ)("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){(0,R.KZ)("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.state.gifOpenUp,t=this.props,n=t.isGIFOpen,r=t.className,i=t.disabled,o=t.title;return y.createElement("div",{className:r,ref:this.ReactionGIF,disabled:i},y.createElement(b.ZP,{className:"icon fill",name:b.gt,id:"GIFButton",onClick:this.gifToggle,"aria-label":o,title:o,width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),n?y.createElement(q,{onClickOutside:this.gifToggle},y.createElement(Q,{position:e?"top":"bottom",selectGIF:this.onSelect})):"")}}]),n}(y.PureComponent);X.defaultProps={className:"ReactionGIF",title:(0,v.Z)("gifOnHover")},X.__docgenInfo={description:"",methods:[{name:"handleKeyDown",docblock:null,modifiers:[],params:[{name:"event",type:null}],returns:null},{name:"gifToggle",docblock:null,modifiers:[],params:[],returns:null},{name:"onSelect",docblock:null,modifiers:[],params:[{name:"GifURL",type:null},{name:"category",type:null}],returns:null}],displayName:"ReactionGIFButton",props:{className:{defaultValue:{value:"'ReactionGIF'",computed:!1},type:{name:"string"},required:!1,description:""},title:{defaultValue:{value:"copy('gifOnHover')",computed:!0},type:{name:"string"},required:!1,description:""},onSelect:{type:{name:"func"},required:!0,description:""},reactionGifSelectedAnalytics:{type:{name:"func"},required:!0,description:""},isPromoted:{type:{name:"bool"},required:!1,description:""},disabled:{type:{name:"bool"},required:!1,description:""},isGIFOpen:{type:{name:"bool"},required:!1,description:""},setReactionGifPopupVisibility:{type:{name:"func"},required:!0,description:""}}};const z=(0,k.$j)((function(e){return{isPromoted:!!e.config.getIn(["sponsoredReactionGifsDefinition","is_active"])}}),{reactionGifSelectedAnalytics:C.wq})(X)},kXiY:(e,t,n)=>{n.d(t,{Z:()=>S});var r=n("lwsE"),i=n.n(r),o=n("W8MJ"),a=n.n(o),c=n("PJYZ"),l=n.n(c),s=n("7W2i"),u=n.n(s),p=n("a1gu"),d=n.n(p),m=n("Nsbk"),f=n.n(m),h=n("lSNA"),g=n.n(h),y=n("q1tI"),v=(n("17x9"),n("JPcv")),k=n("cm4/"),b=n("g1ek");function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var S=function(e){u()(n,e);var t=C(n);function n(e){var r;i()(this,n),r=t.call(this,e),g()(l()(r),"grabString",(function(e){var t=(0,b.Vo)(e,b.XO);if(!t.length)return e;var n="",r=e.substr(0,t[0].begin);r.length&&(n=r);for(var i=!1,o="",a=0;a<t.length;a++){if(a>0){var c=t[a-1],l=t[a].begin-1-c.end,s=e.substr(c.end+1,l);s.length&&(n+=s)}i?n+=b.TE+t[a].href:(o=t[a].href,i=!0)}var u=e.substr(t[t.length-1].end+1);return u.length&&(n+=u),o&&(n+=" ".concat(o)),n}));var o=e.opUsername?{opUsername:e.opUsername}:{};return o.isLinkifyTargetMedia=e.isLinkifyTargetMedia,o.postMedia=e.postMedia,(0,b.tW)(k.N1,o),r}return a()(n,[{key:"getChildren",value:function(){var e=this.props,t=e.children,n=e.expandlink;return"string"!=typeof t||"true"!==n?t:this.grabString(t)}},{key:"render",value:function(){var e=this.props,t=e.onClick,n=e.expandlink,r=e.component,i=e.postMedia;return y.createElement(k.ZP,{component:r,properties:{target:"_blank",rel:"noopener noreferrer",onClick:t,className:"Linkify-element",expandlink:n,postMedia:i}},this.getChildren())}}]),n}(y.Component);S.defaultProps={onClick:function(){return!0},expandlink:"false",postMedia:new v.List},S.__docgenInfo={description:"",methods:[{name:"getChildren",docblock:null,modifiers:[],params:[],returns:null},{name:"grabString",docblock:null,modifiers:[],params:[{name:"str",type:null}],returns:null}],displayName:"ImgurLinkify",props:{onClick:{defaultValue:{value:"() => true",computed:!1},type:{name:"func"},required:!1,description:""},expandlink:{defaultValue:{value:"'false'",computed:!1},type:{name:"enum",value:[{value:"'true'",computed:!1},{value:"'false'",computed:!1}]},required:!1,description:""},postMedia:{defaultValue:{value:"new List()",computed:!1},type:{name:"object"},required:!1,description:""},children:{type:{name:"any"},required:!1,description:""},component:{type:{name:"func"},required:!1,description:""},opUsername:{type:{name:"string"},required:!1,description:""},isLinkifyTargetMedia:{type:{name:"bool"},required:!1,description:""}}}}}]);